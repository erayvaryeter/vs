{"version":3,"file":"eslintServer.js","mappings":"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","sources":["webpack://eslint-server/./src/diff.ts","webpack://eslint-server/./src/eslint.ts","webpack://eslint-server/./src/is.ts","webpack://eslint-server/./src/languageDefaults.ts","webpack://eslint-server/./src/linkedMap.ts","webpack://eslint-server/./src/paths.ts","webpack://eslint-server/./src/shared/customMessages.ts","webpack://eslint-server/./src/shared/settings.ts","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/api.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/cancellation.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/connection.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/disposable.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/events.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/is.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/linkedMap.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/messageBuffer.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/messageReader.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/messageWriter.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/messages.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/ral.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/semaphore.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/common/sharedArrayCancellation.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/node/main.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/lib/node/ril.js","webpack://eslint-server/./node_modules/vscode-jsonrpc/node.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/api.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/connection.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/messages.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.callHierarchy.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.colorProvider.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.configuration.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.declaration.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.diagnostic.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.fileOperations.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.foldingRange.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.implementation.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.inlayHint.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.inlineValue.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.linkedEditingRange.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.moniker.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.notebook.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.progress.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.selectionRange.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.semanticTokens.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.showDocument.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.typeDefinition.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.typeHierarchy.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/protocol.workspaceFolder.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/common/utils/is.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/lib/node/main.js","webpack://eslint-server/./node_modules/vscode-languageserver-protocol/node.js","webpack://eslint-server/./node_modules/vscode-languageserver-textdocument/lib/esm/main.js","webpack://eslint-server/./node_modules/vscode-languageserver-types/lib/esm/main.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/api.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/callHierarchy.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/configuration.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/diagnostic.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/fileOperations.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/inlayHint.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/inlineValue.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/linkedEditingRange.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/moniker.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/notebook.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/progress.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/semanticTokens.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/server.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/showDocument.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/textDocuments.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/typeHierarchy.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/utils/is.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/utils/uuid.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/common/workspaceFolder.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/node/files.js","webpack://eslint-server/./node_modules/vscode-languageserver/lib/node/main.js","webpack://eslint-server/./node_modules/vscode-languageserver/node.js","webpack://eslint-server/./node_modules/vscode-uri/lib/esm/index.js","webpack://eslint-server/external node-commonjs \"child_process\"","webpack://eslint-server/external node-commonjs \"crypto\"","webpack://eslint-server/external node-commonjs \"fs\"","webpack://eslint-server/external node-commonjs \"net\"","webpack://eslint-server/external node-commonjs \"os\"","webpack://eslint-server/external node-commonjs \"path\"","webpack://eslint-server/external node-commonjs \"url\"","webpack://eslint-server/external node-commonjs \"util\"","webpack://eslint-server/webpack/bootstrap","webpack://eslint-server/webpack/runtime/define property getters","webpack://eslint-server/webpack/runtime/hasOwnProperty shorthand","webpack://eslint-server/webpack/runtime/make namespace object","webpack://eslint-server/./src/eslintServer.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n\r\nexport interface IDiffChange {\r\n\t/**\r\n\t * The position of the first element in the original sequence which\r\n\t * this change affects.\r\n\t */\r\n\toriginalStart: number;\r\n\r\n\t/**\r\n\t * The number of elements from the original sequence which were\r\n\t * affected.\r\n\t */\r\n\toriginalLength: number;\r\n\r\n\t/**\r\n\t * The position of the first element in the modified sequence which\r\n\t * this change affects.\r\n\t */\r\n\tmodifiedStart: number;\r\n\r\n\t/**\r\n\t * The number of elements from the modified sequence which were\r\n\t * affected (added).\r\n\t */\r\n\tmodifiedLength: number;\r\n}\r\n\r\nexport function stringDiff(original: string, modified: string, pretty: boolean): IDiffChange[] {\r\n\treturn new LcsDiff(new StringDiffSequence(original), new StringDiffSequence(modified)).ComputeDiff(pretty).changes;\r\n}\r\n\r\ninterface ISequence {\r\n\tgetElements(): Int32Array;\r\n}\r\n\r\nclass StringDiffSequence implements ISequence {\r\n\r\n\tconstructor(private source: string) { }\r\n\r\n\tgetElements(): Int32Array {\r\n\t\tconst source = this.source;\r\n\t\tconst characters = new Int32Array(source.length);\r\n\t\tfor (let i = 0, len = source.length; i < len; i++) {\r\n\t\t\tcharacters[i] = source.charCodeAt(i);\r\n\t\t}\r\n\t\treturn characters;\r\n\t}\r\n}\r\n\r\ninterface IContinueProcessingPredicate {\r\n\t(furthestOriginalIndex: number, matchLengthOfLongest: number): boolean;\r\n}\r\n\r\ninterface IDiffResult {\r\n\tquitEarly: boolean;\r\n\tchanges: IDiffChange[];\r\n}\r\n\r\n/**\r\n * Represents information about a specific difference between two sequences.\r\n */\r\nclass DiffChange {\r\n\r\n\t/**\r\n\t * The position of the first element in the original sequence which\r\n\t * this change affects.\r\n\t */\r\n\tpublic originalStart: number;\r\n\r\n\t/**\r\n\t * The number of elements from the original sequence which were\r\n\t * affected.\r\n\t */\r\n\tpublic originalLength: number;\r\n\r\n\t/**\r\n\t * The position of the first element in the modified sequence which\r\n\t * this change affects.\r\n\t */\r\n\tpublic modifiedStart: number;\r\n\r\n\t/**\r\n\t * The number of elements from the modified sequence which were\r\n\t * affected (added).\r\n\t */\r\n\tpublic modifiedLength: number;\r\n\r\n\t/**\r\n\t * Constructs a new DiffChange with the given sequence information\r\n\t * and content.\r\n\t */\r\n\tconstructor(originalStart: number, originalLength: number, modifiedStart: number, modifiedLength: number) {\r\n\t\t//Debug.Assert(originalLength > 0 || modifiedLength > 0, \"originalLength and modifiedLength cannot both be <= 0\");\r\n\t\tthis.originalStart = originalStart;\r\n\t\tthis.originalLength = originalLength;\r\n\t\tthis.modifiedStart = modifiedStart;\r\n\t\tthis.modifiedLength = modifiedLength;\r\n\t}\r\n\r\n\t/**\r\n\t * The end point (exclusive) of the change in the original sequence.\r\n\t */\r\n\tpublic getOriginalEnd() {\r\n\t\treturn this.originalStart + this.originalLength;\r\n\t}\r\n\r\n\t/**\r\n\t * The end point (exclusive) of the change in the modified sequence.\r\n\t */\r\n\tpublic getModifiedEnd() {\r\n\t\treturn this.modifiedStart + this.modifiedLength;\r\n\t}\r\n}\r\n\r\nexport class Debug {\r\n\tpublic static Assert(condition: boolean, message: string): void {\r\n\t\tif (!condition) {\r\n\t\t\tthrow new Error(message);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst enum Constants {\r\n\t/**\r\n\t * MAX SMI (SMall Integer) as defined in v8.\r\n\t * one bit is lost for boxing/unboxing flag.\r\n\t * one bit is lost for sign flag.\r\n\t * See https://thibaultlaurens.github.io/javascript/2013/04/29/how-the-v8-engine-works/#tagged-values\r\n\t */\r\n\tMAX_SAFE_SMALL_INTEGER = 1 << 30,\r\n\r\n\t/**\r\n\t * MIN SMI (SMall Integer) as defined in v8.\r\n\t * one bit is lost for boxing/unboxing flag.\r\n\t * one bit is lost for sign flag.\r\n\t * See https://thibaultlaurens.github.io/javascript/2013/04/29/how-the-v8-engine-works/#tagged-values\r\n\t */\r\n\tMIN_SAFE_SMALL_INTEGER = -(1 << 30),\r\n\r\n\t/**\r\n\t * Max unsigned integer that fits on 8 bits.\r\n\t */\r\n\tMAX_UINT_8 = 255, // 2^8 - 1\r\n\r\n\t/**\r\n\t * Max unsigned integer that fits on 16 bits.\r\n\t */\r\n\tMAX_UINT_16 = 65535, // 2^16 - 1\r\n\r\n\t/**\r\n\t * Max unsigned integer that fits on 32 bits.\r\n\t */\r\n\tMAX_UINT_32 = 4294967295, // 2^32 - 1\r\n\r\n\tUNICODE_SUPPLEMENTARY_PLANE_BEGIN = 0x010000\r\n}\r\n\r\nconst enum LocalConstants {\r\n\tMaxDifferencesHistory = 1447\r\n}\r\n\r\nclass MyArray {\r\n\t/**\r\n\t * Copies a range of elements from an Array starting at the specified source index and pastes\r\n\t * them to another Array starting at the specified destination index. The length and the indexes\r\n\t * are specified as 64-bit integers.\r\n\t * sourceArray:\r\n\t *\t\tThe Array that contains the data to copy.\r\n\t * sourceIndex:\r\n\t *\t\tA 64-bit integer that represents the index in the sourceArray at which copying begins.\r\n\t * destinationArray:\r\n\t *\t\tThe Array that receives the data.\r\n\t * destinationIndex:\r\n\t *\t\tA 64-bit integer that represents the index in the destinationArray at which storing begins.\r\n\t * length:\r\n\t *\t\tA 64-bit integer that represents the number of elements to copy.\r\n\t */\r\n\tpublic static Copy(sourceArray: any[], sourceIndex: number, destinationArray: any[], destinationIndex: number, length: number) {\r\n\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\tdestinationArray[destinationIndex + i] = sourceArray[sourceIndex + i];\r\n\t\t}\r\n\t}\r\n\tpublic static Copy2(sourceArray: Int32Array, sourceIndex: number, destinationArray: Int32Array, destinationIndex: number, length: number) {\r\n\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\tdestinationArray[destinationIndex + i] = sourceArray[sourceIndex + i];\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass DiffChangeHelper {\r\n\r\n\tprivate m_changes: DiffChange[];\r\n\tprivate m_originalStart: number;\r\n\tprivate m_modifiedStart: number;\r\n\tprivate m_originalCount: number;\r\n\tprivate m_modifiedCount: number;\r\n\r\n\t/**\r\n\t * Constructs a new DiffChangeHelper for the given DiffSequences.\r\n\t */\r\n\tconstructor() {\r\n\t\tthis.m_changes = [];\r\n\t\tthis.m_originalStart = Constants.MAX_SAFE_SMALL_INTEGER;\r\n\t\tthis.m_modifiedStart = Constants.MAX_SAFE_SMALL_INTEGER;\r\n\t\tthis.m_originalCount = 0;\r\n\t\tthis.m_modifiedCount = 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Marks the beginning of the next change in the set of differences.\r\n\t */\r\n\tpublic MarkNextChange(): void {\r\n\t\t// Only add to the list if there is something to add\r\n\t\tif (this.m_originalCount > 0 || this.m_modifiedCount > 0) {\r\n\t\t\t// Add the new change to our list\r\n\t\t\tthis.m_changes.push(new DiffChange(this.m_originalStart, this.m_originalCount,\r\n\t\t\t\tthis.m_modifiedStart, this.m_modifiedCount));\r\n\t\t}\r\n\r\n\t\t// Reset for the next change\r\n\t\tthis.m_originalCount = 0;\r\n\t\tthis.m_modifiedCount = 0;\r\n\t\tthis.m_originalStart = Constants.MAX_SAFE_SMALL_INTEGER;\r\n\t\tthis.m_modifiedStart = Constants.MAX_SAFE_SMALL_INTEGER;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds the original element at the given position to the elements\r\n\t * affected by the current change. The modified index gives context\r\n\t * to the change position with respect to the original sequence.\r\n\t * @param originalIndex The index of the original element to add.\r\n\t * @param modifiedIndex The index of the modified element that provides corresponding position in the modified sequence.\r\n\t */\r\n\tpublic AddOriginalElement(originalIndex: number, modifiedIndex: number) {\r\n\t\t// The 'true' start index is the smallest of the ones we've seen\r\n\t\tthis.m_originalStart = Math.min(this.m_originalStart, originalIndex);\r\n\t\tthis.m_modifiedStart = Math.min(this.m_modifiedStart, modifiedIndex);\r\n\r\n\t\tthis.m_originalCount++;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds the modified element at the given position to the elements\r\n\t * affected by the current change. The original index gives context\r\n\t * to the change position with respect to the modified sequence.\r\n\t * @param originalIndex The index of the original element that provides corresponding position in the original sequence.\r\n\t * @param modifiedIndex The index of the modified element to add.\r\n\t */\r\n\tpublic AddModifiedElement(originalIndex: number, modifiedIndex: number): void {\r\n\t\t// The 'true' start index is the smallest of the ones we've seen\r\n\t\tthis.m_originalStart = Math.min(this.m_originalStart, originalIndex);\r\n\t\tthis.m_modifiedStart = Math.min(this.m_modifiedStart, modifiedIndex);\r\n\r\n\t\tthis.m_modifiedCount++;\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieves all of the changes marked by the class.\r\n\t */\r\n\tpublic getChanges(): DiffChange[] {\r\n\t\tif (this.m_originalCount > 0 || this.m_modifiedCount > 0) {\r\n\t\t\t// Finish up on whatever is left\r\n\t\t\tthis.MarkNextChange();\r\n\t\t}\r\n\r\n\t\treturn this.m_changes;\r\n\t}\r\n\r\n\t/**\r\n\t * Retrieves all of the changes marked by the class in the reverse order\r\n\t */\r\n\tpublic getReverseChanges(): DiffChange[] {\r\n\t\tif (this.m_originalCount > 0 || this.m_modifiedCount > 0) {\r\n\t\t\t// Finish up on whatever is left\r\n\t\t\tthis.MarkNextChange();\r\n\t\t}\r\n\r\n\t\tthis.m_changes.reverse();\r\n\t\treturn this.m_changes;\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * An implementation of the difference algorithm described in\r\n * \"An O(ND) Difference Algorithm and its variations\" by Eugene W. Myers\r\n */\r\nexport class LcsDiff {\r\n\r\n\tprivate readonly ContinueProcessingPredicate: IContinueProcessingPredicate | null;\r\n\r\n\tprivate readonly _hasStrings: boolean;\r\n\tprivate readonly _originalStringElements: string[];\r\n\tprivate readonly _originalElementsOrHash: Int32Array;\r\n\tprivate readonly _modifiedStringElements: string[];\r\n\tprivate readonly _modifiedElementsOrHash: Int32Array;\r\n\r\n\tprivate m_forwardHistory: Int32Array[];\r\n\tprivate m_reverseHistory: Int32Array[];\r\n\r\n\t/**\r\n\t * Constructs the DiffFinder\r\n\t */\r\n\tconstructor(originalSequence: ISequence, modifiedSequence: ISequence, continueProcessingPredicate: IContinueProcessingPredicate | null = null) {\r\n\t\tthis.ContinueProcessingPredicate = continueProcessingPredicate;\r\n\r\n\t\tconst [originalStringElements, originalElementsOrHash, originalHasStrings] = LcsDiff._getElements(originalSequence);\r\n\t\tconst [modifiedStringElements, modifiedElementsOrHash, modifiedHasStrings] = LcsDiff._getElements(modifiedSequence);\r\n\r\n\t\tthis._hasStrings = (originalHasStrings && modifiedHasStrings);\r\n\t\tthis._originalStringElements = originalStringElements;\r\n\t\tthis._originalElementsOrHash = originalElementsOrHash;\r\n\t\tthis._modifiedStringElements = modifiedStringElements;\r\n\t\tthis._modifiedElementsOrHash = modifiedElementsOrHash;\r\n\r\n\t\tthis.m_forwardHistory = [];\r\n\t\tthis.m_reverseHistory = [];\r\n\t}\r\n\r\n\tprivate static _getElements(sequence: ISequence): [string[], Int32Array, boolean] {\r\n\t\tconst elements = sequence.getElements();\r\n\r\n\t\tif (elements instanceof Int32Array) {\r\n\t\t\treturn [[], elements, false];\r\n\t\t}\r\n\r\n\t\treturn [[], new Int32Array(elements), false];\r\n\t}\r\n\r\n\tprivate ElementsAreEqual(originalIndex: number, newIndex: number): boolean {\r\n\t\tif (this._originalElementsOrHash[originalIndex] !== this._modifiedElementsOrHash[newIndex]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn (this._hasStrings ? this._originalStringElements[originalIndex] === this._modifiedStringElements[newIndex] : true);\r\n\t}\r\n\r\n\tprivate OriginalElementsAreEqual(index1: number, index2: number): boolean {\r\n\t\tif (this._originalElementsOrHash[index1] !== this._originalElementsOrHash[index2]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn (this._hasStrings ? this._originalStringElements[index1] === this._originalStringElements[index2] : true);\r\n\t}\r\n\r\n\tprivate ModifiedElementsAreEqual(index1: number, index2: number): boolean {\r\n\t\tif (this._modifiedElementsOrHash[index1] !== this._modifiedElementsOrHash[index2]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn (this._hasStrings ? this._modifiedStringElements[index1] === this._modifiedStringElements[index2] : true);\r\n\t}\r\n\r\n\tpublic ComputeDiff(pretty: boolean): IDiffResult {\r\n\t\treturn this._ComputeDiff(0, this._originalElementsOrHash.length - 1, 0, this._modifiedElementsOrHash.length - 1, pretty);\r\n\t}\r\n\r\n\t/**\r\n\t * Computes the differences between the original and modified input\r\n\t * sequences on the bounded range.\r\n\t * @returns An array of the differences between the two input sequences.\r\n\t */\r\n\tprivate _ComputeDiff(originalStart: number, originalEnd: number, modifiedStart: number, modifiedEnd: number, pretty: boolean): IDiffResult {\r\n\t\tconst quitEarlyArr = [false];\r\n\t\tlet changes = this.ComputeDiffRecursive(originalStart, originalEnd, modifiedStart, modifiedEnd, quitEarlyArr);\r\n\r\n\t\tif (pretty) {\r\n\t\t\t// We have to clean up the computed diff to be more intuitive\r\n\t\t\t// but it turns out this cannot be done correctly until the entire set\r\n\t\t\t// of diffs have been computed\r\n\t\t\tchanges = this.PrettifyChanges(changes);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tquitEarly: quitEarlyArr[0],\r\n\t\t\tchanges: changes\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Private helper method which computes the differences on the bounded range\r\n\t * recursively.\r\n\t * @returns An array of the differences between the two input sequences.\r\n\t */\r\n\tprivate ComputeDiffRecursive(originalStart: number, originalEnd: number, modifiedStart: number, modifiedEnd: number, quitEarlyArr: boolean[]): DiffChange[] {\r\n\t\tquitEarlyArr[0] = false;\r\n\r\n\t\t// Find the start of the differences\r\n\t\twhile (originalStart <= originalEnd && modifiedStart <= modifiedEnd && this.ElementsAreEqual(originalStart, modifiedStart)) {\r\n\t\t\toriginalStart++;\r\n\t\t\tmodifiedStart++;\r\n\t\t}\r\n\r\n\t\t// Find the end of the differences\r\n\t\twhile (originalEnd >= originalStart && modifiedEnd >= modifiedStart && this.ElementsAreEqual(originalEnd, modifiedEnd)) {\r\n\t\t\toriginalEnd--;\r\n\t\t\tmodifiedEnd--;\r\n\t\t}\r\n\r\n\t\t// In the special case where we either have all insertions or all deletions or the sequences are identical\r\n\t\tif (originalStart > originalEnd || modifiedStart > modifiedEnd) {\r\n\t\t\tlet changes: DiffChange[];\r\n\r\n\t\t\tif (modifiedStart <= modifiedEnd) {\r\n\t\t\t\tDebug.Assert(originalStart === originalEnd + 1, 'originalStart should only be one more than originalEnd');\r\n\r\n\t\t\t\t// All insertions\r\n\t\t\t\tchanges = [\r\n\t\t\t\t\tnew DiffChange(originalStart, 0, modifiedStart, modifiedEnd - modifiedStart + 1)\r\n\t\t\t\t];\r\n\t\t\t} else if (originalStart <= originalEnd) {\r\n\t\t\t\tDebug.Assert(modifiedStart === modifiedEnd + 1, 'modifiedStart should only be one more than modifiedEnd');\r\n\r\n\t\t\t\t// All deletions\r\n\t\t\t\tchanges = [\r\n\t\t\t\t\tnew DiffChange(originalStart, originalEnd - originalStart + 1, modifiedStart, 0)\r\n\t\t\t\t];\r\n\t\t\t} else {\r\n\t\t\t\tDebug.Assert(originalStart === originalEnd + 1, 'originalStart should only be one more than originalEnd');\r\n\t\t\t\tDebug.Assert(modifiedStart === modifiedEnd + 1, 'modifiedStart should only be one more than modifiedEnd');\r\n\r\n\t\t\t\t// Identical sequences - No differences\r\n\t\t\t\tchanges = [];\r\n\t\t\t}\r\n\r\n\t\t\treturn changes;\r\n\t\t}\r\n\r\n\t\t// This problem can be solved using the Divide-And-Conquer technique.\r\n\t\tconst midOriginalArr = [0];\r\n\t\tconst midModifiedArr = [0];\r\n\t\tconst result = this.ComputeRecursionPoint(originalStart, originalEnd, modifiedStart, modifiedEnd, midOriginalArr, midModifiedArr, quitEarlyArr);\r\n\r\n\t\tconst midOriginal = midOriginalArr[0];\r\n\t\tconst midModified = midModifiedArr[0];\r\n\r\n\t\tif (result !== null) {\r\n\t\t\t// Result is not-null when there was enough memory to compute the changes while\r\n\t\t\t// searching for the recursion point\r\n\t\t\treturn result;\r\n\t\t} else if (!quitEarlyArr[0]) {\r\n\t\t\t// We can break the problem down recursively by finding the changes in the\r\n\t\t\t// First Half:   (originalStart, modifiedStart) to (midOriginal, midModified)\r\n\t\t\t// Second Half:  (midOriginal + 1, minModified + 1) to (originalEnd, modifiedEnd)\r\n\t\t\t// NOTE: ComputeDiff() is inclusive, therefore the second range starts on the next point\r\n\r\n\t\t\tconst leftChanges = this.ComputeDiffRecursive(originalStart, midOriginal, modifiedStart, midModified, quitEarlyArr);\r\n\t\t\tlet rightChanges: DiffChange[] = [];\r\n\r\n\t\t\tif (!quitEarlyArr[0]) {\r\n\t\t\t\trightChanges = this.ComputeDiffRecursive(midOriginal + 1, originalEnd, midModified + 1, modifiedEnd, quitEarlyArr);\r\n\t\t\t} else {\r\n\t\t\t\t// We did't have time to finish the first half, so we don't have time to compute this half.\r\n\t\t\t\t// Consider the entire rest of the sequence different.\r\n\t\t\t\trightChanges = [\r\n\t\t\t\t\tnew DiffChange(midOriginal + 1, originalEnd - (midOriginal + 1) + 1, midModified + 1, modifiedEnd - (midModified + 1) + 1)\r\n\t\t\t\t];\r\n\t\t\t}\r\n\r\n\t\t\treturn this.ConcatenateChanges(leftChanges, rightChanges);\r\n\t\t}\r\n\r\n\t\t// If we hit here, we quit early, and so can't return anything meaningful\r\n\t\treturn [\r\n\t\t\tnew DiffChange(originalStart, originalEnd - originalStart + 1, modifiedStart, modifiedEnd - modifiedStart + 1)\r\n\t\t];\r\n\t}\r\n\r\n\tprivate WALKTRACE(diagonalForwardBase: number, diagonalForwardStart: number, diagonalForwardEnd: number, diagonalForwardOffset: number,\r\n\t\tdiagonalReverseBase: number, diagonalReverseStart: number, diagonalReverseEnd: number, diagonalReverseOffset: number,\r\n\t\tforwardPoints: Int32Array, reversePoints: Int32Array,\r\n\t\toriginalIndex: number, originalEnd: number, midOriginalArr: number[],\r\n\t\tmodifiedIndex: number, modifiedEnd: number, midModifiedArr: number[],\r\n\t\tdeltaIsEven: boolean, quitEarlyArr: boolean[]\r\n\t): DiffChange[] {\r\n\t\tlet forwardChanges: DiffChange[] | null = null;\r\n\t\tlet reverseChanges: DiffChange[] | null = null;\r\n\r\n\t\t// First, walk backward through the forward diagonals history\r\n\t\tlet changeHelper = new DiffChangeHelper();\r\n\t\tlet diagonalMin = diagonalForwardStart;\r\n\t\tlet diagonalMax = diagonalForwardEnd;\r\n\t\tlet diagonalRelative = (midOriginalArr[0] - midModifiedArr[0]) - diagonalForwardOffset;\r\n\t\tlet lastOriginalIndex = Constants.MIN_SAFE_SMALL_INTEGER;\r\n\t\tlet historyIndex = this.m_forwardHistory.length - 1;\r\n\r\n\t\tdo {\r\n\t\t\t// Get the diagonal index from the relative diagonal number\r\n\t\t\tconst diagonal = diagonalRelative + diagonalForwardBase;\r\n\r\n\t\t\t// Figure out where we came from\r\n\t\t\tif (diagonal === diagonalMin || (diagonal < diagonalMax && forwardPoints[diagonal - 1] < forwardPoints[diagonal + 1])) {\r\n\t\t\t\t// Vertical line (the element is an insert)\r\n\t\t\t\toriginalIndex = forwardPoints[diagonal + 1];\r\n\t\t\t\tmodifiedIndex = originalIndex - diagonalRelative - diagonalForwardOffset;\r\n\t\t\t\tif (originalIndex < lastOriginalIndex) {\r\n\t\t\t\t\tchangeHelper.MarkNextChange();\r\n\t\t\t\t}\r\n\t\t\t\tlastOriginalIndex = originalIndex;\r\n\t\t\t\tchangeHelper.AddModifiedElement(originalIndex + 1, modifiedIndex);\r\n\t\t\t\tdiagonalRelative = (diagonal + 1) - diagonalForwardBase; //Setup for the next iteration\r\n\t\t\t} else {\r\n\t\t\t\t// Horizontal line (the element is a deletion)\r\n\t\t\t\toriginalIndex = forwardPoints[diagonal - 1] + 1;\r\n\t\t\t\tmodifiedIndex = originalIndex - diagonalRelative - diagonalForwardOffset;\r\n\t\t\t\tif (originalIndex < lastOriginalIndex) {\r\n\t\t\t\t\tchangeHelper.MarkNextChange();\r\n\t\t\t\t}\r\n\t\t\t\tlastOriginalIndex = originalIndex - 1;\r\n\t\t\t\tchangeHelper.AddOriginalElement(originalIndex, modifiedIndex + 1);\r\n\t\t\t\tdiagonalRelative = (diagonal - 1) - diagonalForwardBase; //Setup for the next iteration\r\n\t\t\t}\r\n\r\n\t\t\tif (historyIndex >= 0) {\r\n\t\t\t\tforwardPoints = this.m_forwardHistory[historyIndex];\r\n\t\t\t\tdiagonalForwardBase = forwardPoints[0]; //We stored this in the first spot\r\n\t\t\t\tdiagonalMin = 1;\r\n\t\t\t\tdiagonalMax = forwardPoints.length - 1;\r\n\t\t\t}\r\n\t\t} while (--historyIndex >= -1);\r\n\r\n\t\t// Ironically, we get the forward changes as the reverse of the\r\n\t\t// order we added them since we technically added them backwards\r\n\t\tforwardChanges = changeHelper.getReverseChanges();\r\n\r\n\t\tif (quitEarlyArr[0]) {\r\n\t\t\t// TODO: Calculate a partial from the reverse diagonals.\r\n\t\t\t//       For now, just assume everything after the midOriginal/midModified point is a diff\r\n\r\n\t\t\tlet originalStartPoint = midOriginalArr[0] + 1;\r\n\t\t\tlet modifiedStartPoint = midModifiedArr[0] + 1;\r\n\r\n\t\t\tif (forwardChanges !== null && forwardChanges.length > 0) {\r\n\t\t\t\tconst lastForwardChange = forwardChanges[forwardChanges.length - 1];\r\n\t\t\t\toriginalStartPoint = Math.max(originalStartPoint, lastForwardChange.getOriginalEnd());\r\n\t\t\t\tmodifiedStartPoint = Math.max(modifiedStartPoint, lastForwardChange.getModifiedEnd());\r\n\t\t\t}\r\n\r\n\t\t\treverseChanges = [\r\n\t\t\t\tnew DiffChange(originalStartPoint, originalEnd - originalStartPoint + 1,\r\n\t\t\t\t\tmodifiedStartPoint, modifiedEnd - modifiedStartPoint + 1)\r\n\t\t\t];\r\n\t\t} else {\r\n\t\t\t// Now walk backward through the reverse diagonals history\r\n\t\t\tchangeHelper = new DiffChangeHelper();\r\n\t\t\tdiagonalMin = diagonalReverseStart;\r\n\t\t\tdiagonalMax = diagonalReverseEnd;\r\n\t\t\tdiagonalRelative = (midOriginalArr[0] - midModifiedArr[0]) - diagonalReverseOffset;\r\n\t\t\tlastOriginalIndex = Constants.MAX_SAFE_SMALL_INTEGER;\r\n\t\t\thistoryIndex = (deltaIsEven) ? this.m_reverseHistory.length - 1 : this.m_reverseHistory.length - 2;\r\n\r\n\t\t\tdo {\r\n\t\t\t\t// Get the diagonal index from the relative diagonal number\r\n\t\t\t\tconst diagonal = diagonalRelative + diagonalReverseBase;\r\n\r\n\t\t\t\t// Figure out where we came from\r\n\t\t\t\tif (diagonal === diagonalMin || (diagonal < diagonalMax && reversePoints[diagonal - 1] >= reversePoints[diagonal + 1])) {\r\n\t\t\t\t\t// Horizontal line (the element is a deletion))\r\n\t\t\t\t\toriginalIndex = reversePoints[diagonal + 1] - 1;\r\n\t\t\t\t\tmodifiedIndex = originalIndex - diagonalRelative - diagonalReverseOffset;\r\n\t\t\t\t\tif (originalIndex > lastOriginalIndex) {\r\n\t\t\t\t\t\tchangeHelper.MarkNextChange();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlastOriginalIndex = originalIndex + 1;\r\n\t\t\t\t\tchangeHelper.AddOriginalElement(originalIndex + 1, modifiedIndex + 1);\r\n\t\t\t\t\tdiagonalRelative = (diagonal + 1) - diagonalReverseBase; //Setup for the next iteration\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Vertical line (the element is an insertion)\r\n\t\t\t\t\toriginalIndex = reversePoints[diagonal - 1];\r\n\t\t\t\t\tmodifiedIndex = originalIndex - diagonalRelative - diagonalReverseOffset;\r\n\t\t\t\t\tif (originalIndex > lastOriginalIndex) {\r\n\t\t\t\t\t\tchangeHelper.MarkNextChange();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlastOriginalIndex = originalIndex;\r\n\t\t\t\t\tchangeHelper.AddModifiedElement(originalIndex + 1, modifiedIndex + 1);\r\n\t\t\t\t\tdiagonalRelative = (diagonal - 1) - diagonalReverseBase; //Setup for the next iteration\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (historyIndex >= 0) {\r\n\t\t\t\t\treversePoints = this.m_reverseHistory[historyIndex];\r\n\t\t\t\t\tdiagonalReverseBase = reversePoints[0]; //We stored this in the first spot\r\n\t\t\t\t\tdiagonalMin = 1;\r\n\t\t\t\t\tdiagonalMax = reversePoints.length - 1;\r\n\t\t\t\t}\r\n\t\t\t} while (--historyIndex >= -1);\r\n\r\n\t\t\t// There are cases where the reverse history will find diffs that\r\n\t\t\t// are correct, but not intuitive, so we need shift them.\r\n\t\t\treverseChanges = changeHelper.getChanges();\r\n\t\t}\r\n\r\n\t\treturn this.ConcatenateChanges(forwardChanges, reverseChanges);\r\n\t}\r\n\r\n\t/**\r\n\t * Given the range to compute the diff on, this method finds the point:\r\n\t * (midOriginal, midModified)\r\n\t * that exists in the middle of the LCS of the two sequences and\r\n\t * is the point at which the LCS problem may be broken down recursively.\r\n\t * This method will try to keep the LCS trace in memory. If the LCS recursion\r\n\t * point is calculated and the full trace is available in memory, then this method\r\n\t * will return the change list.\r\n\t * @param originalStart The start bound of the original sequence range\r\n\t * @param originalEnd The end bound of the original sequence range\r\n\t * @param modifiedStart The start bound of the modified sequence range\r\n\t * @param modifiedEnd The end bound of the modified sequence range\r\n\t * @param midOriginal The middle point of the original sequence range\r\n\t * @param midModified The middle point of the modified sequence range\r\n\t * @returns The diff changes, if available, otherwise null\r\n\t */\r\n\tprivate ComputeRecursionPoint(originalStart: number, originalEnd: number, modifiedStart: number, modifiedEnd: number, midOriginalArr: number[], midModifiedArr: number[], quitEarlyArr: boolean[]) {\r\n\t\tlet originalIndex = 0, modifiedIndex = 0;\r\n\t\tlet diagonalForwardStart = 0, diagonalForwardEnd = 0;\r\n\t\tlet diagonalReverseStart = 0, diagonalReverseEnd = 0;\r\n\r\n\t\t// To traverse the edit graph and produce the proper LCS, our actual\r\n\t\t// start position is just outside the given boundary\r\n\t\toriginalStart--;\r\n\t\tmodifiedStart--;\r\n\r\n\t\t// We set these up to make the compiler happy, but they will\r\n\t\t// be replaced before we return with the actual recursion point\r\n\t\tmidOriginalArr[0] = 0;\r\n\t\tmidModifiedArr[0] = 0;\r\n\r\n\t\t// Clear out the history\r\n\t\tthis.m_forwardHistory = [];\r\n\t\tthis.m_reverseHistory = [];\r\n\r\n\t\t// Each cell in the two arrays corresponds to a diagonal in the edit graph.\r\n\t\t// The integer value in the cell represents the originalIndex of the furthest\r\n\t\t// reaching point found so far that ends in that diagonal.\r\n\t\t// The modifiedIndex can be computed mathematically from the originalIndex and the diagonal number.\r\n\t\tconst maxDifferences = (originalEnd - originalStart) + (modifiedEnd - modifiedStart);\r\n\t\tconst numDiagonals = maxDifferences + 1;\r\n\t\tconst forwardPoints = new Int32Array(numDiagonals);\r\n\t\tconst reversePoints = new Int32Array(numDiagonals);\r\n\t\t// diagonalForwardBase: Index into forwardPoints of the diagonal which passes through (originalStart, modifiedStart)\r\n\t\t// diagonalReverseBase: Index into reversePoints of the diagonal which passes through (originalEnd, modifiedEnd)\r\n\t\tconst diagonalForwardBase = (modifiedEnd - modifiedStart);\r\n\t\tconst diagonalReverseBase = (originalEnd - originalStart);\r\n\t\t// diagonalForwardOffset: Geometric offset which allows modifiedIndex to be computed from originalIndex and the\r\n\t\t//    diagonal number (relative to diagonalForwardBase)\r\n\t\t// diagonalReverseOffset: Geometric offset which allows modifiedIndex to be computed from originalIndex and the\r\n\t\t//    diagonal number (relative to diagonalReverseBase)\r\n\t\tconst diagonalForwardOffset = (originalStart - modifiedStart);\r\n\t\tconst diagonalReverseOffset = (originalEnd - modifiedEnd);\r\n\r\n\t\t// delta: The difference between the end diagonal and the start diagonal. This is used to relate diagonal numbers\r\n\t\t//   relative to the start diagonal with diagonal numbers relative to the end diagonal.\r\n\t\t// The Even/Oddn-ness of this delta is important for determining when we should check for overlap\r\n\t\tconst delta = diagonalReverseBase - diagonalForwardBase;\r\n\t\tconst deltaIsEven = (delta % 2 === 0);\r\n\r\n\t\t// Here we set up the start and end points as the furthest points found so far\r\n\t\t// in both the forward and reverse directions, respectively\r\n\t\tforwardPoints[diagonalForwardBase] = originalStart;\r\n\t\treversePoints[diagonalReverseBase] = originalEnd;\r\n\r\n\t\t// Remember if we quit early, and thus need to do a best-effort result instead of a real result.\r\n\t\tquitEarlyArr[0] = false;\r\n\r\n\r\n\r\n\t\t// A couple of points:\r\n\t\t// --With this method, we iterate on the number of differences between the two sequences.\r\n\t\t//   The more differences there actually are, the longer this will take.\r\n\t\t// --Also, as the number of differences increases, we have to search on diagonals further\r\n\t\t//   away from the reference diagonal (which is diagonalForwardBase for forward, diagonalReverseBase for reverse).\r\n\t\t// --We extend on even diagonals (relative to the reference diagonal) only when numDifferences\r\n\t\t//   is even and odd diagonals only when numDifferences is odd.\r\n\t\tfor (let numDifferences = 1; numDifferences <= (maxDifferences / 2) + 1; numDifferences++) {\r\n\t\t\tlet furthestOriginalIndex = 0;\r\n\t\t\tlet furthestModifiedIndex = 0;\r\n\r\n\t\t\t// Run the algorithm in the forward direction\r\n\t\t\tdiagonalForwardStart = this.ClipDiagonalBound(diagonalForwardBase - numDifferences, numDifferences, diagonalForwardBase, numDiagonals);\r\n\t\t\tdiagonalForwardEnd = this.ClipDiagonalBound(diagonalForwardBase + numDifferences, numDifferences, diagonalForwardBase, numDiagonals);\r\n\t\t\tfor (let diagonal = diagonalForwardStart; diagonal <= diagonalForwardEnd; diagonal += 2) {\r\n\t\t\t\t// STEP 1: We extend the furthest reaching point in the present diagonal\r\n\t\t\t\t// by looking at the diagonals above and below and picking the one whose point\r\n\t\t\t\t// is further away from the start point (originalStart, modifiedStart)\r\n\t\t\t\tif (diagonal === diagonalForwardStart || (diagonal < diagonalForwardEnd && forwardPoints[diagonal - 1] < forwardPoints[diagonal + 1])) {\r\n\t\t\t\t\toriginalIndex = forwardPoints[diagonal + 1];\r\n\t\t\t\t} else {\r\n\t\t\t\t\toriginalIndex = forwardPoints[diagonal - 1] + 1;\r\n\t\t\t\t}\r\n\t\t\t\tmodifiedIndex = originalIndex - (diagonal - diagonalForwardBase) - diagonalForwardOffset;\r\n\r\n\t\t\t\t// Save the current originalIndex so we can test for false overlap in step 3\r\n\t\t\t\tconst tempOriginalIndex = originalIndex;\r\n\r\n\t\t\t\t// STEP 2: We can continue to extend the furthest reaching point in the present diagonal\r\n\t\t\t\t// so long as the elements are equal.\r\n\t\t\t\twhile (originalIndex < originalEnd && modifiedIndex < modifiedEnd && this.ElementsAreEqual(originalIndex + 1, modifiedIndex + 1)) {\r\n\t\t\t\t\toriginalIndex++;\r\n\t\t\t\t\tmodifiedIndex++;\r\n\t\t\t\t}\r\n\t\t\t\tforwardPoints[diagonal] = originalIndex;\r\n\r\n\t\t\t\tif (originalIndex + modifiedIndex > furthestOriginalIndex + furthestModifiedIndex) {\r\n\t\t\t\t\tfurthestOriginalIndex = originalIndex;\r\n\t\t\t\t\tfurthestModifiedIndex = modifiedIndex;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// STEP 3: If delta is odd (overlap first happens on forward when delta is odd)\r\n\t\t\t\t// and diagonal is in the range of reverse diagonals computed for numDifferences-1\r\n\t\t\t\t// (the previous iteration; we haven't computed reverse diagonals for numDifferences yet)\r\n\t\t\t\t// then check for overlap.\r\n\t\t\t\tif (!deltaIsEven && Math.abs(diagonal - diagonalReverseBase) <= (numDifferences - 1)) {\r\n\t\t\t\t\tif (originalIndex >= reversePoints[diagonal]) {\r\n\t\t\t\t\t\tmidOriginalArr[0] = originalIndex;\r\n\t\t\t\t\t\tmidModifiedArr[0] = modifiedIndex;\r\n\r\n\t\t\t\t\t\tif (tempOriginalIndex <= reversePoints[diagonal] && LocalConstants.MaxDifferencesHistory > 0 && numDifferences <= (LocalConstants.MaxDifferencesHistory + 1)) {\r\n\t\t\t\t\t\t\t// BINGO! We overlapped, and we have the full trace in memory!\r\n\t\t\t\t\t\t\treturn this.WALKTRACE(diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset,\r\n\t\t\t\t\t\t\t\tdiagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset,\r\n\t\t\t\t\t\t\t\tforwardPoints, reversePoints,\r\n\t\t\t\t\t\t\t\toriginalIndex, originalEnd, midOriginalArr,\r\n\t\t\t\t\t\t\t\tmodifiedIndex, modifiedEnd, midModifiedArr,\r\n\t\t\t\t\t\t\t\tdeltaIsEven, quitEarlyArr\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// Either false overlap, or we didn't have enough memory for the full trace\r\n\t\t\t\t\t\t\t// Just return the recursion point\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Check to see if we should be quitting early, before moving on to the next iteration.\r\n\t\t\tconst matchLengthOfLongest = ((furthestOriginalIndex - originalStart) + (furthestModifiedIndex - modifiedStart) - numDifferences) / 2;\r\n\r\n\t\t\tif (this.ContinueProcessingPredicate !== null && !this.ContinueProcessingPredicate(furthestOriginalIndex, matchLengthOfLongest)) {\r\n\t\t\t\t// We can't finish, so skip ahead to generating a result from what we have.\r\n\t\t\t\tquitEarlyArr[0] = true;\r\n\r\n\t\t\t\t// Use the furthest distance we got in the forward direction.\r\n\t\t\t\tmidOriginalArr[0] = furthestOriginalIndex;\r\n\t\t\t\tmidModifiedArr[0] = furthestModifiedIndex;\r\n\r\n\t\t\t\tif (matchLengthOfLongest > 0 && LocalConstants.MaxDifferencesHistory > 0 && numDifferences <= (LocalConstants.MaxDifferencesHistory + 1)) {\r\n\t\t\t\t\t// Enough of the history is in memory to walk it backwards\r\n\t\t\t\t\treturn this.WALKTRACE(diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset,\r\n\t\t\t\t\t\tdiagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset,\r\n\t\t\t\t\t\tforwardPoints, reversePoints,\r\n\t\t\t\t\t\toriginalIndex, originalEnd, midOriginalArr,\r\n\t\t\t\t\t\tmodifiedIndex, modifiedEnd, midModifiedArr,\r\n\t\t\t\t\t\tdeltaIsEven, quitEarlyArr\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// We didn't actually remember enough of the history.\r\n\r\n\t\t\t\t\t//Since we are quitting the diff early, we need to shift back the originalStart and modified start\r\n\t\t\t\t\t//back into the boundary limits since we decremented their value above beyond the boundary limit.\r\n\t\t\t\t\toriginalStart++;\r\n\t\t\t\t\tmodifiedStart++;\r\n\r\n\t\t\t\t\treturn [\r\n\t\t\t\t\t\tnew DiffChange(originalStart, originalEnd - originalStart + 1,\r\n\t\t\t\t\t\t\tmodifiedStart, modifiedEnd - modifiedStart + 1)\r\n\t\t\t\t\t];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Run the algorithm in the reverse direction\r\n\t\t\tdiagonalReverseStart = this.ClipDiagonalBound(diagonalReverseBase - numDifferences, numDifferences, diagonalReverseBase, numDiagonals);\r\n\t\t\tdiagonalReverseEnd = this.ClipDiagonalBound(diagonalReverseBase + numDifferences, numDifferences, diagonalReverseBase, numDiagonals);\r\n\t\t\tfor (let diagonal = diagonalReverseStart; diagonal <= diagonalReverseEnd; diagonal += 2) {\r\n\t\t\t\t// STEP 1: We extend the furthest reaching point in the present diagonal\r\n\t\t\t\t// by looking at the diagonals above and below and picking the one whose point\r\n\t\t\t\t// is further away from the start point (originalEnd, modifiedEnd)\r\n\t\t\t\tif (diagonal === diagonalReverseStart || (diagonal < diagonalReverseEnd && reversePoints[diagonal - 1] >= reversePoints[diagonal + 1])) {\r\n\t\t\t\t\toriginalIndex = reversePoints[diagonal + 1] - 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\toriginalIndex = reversePoints[diagonal - 1];\r\n\t\t\t\t}\r\n\t\t\t\tmodifiedIndex = originalIndex - (diagonal - diagonalReverseBase) - diagonalReverseOffset;\r\n\r\n\t\t\t\t// Save the current originalIndex so we can test for false overlap\r\n\t\t\t\tconst tempOriginalIndex = originalIndex;\r\n\r\n\t\t\t\t// STEP 2: We can continue to extend the furthest reaching point in the present diagonal\r\n\t\t\t\t// as long as the elements are equal.\r\n\t\t\t\twhile (originalIndex > originalStart && modifiedIndex > modifiedStart && this.ElementsAreEqual(originalIndex, modifiedIndex)) {\r\n\t\t\t\t\toriginalIndex--;\r\n\t\t\t\t\tmodifiedIndex--;\r\n\t\t\t\t}\r\n\t\t\t\treversePoints[diagonal] = originalIndex;\r\n\r\n\t\t\t\t// STEP 4: If delta is even (overlap first happens on reverse when delta is even)\r\n\t\t\t\t// and diagonal is in the range of forward diagonals computed for numDifferences\r\n\t\t\t\t// then check for overlap.\r\n\t\t\t\tif (deltaIsEven && Math.abs(diagonal - diagonalForwardBase) <= numDifferences) {\r\n\t\t\t\t\tif (originalIndex <= forwardPoints[diagonal]) {\r\n\t\t\t\t\t\tmidOriginalArr[0] = originalIndex;\r\n\t\t\t\t\t\tmidModifiedArr[0] = modifiedIndex;\r\n\r\n\t\t\t\t\t\tif (tempOriginalIndex >= forwardPoints[diagonal] && LocalConstants.MaxDifferencesHistory > 0 && numDifferences <= (LocalConstants.MaxDifferencesHistory + 1)) {\r\n\t\t\t\t\t\t\t// BINGO! We overlapped, and we have the full trace in memory!\r\n\t\t\t\t\t\t\treturn this.WALKTRACE(diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset,\r\n\t\t\t\t\t\t\t\tdiagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset,\r\n\t\t\t\t\t\t\t\tforwardPoints, reversePoints,\r\n\t\t\t\t\t\t\t\toriginalIndex, originalEnd, midOriginalArr,\r\n\t\t\t\t\t\t\t\tmodifiedIndex, modifiedEnd, midModifiedArr,\r\n\t\t\t\t\t\t\t\tdeltaIsEven, quitEarlyArr\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// Either false overlap, or we didn't have enough memory for the full trace\r\n\t\t\t\t\t\t\t// Just return the recursion point\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Save current vectors to history before the next iteration\r\n\t\t\tif (numDifferences <= LocalConstants.MaxDifferencesHistory) {\r\n\t\t\t\t// We are allocating space for one extra int, which we fill with\r\n\t\t\t\t// the index of the diagonal base index\r\n\t\t\t\tlet temp = new Int32Array(diagonalForwardEnd - diagonalForwardStart + 2);\r\n\t\t\t\ttemp[0] = diagonalForwardBase - diagonalForwardStart + 1;\r\n\t\t\t\tMyArray.Copy2(forwardPoints, diagonalForwardStart, temp, 1, diagonalForwardEnd - diagonalForwardStart + 1);\r\n\t\t\t\tthis.m_forwardHistory.push(temp);\r\n\r\n\t\t\t\ttemp = new Int32Array(diagonalReverseEnd - diagonalReverseStart + 2);\r\n\t\t\t\ttemp[0] = diagonalReverseBase - diagonalReverseStart + 1;\r\n\t\t\t\tMyArray.Copy2(reversePoints, diagonalReverseStart, temp, 1, diagonalReverseEnd - diagonalReverseStart + 1);\r\n\t\t\t\tthis.m_reverseHistory.push(temp);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// If we got here, then we have the full trace in history. We just have to convert it to a change list\r\n\t\t// NOTE: This part is a bit messy\r\n\t\treturn this.WALKTRACE(diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset,\r\n\t\t\tdiagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset,\r\n\t\t\tforwardPoints, reversePoints,\r\n\t\t\toriginalIndex, originalEnd, midOriginalArr,\r\n\t\t\tmodifiedIndex, modifiedEnd, midModifiedArr,\r\n\t\t\tdeltaIsEven, quitEarlyArr\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Shifts the given changes to provide a more intuitive diff.\r\n\t * While the first element in a diff matches the first element after the diff,\r\n\t * we shift the diff down.\r\n\t *\r\n\t * @param changes The list of changes to shift\r\n\t * @returns The shifted changes\r\n\t */\r\n\tprivate PrettifyChanges(changes: DiffChange[]): DiffChange[] {\r\n\r\n\t\t// Shift all the changes down first\r\n\t\tfor (let i = 0; i < changes.length; i++) {\r\n\t\t\tconst change = changes[i];\r\n\t\t\tconst originalStop = (i < changes.length - 1) ? changes[i + 1].originalStart : this._originalElementsOrHash.length;\r\n\t\t\tconst modifiedStop = (i < changes.length - 1) ? changes[i + 1].modifiedStart : this._modifiedElementsOrHash.length;\r\n\t\t\tconst checkOriginal = change.originalLength > 0;\r\n\t\t\tconst checkModified = change.modifiedLength > 0;\r\n\r\n\t\t\twhile (change.originalStart + change.originalLength < originalStop &&\r\n\t\t\t\tchange.modifiedStart + change.modifiedLength < modifiedStop &&\r\n\t\t\t\t(!checkOriginal || this.OriginalElementsAreEqual(change.originalStart, change.originalStart + change.originalLength)) &&\r\n\t\t\t\t(!checkModified || this.ModifiedElementsAreEqual(change.modifiedStart, change.modifiedStart + change.modifiedLength))) {\r\n\t\t\t\tchange.originalStart++;\r\n\t\t\t\tchange.modifiedStart++;\r\n\t\t\t}\r\n\r\n\t\t\tlet mergedChangeArr: Array<DiffChange | null> = [null];\r\n\t\t\tif (i < changes.length - 1 && this.ChangesOverlap(changes[i], changes[i + 1], mergedChangeArr)) {\r\n\t\t\t\tchanges[i] = mergedChangeArr[0]!;\r\n\t\t\t\tchanges.splice(i + 1, 1);\r\n\t\t\t\ti--;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Shift changes back up until we hit empty or whitespace-only lines\r\n\t\tfor (let i = changes.length - 1; i >= 0; i--) {\r\n\t\t\tconst change = changes[i];\r\n\r\n\t\t\tlet originalStop = 0;\r\n\t\t\tlet modifiedStop = 0;\r\n\t\t\tif (i > 0) {\r\n\t\t\t\tconst prevChange = changes[i - 1];\r\n\t\t\t\tif (prevChange.originalLength > 0) {\r\n\t\t\t\t\toriginalStop = prevChange.originalStart + prevChange.originalLength;\r\n\t\t\t\t}\r\n\t\t\t\tif (prevChange.modifiedLength > 0) {\r\n\t\t\t\t\tmodifiedStop = prevChange.modifiedStart + prevChange.modifiedLength;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst checkOriginal = change.originalLength > 0;\r\n\t\t\tconst checkModified = change.modifiedLength > 0;\r\n\r\n\t\t\tlet bestDelta = 0;\r\n\t\t\tlet bestScore = this._boundaryScore(change.originalStart, change.originalLength, change.modifiedStart, change.modifiedLength);\r\n\r\n\t\t\tfor (let delta = 1; ; delta++) {\r\n\t\t\t\tconst originalStart = change.originalStart - delta;\r\n\t\t\t\tconst modifiedStart = change.modifiedStart - delta;\r\n\r\n\t\t\t\tif (originalStart < originalStop || modifiedStart < modifiedStop) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (checkOriginal && !this.OriginalElementsAreEqual(originalStart, originalStart + change.originalLength)) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (checkModified && !this.ModifiedElementsAreEqual(modifiedStart, modifiedStart + change.modifiedLength)) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst score = this._boundaryScore(originalStart, change.originalLength, modifiedStart, change.modifiedLength);\r\n\r\n\t\t\t\tif (score > bestScore) {\r\n\t\t\t\t\tbestScore = score;\r\n\t\t\t\t\tbestDelta = delta;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tchange.originalStart -= bestDelta;\r\n\t\t\tchange.modifiedStart -= bestDelta;\r\n\t\t}\r\n\r\n\t\treturn changes;\r\n\t}\r\n\r\n\tprivate _OriginalIsBoundary(index: number): boolean {\r\n\t\tif (index <= 0 || index >= this._originalElementsOrHash.length - 1) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn (this._hasStrings && /^\\s*$/.test(this._originalStringElements[index]));\r\n\t}\r\n\r\n\tprivate _OriginalRegionIsBoundary(originalStart: number, originalLength: number): boolean {\r\n\t\tif (this._OriginalIsBoundary(originalStart) || this._OriginalIsBoundary(originalStart - 1)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (originalLength > 0) {\r\n\t\t\tconst originalEnd = originalStart + originalLength;\r\n\t\t\tif (this._OriginalIsBoundary(originalEnd - 1) || this._OriginalIsBoundary(originalEnd)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tprivate _ModifiedIsBoundary(index: number): boolean {\r\n\t\tif (index <= 0 || index >= this._modifiedElementsOrHash.length - 1) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn (this._hasStrings && /^\\s*$/.test(this._modifiedStringElements[index]));\r\n\t}\r\n\r\n\tprivate _ModifiedRegionIsBoundary(modifiedStart: number, modifiedLength: number): boolean {\r\n\t\tif (this._ModifiedIsBoundary(modifiedStart) || this._ModifiedIsBoundary(modifiedStart - 1)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (modifiedLength > 0) {\r\n\t\t\tconst modifiedEnd = modifiedStart + modifiedLength;\r\n\t\t\tif (this._ModifiedIsBoundary(modifiedEnd - 1) || this._ModifiedIsBoundary(modifiedEnd)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tprivate _boundaryScore(originalStart: number, originalLength: number, modifiedStart: number, modifiedLength: number): number {\r\n\t\tconst originalScore = (this._OriginalRegionIsBoundary(originalStart, originalLength) ? 1 : 0);\r\n\t\tconst modifiedScore = (this._ModifiedRegionIsBoundary(modifiedStart, modifiedLength) ? 1 : 0);\r\n\t\treturn (originalScore + modifiedScore);\r\n\t}\r\n\r\n\t/**\r\n\t * Concatenates the two input DiffChange lists and returns the resulting\r\n\t * list.\r\n\t * @param The left changes\r\n\t * @param The right changes\r\n\t * @returns The concatenated list\r\n\t */\r\n\tprivate ConcatenateChanges(left: DiffChange[], right: DiffChange[]): DiffChange[] {\r\n\t\tlet mergedChangeArr: DiffChange[] = [];\r\n\r\n\t\tif (left.length === 0 || right.length === 0) {\r\n\t\t\treturn (right.length > 0) ? right : left;\r\n\t\t} else if (this.ChangesOverlap(left[left.length - 1], right[0], mergedChangeArr)) {\r\n\t\t\t// Since we break the problem down recursively, it is possible that we\r\n\t\t\t// might recurse in the middle of a change thereby splitting it into\r\n\t\t\t// two changes. Here in the combining stage, we detect and fuse those\r\n\t\t\t// changes back together\r\n\t\t\tconst result = new Array<DiffChange>(left.length + right.length - 1);\r\n\t\t\tMyArray.Copy(left, 0, result, 0, left.length - 1);\r\n\t\t\tresult[left.length - 1] = mergedChangeArr[0];\r\n\t\t\tMyArray.Copy(right, 1, result, left.length, right.length - 1);\r\n\r\n\t\t\treturn result;\r\n\t\t} else {\r\n\t\t\tconst result = new Array<DiffChange>(left.length + right.length);\r\n\t\t\tMyArray.Copy(left, 0, result, 0, left.length);\r\n\t\t\tMyArray.Copy(right, 0, result, left.length, right.length);\r\n\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns true if the two changes overlap and can be merged into a single\r\n\t * change\r\n\t * @param left The left change\r\n\t * @param right The right change\r\n\t * @param mergedChange The merged change if the two overlap, null otherwise\r\n\t * @returns True if the two changes overlap\r\n\t */\r\n\tprivate ChangesOverlap(left: DiffChange, right: DiffChange, mergedChangeArr: Array<DiffChange | null>): boolean {\r\n\t\tDebug.Assert(left.originalStart <= right.originalStart, 'Left change is not less than or equal to right change');\r\n\t\tDebug.Assert(left.modifiedStart <= right.modifiedStart, 'Left change is not less than or equal to right change');\r\n\r\n\t\tif (left.originalStart + left.originalLength >= right.originalStart || left.modifiedStart + left.modifiedLength >= right.modifiedStart) {\r\n\t\t\tconst originalStart = left.originalStart;\r\n\t\t\tlet originalLength = left.originalLength;\r\n\t\t\tconst modifiedStart = left.modifiedStart;\r\n\t\t\tlet modifiedLength = left.modifiedLength;\r\n\r\n\t\t\tif (left.originalStart + left.originalLength >= right.originalStart) {\r\n\t\t\t\toriginalLength = right.originalStart + right.originalLength - left.originalStart;\r\n\t\t\t}\r\n\t\t\tif (left.modifiedStart + left.modifiedLength >= right.modifiedStart) {\r\n\t\t\t\tmodifiedLength = right.modifiedStart + right.modifiedLength - left.modifiedStart;\r\n\t\t\t}\r\n\r\n\t\t\tmergedChangeArr[0] = new DiffChange(originalStart, originalLength, modifiedStart, modifiedLength);\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\tmergedChangeArr[0] = null;\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Helper method used to clip a diagonal index to the range of valid\r\n\t * diagonals. This also decides whether or not the diagonal index,\r\n\t * if it exceeds the boundary, should be clipped to the boundary or clipped\r\n\t * one inside the boundary depending on the Even/Odd status of the boundary\r\n\t * and numDifferences.\r\n\t * @param diagonal The index of the diagonal to clip.\r\n\t * @param numDifferences The current number of differences being iterated upon.\r\n\t * @param diagonalBaseIndex The base reference diagonal.\r\n\t * @param numDiagonals The total number of diagonals.\r\n\t * @returns The clipped diagonal index.\r\n\t */\r\n\tprivate ClipDiagonalBound(diagonal: number, numDifferences: number, diagonalBaseIndex: number, numDiagonals: number): number {\r\n\t\tif (diagonal >= 0 && diagonal < numDiagonals) {\r\n\t\t\t// Nothing to clip, its in range\r\n\t\t\treturn diagonal;\r\n\t\t}\r\n\r\n\t\t// diagonalsBelow: The number of diagonals below the reference diagonal\r\n\t\t// diagonalsAbove: The number of diagonals above the reference diagonal\r\n\t\tconst diagonalsBelow = diagonalBaseIndex;\r\n\t\tconst diagonalsAbove = numDiagonals - diagonalBaseIndex - 1;\r\n\t\tconst diffEven = (numDifferences % 2 === 0);\r\n\r\n\t\tif (diagonal < 0) {\r\n\t\t\tconst lowerBoundEven = (diagonalsBelow % 2 === 0);\r\n\t\t\treturn (diffEven === lowerBoundEven) ? 0 : 1;\r\n\t\t} else {\r\n\t\t\tconst upperBoundEven = (diagonalsAbove % 2 === 0);\r\n\t\t\treturn (diffEven === upperBoundEven) ? numDiagonals - 1 : numDiagonals - 2;\r\n\t\t}\r\n\t}\r\n}","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n\r\nimport * as fs from 'fs';\r\nimport * as path from 'path';\r\nimport * as crypto from 'crypto';\r\nimport { execSync } from 'child_process';\r\n\r\nimport { TextDocument } from 'vscode-languageserver-textdocument';\r\nimport {\r\n\tDiagnostic, DiagnosticSeverity, DiagnosticTag, ProposedFeatures, Range, TextEdit, Files, DocumentFilter, DocumentFormattingRegistrationOptions,\r\n\tDisposable, DocumentFormattingRequest, TextDocuments, uinteger\r\n} from 'vscode-languageserver/node';\r\nimport { URI } from 'vscode-uri';\r\n\r\nimport { ProbeFailedParams, ProbeFailedRequest, NoESLintLibraryRequest, Status, NoConfigRequest } from './shared/customMessages';\r\nimport { ConfigurationSettings, DirectoryItem, ESLintSeverity, ModeEnum, ModeItem, PackageManagers, RuleCustomization, RuleSeverity, Validate } from './shared/settings';\r\n\r\nimport * as Is from './is';\r\nimport { LRUCache } from './linkedMap';\r\nimport { isUNC, normalizeDriveLetter, normalizePath } from './paths';\r\nimport LanguageDefaults from './languageDefaults';\r\n\r\n\r\n/**\r\n * ESLint specific settings for a text document.\r\n */\r\nexport type TextDocumentSettings = Omit<ConfigurationSettings, 'workingDirectory'>  & {\r\n\tsilent: boolean;\r\n\tworkingDirectory: DirectoryItem | undefined;\r\n\tlibrary: ESLintModule | undefined;\r\n\tresolvedGlobalPackageManagerPath: string | undefined;\r\n};\r\n\r\nexport namespace TextDocumentSettings {\r\n\texport function hasLibrary(settings: TextDocumentSettings): settings is (TextDocumentSettings & { library: ESLintModule }) {\r\n\t\treturn settings.library !== undefined;\r\n\t}\r\n}\r\n\r\n/**\r\n * A special error thrown by the ESLint library\r\n */\r\nexport interface ESLintError extends Error {\r\n\tmessageTemplate?: string;\r\n\tmessageData?: {\r\n\t\tpluginName?: string;\r\n\t};\r\n}\r\n\r\nexport namespace ESLintError {\r\n\texport function isNoConfigFound(error: any): boolean {\r\n\t\tconst candidate = error as ESLintError;\r\n\t\treturn candidate.messageTemplate === 'no-config-found' || candidate.message === 'No ESLint configuration found.';\r\n\t}\r\n}\r\n\r\ntype ESLintAutoFixEdit = {\r\n\trange: [number, number];\r\n\ttext: string;\r\n};\r\n\r\ntype ESLintSuggestionResult = {\r\n\tdesc: string;\r\n\tfix: ESLintAutoFixEdit;\r\n};\r\n\r\ntype ESLintProblem = {\r\n\tline: number;\r\n\tcolumn: number;\r\n\tendLine?: number;\r\n\tendColumn?: number;\r\n\tseverity: number;\r\n\truleId: string;\r\n\tmessage: string;\r\n\tfix?: ESLintAutoFixEdit;\r\n\tsuggestions?: ESLintSuggestionResult[]\r\n};\r\n\r\ntype ESLintDocumentReport = {\r\n\tfilePath: string;\r\n\terrorCount: number;\r\n\twarningCount: number;\r\n\tmessages: ESLintProblem[];\r\n\toutput?: string;\r\n};\r\n\r\ntype ESLintReport = {\r\n\terrorCount: number;\r\n\twarningCount: number;\r\n\tresults: ESLintDocumentReport[];\r\n};\r\n\r\nexport type CLIOptions = {\r\n\tcwd?: string;\r\n\tfixTypes?: string[];\r\n\tfix?: boolean;\r\n};\r\n\r\nexport type SeverityConf = 0 | 1 | 2 | 'off' | 'warn' | 'error';\r\n\r\nexport type RuleConf = SeverityConf | [SeverityConf, ...any[]];\r\n\r\nexport type ConfigData = {\r\n\trules?: Record<string, RuleConf>;\r\n};\r\n\r\nexport type ESLintClassOptions = {\r\n\tcwd?: string;\r\n\tfixTypes?: string[];\r\n\tfix?: boolean;\r\n\toverrideConfig?: ConfigData;\r\n\toverrideConfigFile?: string | null;\r\n};\r\n\r\nexport type RuleMetaData = {\r\n\tdocs?: {\r\n\t\turl?: string;\r\n\t};\r\n\ttype?: string;\r\n};\r\n\r\nexport namespace RuleMetaData {\r\n\t// For unused eslint-disable comments, ESLint does not include a rule ID\r\n\t// nor any other metadata (although they do provide a fix). In order to\r\n\t// provide code actions for these, we create a fake rule ID and metadata.\r\n\texport const unusedDisableDirectiveId = 'unused-disable-directive';\r\n\tconst unusedDisableDirectiveMeta: RuleMetaData = {\r\n\t\tdocs: {\r\n\t\t\turl: 'https://eslint.org/docs/latest/use/configure/rules#report-unused-eslint-disable-comments'\r\n\t\t},\r\n\t\ttype: 'directive'\r\n\t};\r\n\r\n\tconst handled: Set<string> = new Set();\r\n\tconst ruleId2Meta: Map<string, RuleMetaData> = new Map([[unusedDisableDirectiveId, unusedDisableDirectiveMeta]]);\r\n\r\n\texport function capture(eslint: ESLintClass, reports: ESLintDocumentReport[]): void {\r\n\t\tlet rulesMetaData: Record<string, RuleMetaData> | undefined;\r\n\t\tif (eslint.isCLIEngine) {\r\n\t\t\tconst toHandle = reports.filter(report => !handled.has(report.filePath));\r\n\t\t\tif (toHandle.length === 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\trulesMetaData = typeof eslint.getRulesMetaForResults === 'function' ? eslint.getRulesMetaForResults(toHandle) : undefined;\r\n\t\t\ttoHandle.forEach(report => handled.add(report.filePath));\r\n\t\t} else {\r\n\t\t\trulesMetaData = typeof eslint.getRulesMetaForResults === 'function' ? eslint.getRulesMetaForResults(reports) : undefined;\r\n\t\t}\r\n\t\tif (rulesMetaData === undefined) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tObject.entries(rulesMetaData).forEach(([key, meta]) => {\r\n\t\t\tif (ruleId2Meta.has(key)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (meta && meta.docs && Is.string(meta.docs.url)) {\r\n\t\t\t\truleId2Meta.set(key, meta);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\texport function clear(): void {\r\n\t\thandled.clear();\r\n\t\truleId2Meta.clear();\r\n\t\truleId2Meta.set(unusedDisableDirectiveId, unusedDisableDirectiveMeta);\r\n\t}\r\n\r\n\texport function getUrl(ruleId: string): string | undefined {\r\n\t\treturn ruleId2Meta.get(ruleId)?.docs?.url;\r\n\t}\r\n\r\n\texport function getType(ruleId: string): string | undefined {\r\n\t\treturn ruleId2Meta.get(ruleId)?.type;\r\n\t}\r\n\r\n\texport function hasRuleId(ruleId: string): boolean {\r\n\t\treturn ruleId2Meta.has(ruleId);\r\n\t}\r\n\r\n\texport function isUnusedDisableDirectiveProblem(problem: ESLintProblem): boolean {\r\n\t\treturn problem.ruleId === null && problem.message.startsWith('Unused eslint-disable directive');\r\n\t}\r\n}\r\n\r\nexport type ParserOptions = {\r\n\tparser?: string;\r\n};\r\n\r\nexport type ESLintConfig = {\r\n \tenv: Record<string, boolean>;\r\n\textends:  string | string[];\r\n \t// globals: Record<string, GlobalConf>;\r\n \tignorePatterns: string | string[];\r\n \tnoInlineConfig: boolean;\r\n \t// overrides: OverrideConfigData[];\r\n \tparser: string | null;\r\n \tparserOptions?: ParserOptions;\r\n \tplugins: string[];\r\n \tprocessor: string;\r\n \treportUnusedDisableDirectives: boolean | undefined;\r\n \troot: boolean;\r\n \trules: Record<string, RuleConf>;\r\n \tsettings: object;\r\n};\r\n\r\nexport type Problem = {\r\n\tlabel: string;\r\n\tdocumentVersion: number;\r\n\truleId: string;\r\n\tline: number;\r\n\tdiagnostic: Diagnostic;\r\n\tedit?: ESLintAutoFixEdit;\r\n\tsuggestions?: ESLintSuggestionResult[];\r\n};\r\n\r\nexport namespace Problem {\r\n\texport function isFixable(problem: Problem): problem is FixableProblem {\r\n\t\treturn problem.edit !== undefined;\r\n\t}\r\n\r\n\texport function hasSuggestions(problem: Problem): problem is SuggestionsProblem {\r\n\t\treturn problem.suggestions !== undefined;\r\n\t}\r\n}\r\n\r\nexport type FixableProblem = Problem & {\r\n\tedit: ESLintAutoFixEdit;\r\n};\r\n\r\nexport namespace FixableProblem {\r\n\texport function createTextEdit(document: TextDocument, editInfo: FixableProblem): TextEdit {\r\n\t\treturn TextEdit.replace(Range.create(document.positionAt(editInfo.edit.range[0]), document.positionAt(editInfo.edit.range[1])), editInfo.edit.text || '');\r\n\t}\r\n}\r\n\r\nexport type SuggestionsProblem = Problem & {\r\n\tsuggestions: ESLintSuggestionResult[];\r\n};\r\n\r\nexport namespace SuggestionsProblem {\r\n\texport function createTextEdit(document: TextDocument, suggestion: ESLintSuggestionResult): TextEdit {\r\n\t\treturn TextEdit.replace(Range.create(document.positionAt(suggestion.fix.range[0]), document.positionAt(suggestion.fix.range[1])), suggestion.fix.text || '');\r\n\t}\r\n}\r\n\r\ninterface ESLintClass {\r\n\t// https://eslint.org/docs/developer-guide/nodejs-api#-eslintlinttextcode-options\r\n\tlintText(content: string, options: {filePath?: string, warnIgnored?: boolean}): Promise<ESLintDocumentReport[]>;\r\n\t// https://eslint.org/docs/developer-guide/nodejs-api#-eslintispathignoredfilepath\r\n\tisPathIgnored(path: string): Promise<boolean>;\r\n\t// https://eslint.org/docs/developer-guide/nodejs-api#-eslintgetrulesmetaforresultsresults\r\n\tgetRulesMetaForResults?(results: ESLintDocumentReport[]): Record<string, RuleMetaData> | undefined /* for ESLintClassEmulator */;\r\n\t// https://eslint.org/docs/developer-guide/nodejs-api#-eslintcalculateconfigforfilefilepath\r\n\tcalculateConfigForFile(path: string): Promise<ESLintConfig | undefined /* for ESLintClassEmulator */>;\r\n\t// Whether it is the old CLI Engine\r\n\tisCLIEngine?: boolean;\r\n}\r\n\r\ninterface ESLintClassConstructor {\r\n\tnew(options: ESLintClassOptions): ESLintClass;\r\n}\r\n\r\ninterface CLIEngineConstructor {\r\n\tnew(options: CLIOptions): CLIEngine;\r\n}\r\n\r\n/**\r\n * A loaded ESLint npm module.\r\n */\r\nexport type ESLintModule =\r\n{\r\n\t// version < 7.0\r\n\tESLint: undefined;\r\n\tCLIEngine: CLIEngineConstructor;\r\n} | {\r\n\t// 7.0 <= version < 8.0\r\n\tESLint: ESLintClassConstructor;\r\n\tCLIEngine: CLIEngineConstructor;\r\n} | {\r\n\t// 8.0 <= version.\r\n\tESLint: ESLintClassConstructor;\r\n\tisFlatConfig?: boolean;\r\n\tCLIEngine: undefined;\r\n};\r\n\r\nexport namespace ESLintModule {\r\n\texport function hasESLintClass(value: ESLintModule): value is { ESLint: ESLintClassConstructor; CLIEngine: undefined; } {\r\n\t\treturn value.ESLint !== undefined;\r\n\t}\r\n\texport function hasCLIEngine(value: ESLintModule): value is { ESLint: undefined; CLIEngine: CLIEngineConstructor; } {\r\n\t\treturn value.CLIEngine !== undefined;\r\n\t}\r\n\texport function isFlatConfig(value: ESLintModule): value is { ESLint: ESLintClassConstructor; CLIEngine: undefined; isFlatConfig: true } {\r\n\t\tconst candidate: { ESLint: ESLintClassConstructor; isFlatConfig?: boolean } = value as any;\r\n\t\treturn candidate.ESLint !== undefined && candidate.isFlatConfig === true;\r\n\t}\r\n}\r\n\r\n// { meta: { docs: [Object], schema: [Array] }, create: [Function: create] }\r\ntype RuleData = {\r\n\tmeta?: RuleMetaData;\r\n};\r\n\r\nnamespace RuleData {\r\n\texport function hasMetaType(value: RuleMetaData | undefined): value is RuleMetaData & { type: string; } {\r\n\t\treturn value !== undefined && value.type !== undefined;\r\n\t}\r\n}\r\n\r\ninterface CLIEngine {\r\n\texecuteOnText(content: string, file?: string, warn?: boolean): ESLintReport;\r\n\tisPathIgnored(path: string): boolean;\r\n\t// This is only available from v4.15.0 forward\r\n\tgetRules?(): Map<string, RuleData>;\r\n\tgetConfigForFile?(path: string): ESLintConfig;\r\n}\r\n\r\nnamespace CLIEngine {\r\n\texport function hasRule(value: CLIEngine): value is CLIEngine & { getRules(): Map<string, RuleData> } {\r\n\t\treturn value.getRules !== undefined;\r\n\t}\r\n}\r\n\r\n/**\r\n * ESLint class emulator using CLI Engine.\r\n */\r\nclass ESLintClassEmulator implements ESLintClass {\r\n\r\n\tprivate cli: CLIEngine;\r\n\r\n\tconstructor(cli: CLIEngine) {\r\n\t\tthis.cli = cli;\r\n\t}\r\n\tget isCLIEngine(): boolean {\r\n\t\treturn true;\r\n\t}\r\n\tasync lintText(content: string, options: { filePath?: string | undefined; warnIgnored?: boolean | undefined; }): Promise<ESLintDocumentReport[]> {\r\n\t\treturn this.cli.executeOnText(content, options.filePath, options.warnIgnored).results;\r\n\t}\r\n\tasync isPathIgnored(path: string): Promise<boolean> {\r\n\t\treturn this.cli.isPathIgnored(path);\r\n\t}\r\n\tgetRulesMetaForResults(_results: ESLintDocumentReport[]): Record<string, RuleMetaData> | undefined {\r\n\t\tif (!CLIEngine.hasRule(this.cli)) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tconst rules: Record<string, RuleMetaData> = {};\r\n\t\tfor (const [name, rule] of this.cli.getRules()) {\r\n\t\t\tif (rule.meta !== undefined) {\r\n\t\t\t\trules[name] = rule.meta;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn rules;\r\n\t}\r\n\tasync calculateConfigForFile(path: string): Promise<ESLintConfig | undefined> {\r\n\t\treturn typeof this.cli.getConfigForFile === 'function' ? this.cli.getConfigForFile(path) : undefined;\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * Class for dealing with Fixes.\r\n */\r\nexport class Fixes {\r\n\tconstructor(private edits: Map<string, Problem>) {\r\n\t}\r\n\r\n\tpublic static overlaps(a: FixableProblem | undefined, b: FixableProblem): boolean {\r\n\t\treturn a !== undefined && a.edit.range[1] > b.edit.range[0];\r\n\t}\r\n\r\n\tpublic static sameRange(a: FixableProblem, b: FixableProblem): boolean {\r\n\t\treturn a.edit.range[0] === b.edit.range[0] && a.edit.range[1] === b.edit.range[1];\r\n\t}\r\n\r\n\tpublic isEmpty(): boolean {\r\n\t\treturn this.edits.size === 0;\r\n\t}\r\n\r\n\tpublic getDocumentVersion(): number {\r\n\t\tif (this.isEmpty()) {\r\n\t\t\tthrow new Error('No edits recorded.');\r\n\t\t}\r\n\t\treturn this.edits.values().next().value.documentVersion;\r\n\t}\r\n\r\n\tpublic getScoped(diagnostics: Diagnostic[]): Problem[] {\r\n\t\tconst result: Problem[] = [];\r\n\t\tfor (const diagnostic of diagnostics) {\r\n\t\t\tconst key = Diagnostics.computeKey(diagnostic);\r\n\t\t\tconst editInfo = this.edits.get(key);\r\n\t\t\tif (editInfo) {\r\n\t\t\t\tresult.push(editInfo);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic getAllSorted(): FixableProblem[] {\r\n\t\tconst result: FixableProblem[] = [];\r\n\t\tfor (const value of this.edits.values()) {\r\n\t\t\tif (Problem.isFixable(value)) {\r\n\t\t\t\tresult.push(value);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.sort((a, b) => {\r\n\t\t\tconst d0 = a.edit.range[0] - b.edit.range[0];\r\n\t\t\tif (d0 !== 0) {\r\n\t\t\t\treturn d0;\r\n\t\t\t}\r\n\t\t\t// Both edits have now the same start offset.\r\n\r\n\t\t\t// Length of a and length of b\r\n\t\t\tconst al = a.edit.range[1] - a.edit.range[0];\r\n\t\t\tconst bl = b.edit.range[1] - b.edit.range[0];\r\n\t\t\t// Both has the same start offset and length.\r\n\t\t\tif (al === bl) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (al === 0) {\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\tif (bl === 0) {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\treturn al - bl;\r\n\t\t});\r\n\t}\r\n\r\n\tpublic getApplicable(): FixableProblem[] {\r\n\t\tconst sorted = this.getAllSorted();\r\n\t\tif (sorted.length <= 1) {\r\n\t\t\treturn sorted;\r\n\t\t}\r\n\t\tconst result: FixableProblem[] = [];\r\n\t\tlet last: FixableProblem = sorted[0];\r\n\t\tresult.push(last);\r\n\t\tfor (let i = 1; i < sorted.length; i++) {\r\n\t\t\tlet current = sorted[i];\r\n\t\t\tif (!Fixes.overlaps(last, current) && !Fixes.sameRange(last, current)) {\r\n\t\t\t\tresult.push(current);\r\n\t\t\t\tlast = current;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n}\r\n\r\nexport type SaveRuleConfigItem = { offRules: Set<string>, onRules: Set<string>};\r\n\r\n/**\r\n * Manages the special save rule configurations done in the VS Code settings.\r\n */\r\nexport namespace SaveRuleConfigs {\r\n\r\n\texport let inferFilePath: (documentOrUri: string | TextDocument | URI | undefined) => string | undefined;\r\n\r\n\tconst saveRuleConfigCache = new LRUCache<string, SaveRuleConfigItem | null>(128);\r\n\texport async function get(uri: string, settings: TextDocumentSettings  & { library: ESLintModule }): Promise<SaveRuleConfigItem | undefined> {\r\n\t\tconst filePath = inferFilePath(uri);\r\n\t\tlet result = saveRuleConfigCache.get(uri);\r\n\t\tif (filePath === undefined || result === null) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tif (result !== undefined) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tconst rules = settings.codeActionOnSave.rules;\r\n\t\tresult = await ESLint.withClass(async (eslint) => {\r\n\t\t\tif (rules === undefined || eslint.isCLIEngine) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\tconst config = await eslint.calculateConfigForFile(filePath);\r\n\t\t\tif (config === undefined || config.rules === undefined || config.rules.length === 0) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\tconst offRules: Set<string> = new Set();\r\n\t\t\tconst onRules: Set<string> = new Set();\r\n\t\t\tif (rules.length === 0) {\r\n\t\t\t\tObject.keys(config.rules).forEach(ruleId => offRules.add(ruleId));\r\n\t\t\t} else {\r\n\t\t\t\tfor (const ruleId of Object.keys(config.rules)) {\r\n\t\t\t\t\tif (isOff(ruleId, rules)) {\r\n\t\t\t\t\t\toffRules.add(ruleId);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tonRules.add(ruleId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn offRules.size > 0 ? { offRules, onRules } : undefined;\r\n\t\t}, settings);\r\n\t\tif (result === undefined || result === null) {\r\n\t\t\tsaveRuleConfigCache.set(uri, null);\r\n\t\t\treturn undefined;\r\n\t\t} else {\r\n\t\t\tsaveRuleConfigCache.set(uri, result);\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n\texport function remove(key: string): boolean {\r\n\t\treturn saveRuleConfigCache.delete(key);\r\n\t}\r\n\r\n\texport function clear(): void {\r\n\t\tsaveRuleConfigCache.clear();\r\n\t}\r\n\r\n\tfunction isOff(ruleId: string, matchers: string[]): boolean {\r\n\t\tfor (const matcher of matchers) {\r\n\t\t\tif (matcher.startsWith('!') && new RegExp(`^${matcher.slice(1).replace(/\\*/g, '.*')}$`, 'g').test(ruleId)) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else if (new RegExp(`^${matcher.replace(/\\*/g, '.*')}$`, 'g').test(ruleId)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\n/**\r\n * Manages rule severity overrides done using VS Code settings.\r\n */\r\nexport namespace RuleSeverities {\r\n\r\n\tconst ruleSeverityCache = new LRUCache<string, RuleSeverity | null>(1024);\r\n\r\n\texport function getOverride(ruleId: string, customizations: RuleCustomization[]): RuleSeverity | undefined {\r\n\t\tlet result: RuleSeverity | undefined | null = ruleSeverityCache.get(ruleId);\r\n\t\tif (result === null) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tif (result !== undefined) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tfor (const customization of customizations) {\r\n\t\t\tif (asteriskMatches(customization.rule, ruleId)) {\r\n\t\t\t\tresult = customization.severity;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (result === undefined) {\r\n\t\t\truleSeverityCache.set(ruleId, null);\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\r\n\t\truleSeverityCache.set(ruleId, result);\r\n\t\treturn result;\r\n\t}\r\n\r\n\texport function clear(): void {\r\n\t\truleSeverityCache.clear();\r\n\t}\r\n\r\n\tfunction asteriskMatches(matcher: string, ruleId: string): boolean {\r\n\t\treturn matcher.startsWith('!')\r\n\t\t\t? !(new RegExp(`^${matcher.slice(1).replace(/\\*/g, '.*')}$`, 'g').test(ruleId))\r\n\t\t\t: new RegExp(`^${matcher.replace(/\\*/g, '.*')}$`, 'g').test(ruleId);\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * Creates LSP Diagnostics and captures code action information.\r\n */\r\nnamespace Diagnostics {\r\n\r\n\texport function computeKey(diagnostic: Diagnostic): string {\r\n\t\tconst range = diagnostic.range;\r\n\t\tlet message: string | undefined;\r\n\t\tif (diagnostic.message) {\r\n\t\t\tconst hash  = crypto.createHash('md5');\r\n\t\t\thash.update(diagnostic.message);\r\n\t\t\tmessage = hash.digest('base64');\r\n\t\t}\r\n\t\treturn `[${range.start.line},${range.start.character},${range.end.line},${range.end.character}]-${diagnostic.code}-${message ?? ''}`;\r\n\t}\r\n\r\n\texport function create(settings: TextDocumentSettings, problem: ESLintProblem, document: TextDocument): [Diagnostic, RuleSeverity | undefined] {\r\n\t\tconst message = problem.message;\r\n\t\tconst startLine = typeof problem.line !== 'number' || Number.isNaN(problem.line) ? 0 : Math.max(0, problem.line - 1);\r\n\t\tconst startChar = typeof problem.column !== 'number' || Number.isNaN(problem.column) ? 0 : Math.max(0, problem.column - 1);\r\n\t\tlet endLine = typeof problem.endLine !== 'number' || Number.isNaN(problem.endLine) ? startLine : Math.max(0, problem.endLine - 1);\r\n\t\tlet endChar = typeof problem.endColumn !== 'number' || Number.isNaN(problem.endColumn) ? startChar : Math.max(0, problem.endColumn - 1);\r\n\t\tif (settings.problems.shortenToSingleLine && endLine !== startLine) {\r\n\t\t\tconst startLineText = document.getText({\r\n\t\t\t\tstart: {\r\n\t\t\t\t\tline: startLine,\r\n\t\t\t\t\tcharacter: 0,\r\n\t\t\t\t},\r\n\t\t\t\tend: {\r\n\t\t\t\t\tline: startLine,\r\n\t\t\t\t\tcharacter: uinteger.MAX_VALUE,\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tendLine = startLine;\r\n\t\t\tendChar = startLineText.length;\r\n\t\t}\r\n\t\tconst override = RuleSeverities.getOverride(problem.ruleId, settings.rulesCustomizations);\r\n\t\tconst result: Diagnostic = {\r\n\t\t\tmessage: message,\r\n\t\t\tseverity: convertSeverityToDiagnosticWithOverride(problem.severity, override),\r\n\t\t\tsource: 'eslint',\r\n\t\t\trange: {\r\n\t\t\t\tstart: { line: startLine, character: startChar },\r\n\t\t\t\tend: { line: endLine, character: endChar }\r\n\t\t\t}\r\n\t\t};\r\n\t\tif (problem.ruleId) {\r\n\t\t\tconst url = RuleMetaData.getUrl(problem.ruleId);\r\n\t\t\tresult.code = problem.ruleId;\r\n\t\t\tif (url !== undefined) {\r\n\t\t\t\tresult.codeDescription = {\r\n\t\t\t\t\thref: url\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif (problem.ruleId === 'no-unused-vars') {\r\n\t\t\t\tresult.tags = [DiagnosticTag.Unnecessary];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn [result, override];\r\n\t}\r\n\r\n\tfunction adjustSeverityForOverride(severity: number | RuleSeverity, severityOverride?: RuleSeverity) {\r\n\t\tswitch (severityOverride) {\r\n\t\t\tcase RuleSeverity.off:\r\n\t\t\tcase RuleSeverity.info:\r\n\t\t\tcase RuleSeverity.warn:\r\n\t\t\tcase RuleSeverity.error:\r\n\t\t\t\treturn severityOverride;\r\n\r\n\t\t\tcase RuleSeverity.downgrade:\r\n\t\t\t\tswitch (convertSeverityToDiagnostic(severity)) {\r\n\t\t\t\t\tcase DiagnosticSeverity.Error:\r\n\t\t\t\t\t\treturn RuleSeverity.warn;\r\n\t\t\t\t\tcase DiagnosticSeverity.Warning:\r\n\t\t\t\t\tcase DiagnosticSeverity.Information:\r\n\t\t\t\t\t\treturn RuleSeverity.info;\r\n\t\t\t\t}\r\n\r\n\t\t\tcase RuleSeverity.upgrade:\r\n\t\t\t\tswitch (convertSeverityToDiagnostic(severity)) {\r\n\t\t\t\t\tcase DiagnosticSeverity.Information:\r\n\t\t\t\t\t\treturn RuleSeverity.warn;\r\n\t\t\t\t\tcase DiagnosticSeverity.Warning:\r\n\t\t\t\t\tcase DiagnosticSeverity.Error:\r\n\t\t\t\t\t\treturn RuleSeverity.error;\r\n\t\t\t\t}\r\n\r\n\t\t\tdefault:\r\n\t\t\t\treturn severity;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction convertSeverityToDiagnostic(severity: number | RuleSeverity) {\r\n\t// RuleSeverity concerns an overridden rule. A number is direct from ESLint.\r\n\t\tswitch (severity) {\r\n\t\t// Eslint 1 is warning\r\n\t\t\tcase 1:\r\n\t\t\tcase RuleSeverity.warn:\r\n\t\t\t\treturn DiagnosticSeverity.Warning;\r\n\t\t\tcase 2:\r\n\t\t\tcase RuleSeverity.error:\r\n\t\t\t\treturn DiagnosticSeverity.Error;\r\n\t\t\tcase RuleSeverity.info:\r\n\t\t\t\treturn DiagnosticSeverity.Information;\r\n\t\t\tdefault:\r\n\t\t\t\treturn DiagnosticSeverity.Error;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction convertSeverityToDiagnosticWithOverride(severity: number | RuleSeverity, severityOverride: RuleSeverity | undefined): DiagnosticSeverity {\r\n\t\treturn convertSeverityToDiagnostic(adjustSeverityForOverride(severity, severityOverride));\r\n\r\n\t}\r\n}\r\n\r\n/**\r\n * Capture information necessary to compute code actions.\r\n */\r\nexport namespace CodeActions {\r\n\tconst codeActions: Map<string, Map<string, Problem>> = new Map<string, Map<string, Problem>>();\r\n\r\n\texport function get(uri: string): Map<string, Problem> | undefined {\r\n\t\treturn codeActions.get(uri);\r\n\t}\r\n\r\n\texport function set(uri: string, value: Map<string, Problem>): void {\r\n\t\tcodeActions.set(uri, value);\r\n\t}\r\n\r\n\texport function remove(uri: string): boolean {\r\n\t\treturn codeActions.delete(uri);\r\n\t}\r\n\r\n\texport function record(document: TextDocument, diagnostic: Diagnostic, problem: ESLintProblem): void {\r\n\t\tif (!problem.ruleId) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst uri = document.uri;\r\n\t\tlet edits: Map<string, Problem> | undefined = CodeActions.get(uri);\r\n\t\tif (edits === undefined) {\r\n\t\t\tedits = new Map<string, Problem>();\r\n\t\t\tCodeActions.set(uri, edits);\r\n\t\t}\r\n\t\tedits.set(Diagnostics.computeKey(diagnostic), {\r\n\t\t\tlabel: `Fix this ${problem.ruleId} problem`,\r\n\t\t\tdocumentVersion: document.version,\r\n\t\t\truleId: problem.ruleId,\r\n\t\t\tline: problem.line,\r\n\t\t\tdiagnostic: diagnostic,\r\n\t\t\tedit: problem.fix,\r\n\t\t\tsuggestions: problem.suggestions\r\n\t\t});\r\n\t}\r\n}\r\n\r\n/**\r\n * Wrapper round the ESLint npm module.\r\n */\r\nexport namespace ESLint {\r\n\r\n\tlet connection: ProposedFeatures.Connection;\r\n\tlet documents: TextDocuments<TextDocument>;\r\n\tlet inferFilePath: (documentOrUri: string | TextDocument | URI | undefined) => string | undefined;\r\n\tlet loadNodeModule: <T>(moduleName: string) => T | undefined;\r\n\r\n\tconst languageId2ParserRegExp: Map<string, RegExp[]> = function createLanguageId2ParserRegExp() {\r\n\t\tconst result = new Map<string, RegExp[]>();\r\n\t\tconst typescript = /\\/@typescript-eslint\\/parser\\//;\r\n\t\tconst babelESLint = /\\/babel-eslint\\/lib\\/index.js$/;\r\n\t\tconst vueESLint = /\\/vue-eslint-parser\\/index.js$/;\r\n\t\tresult.set('typescript', [typescript, babelESLint, vueESLint]);\r\n\t\tresult.set('typescriptreact', [typescript, babelESLint, vueESLint]);\r\n\r\n\t\tconst angular = /\\/@angular-eslint\\/template-parser\\//;\r\n\t\tresult.set('html', [angular]);\r\n\r\n\t\treturn result;\r\n\t}();\r\n\r\n\tconst languageId2ParserOptions: Map<string, { regExps: RegExp[]; parsers: Set<string>; parserRegExps?: RegExp[] }> = function createLanguageId2ParserOptionsRegExp() {\r\n\t\tconst result = new Map<string, { regExps: RegExp[]; parsers: Set<string>; parserRegExps?: RegExp[] }>();\r\n\t\tconst vue = /vue-eslint-parser\\/.*\\.js$/;\r\n\t\tconst typescriptEslintParser = /@typescript-eslint\\/parser\\/.*\\.js$/;\r\n\t\tresult.set('typescript', { regExps: [vue], parsers: new Set<string>(['@typescript-eslint/parser']), parserRegExps: [typescriptEslintParser] });\r\n\t\treturn result;\r\n\t}();\r\n\r\n\tconst languageId2PluginName: Map<string, string> = new Map([\r\n\t\t['html', 'html'],\r\n\t\t['vue', 'vue'],\r\n\t\t['markdown', 'markdown']\r\n\t]);\r\n\r\n\tconst defaultLanguageIds: Set<string> = new Set([\r\n\t\t'javascript', 'javascriptreact'\r\n\t]);\r\n\r\n\tconst projectFolderIndicators: {\r\n\t\tfileName: string;\r\n\t\tisRoot: boolean;\r\n\t}[] = [\r\n\t\t{ fileName: 'package.json', isRoot: true },\r\n\t\t{ fileName: '.eslintignore', isRoot: true },\r\n\t\t{ fileName: 'eslint.config.js', isRoot: true },\r\n\t\t{ fileName: '.eslintrc', isRoot: false },\r\n\t\t{ fileName: '.eslintrc.json', isRoot: false },\r\n\t\t{ fileName: '.eslintrc.js', isRoot: false },\r\n\t\t{ fileName: '.eslintrc.yaml', isRoot: false },\r\n\t\t{ fileName: '.eslintrc.yml', isRoot: false },\r\n\t];\r\n\r\n\tconst path2Library: Map<string, ESLintModule> = new Map<string, ESLintModule>();\r\n\tconst document2Settings: Map<string, Promise<TextDocumentSettings>> = new Map<string, Promise<TextDocumentSettings>>();\r\n\tconst formatterRegistrations: Map<string, Promise<Disposable>> = new Map();\r\n\r\n\texport function initialize($connection: ProposedFeatures.Connection, $documents: TextDocuments<TextDocument>, $inferFilePath: (documentOrUri: string | TextDocument | URI | undefined) => string | undefined, $loadNodeModule: <T>(moduleName: string) => T | undefined) {\r\n\t\tconnection = $connection;\r\n\t\tdocuments = $documents;\r\n\t\tinferFilePath = $inferFilePath;\r\n\t\tloadNodeModule = $loadNodeModule;\r\n\t}\r\n\r\n\texport function removeSettings(key: string): boolean {\r\n\t\treturn document2Settings.delete(key);\r\n\t}\r\n\r\n\texport function clearSettings(): void {\r\n\t\tdocument2Settings.clear();\r\n\t}\r\n\r\n\texport function unregisterAsFormatter(document: TextDocument): void {\r\n\t\tconst unregister = formatterRegistrations.get(document.uri);\r\n\t\tif (unregister !== undefined) {\r\n\t\t\tvoid unregister.then(disposable => disposable.dispose());\r\n\t\t\tformatterRegistrations.delete(document.uri);\r\n\t\t}\r\n\t}\r\n\r\n\texport function clearFormatters(): void {\r\n\t\tfor (const unregistration of formatterRegistrations.values()) {\r\n\t\t\tvoid unregistration.then(disposable => disposable.dispose());\r\n\t\t}\r\n\t\tformatterRegistrations.clear();\r\n\t}\r\n\r\n\texport function resolveSettings(document: TextDocument): Promise<TextDocumentSettings> {\r\n\t\tconst uri = document.uri;\r\n\t\tlet resultPromise = document2Settings.get(uri);\r\n\t\tif (resultPromise) {\r\n\t\t\treturn resultPromise;\r\n\t\t}\r\n\t\tresultPromise = connection.workspace.getConfiguration({ scopeUri: uri, section: '' }).then((configuration: ConfigurationSettings) => {\r\n\t\t\tconst settings: TextDocumentSettings = Object.assign(\r\n\t\t\t\t{},\r\n\t\t\t\tconfiguration,\r\n\t\t\t\t{ silent: false, library: undefined, resolvedGlobalPackageManagerPath: undefined },\r\n\t\t\t\t{ workingDirectory: undefined}\r\n\t\t\t);\r\n\t\t\tif (settings.validate === Validate.off) {\r\n\t\t\t\treturn settings;\r\n\t\t\t}\r\n\t\t\tsettings.resolvedGlobalPackageManagerPath = GlobalPaths.get(settings.packageManager);\r\n\t\t\tconst filePath = inferFilePath(document);\r\n\t\t\tconst workspaceFolderPath = settings.workspaceFolder !== undefined ? inferFilePath(settings.workspaceFolder.uri) : undefined;\r\n\t\t\tconst hasUserDefinedWorkingDirectories: boolean = configuration.workingDirectory !== undefined;\r\n\t\t\tconst workingDirectoryConfig = configuration.workingDirectory ?? { mode: ModeEnum.location };\r\n\t\t\tif (ModeItem.is(workingDirectoryConfig)) {\r\n\t\t\t\tlet candidate: string | undefined;\r\n\t\t\t\tif (workingDirectoryConfig.mode === ModeEnum.location) {\r\n\t\t\t\t\tif (workspaceFolderPath !== undefined) {\r\n\t\t\t\t\t\tcandidate = workspaceFolderPath;\r\n\t\t\t\t\t} else if (filePath !== undefined && !isUNC(filePath)) {\r\n\t\t\t\t\t\tcandidate = path.dirname(filePath);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (workingDirectoryConfig.mode === ModeEnum.auto) {\r\n\t\t\t\t\tif (workspaceFolderPath !== undefined) {\r\n\t\t\t\t\t\tcandidate = findWorkingDirectory(workspaceFolderPath, filePath);\r\n\t\t\t\t\t} else if (filePath !== undefined && !isUNC(filePath)) {\r\n\t\t\t\t\t\tcandidate = path.dirname(filePath);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (candidate !== undefined && fs.existsSync(candidate)) {\r\n\t\t\t\t\tsettings.workingDirectory = { directory: candidate };\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsettings.workingDirectory = workingDirectoryConfig;\r\n\t\t\t}\r\n\t\t\tlet promise: Promise<string>;\r\n\t\t\tlet nodePath: string | undefined;\r\n\t\t\tif (settings.nodePath !== null) {\r\n\t\t\t\tnodePath = settings.nodePath;\r\n\t\t\t\tif (!path.isAbsolute(nodePath) && workspaceFolderPath !== undefined) {\r\n\t\t\t\t\tnodePath = path.join(workspaceFolderPath, nodePath);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet moduleResolveWorkingDirectory: string | undefined;\r\n\t\t\tif (!hasUserDefinedWorkingDirectories && filePath !== undefined) {\r\n\t\t\t\tmoduleResolveWorkingDirectory = path.dirname(filePath);\r\n\t\t\t}\r\n\t\t\tif (moduleResolveWorkingDirectory === undefined && settings.workingDirectory !== undefined && !settings.workingDirectory['!cwd']) {\r\n\t\t\t\tmoduleResolveWorkingDirectory = settings.workingDirectory.directory;\r\n\t\t\t}\r\n\r\n\t\t\t// During Flat Config is considered experimental,\r\n\t\t\t// we need to import FlatESLint from 'eslint/use-at-your-own-risk'.\r\n\t\t\t// See: https://eslint.org/blog/2022/08/new-config-system-part-3/\r\n\t\t\tconst eslintPath = settings.experimental.useFlatConfig ? 'eslint/use-at-your-own-risk' : 'eslint';\r\n\t\t\tif (nodePath !== undefined) {\r\n\t\t\t\tpromise = Files.resolve(eslintPath, nodePath, nodePath, trace).then<string, string>(undefined, () => {\r\n\t\t\t\t\treturn Files.resolve(eslintPath, settings.resolvedGlobalPackageManagerPath, moduleResolveWorkingDirectory, trace);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tpromise = Files.resolve(eslintPath, settings.resolvedGlobalPackageManagerPath, moduleResolveWorkingDirectory, trace);\r\n\t\t\t}\r\n\r\n\t\t\tsettings.silent = settings.validate === Validate.probe;\r\n\t\t\treturn promise.then(async (libraryPath) => {\r\n\t\t\t\tlet library = path2Library.get(libraryPath);\r\n\t\t\t\tif (library === undefined) {\r\n\t\t\t\t\tif (settings.experimental.useFlatConfig) {\r\n\t\t\t\t\t\tconst lib = loadNodeModule<{ FlatESLint?: ESLintClassConstructor }>(libraryPath);\r\n\t\t\t\t\t\tif (lib === undefined) {\r\n\t\t\t\t\t\t\tsettings.validate = Validate.off;\r\n\t\t\t\t\t\t\tif (!settings.silent) {\r\n\t\t\t\t\t\t\t\tconnection.console.error(`Failed to load eslint library from ${libraryPath}. If you are using ESLint v8.21 or earlier, try upgrading it. For newer versions, try disabling the 'eslint.experimental.useFlatConfig' setting. See the output panel for more information.`);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (lib.FlatESLint === undefined) {\r\n\t\t\t\t\t\t\tsettings.validate = Validate.off;\r\n\t\t\t\t\t\t\tconnection.console.error(`The eslint library loaded from ${libraryPath} doesn\\'t export a FlatESLint class.`);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconnection.console.info(`ESLint library loaded from: ${libraryPath}`);\r\n\t\t\t\t\t\t\t// pretend to be a regular eslint endpoint\r\n\t\t\t\t\t\t\tlibrary = {\r\n\t\t\t\t\t\t\t\tESLint: lib.FlatESLint,\r\n\t\t\t\t\t\t\t\tisFlatConfig: true,\r\n\t\t\t\t\t\t\t\tCLIEngine: undefined,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tsettings.library = library;\r\n\t\t\t\t\t\t\tpath2Library.set(libraryPath, library);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlibrary = loadNodeModule(libraryPath);\r\n\t\t\t\t\t\tif (library === undefined) {\r\n\t\t\t\t\t\t\tsettings.validate = Validate.off;\r\n\t\t\t\t\t\t\tif (!settings.silent) {\r\n\t\t\t\t\t\t\t\tconnection.console.error(`Failed to load eslint library from ${libraryPath}. See output panel for more information.`);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (library.CLIEngine === undefined && library.ESLint === undefined) {\r\n\t\t\t\t\t\t\tsettings.validate = Validate.off;\r\n\t\t\t\t\t\t\tconnection.console.error(`The eslint library loaded from ${libraryPath} doesn\\'t export neither a CLIEngine nor an ESLint class. You need at least eslint@1.0.0`);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconnection.console.info(`ESLint library loaded from: ${libraryPath}`);\r\n\t\t\t\t\t\t\tsettings.library = library;\r\n\t\t\t\t\t\t\tpath2Library.set(libraryPath, library);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsettings.library = library;\r\n\t\t\t\t}\r\n\t\t\t\tif (settings.validate === Validate.probe && TextDocumentSettings.hasLibrary(settings)) {\r\n\t\t\t\t\tsettings.validate = Validate.off;\r\n\t\t\t\t\tlet filePath = ESLint.getFilePath(document, settings);\r\n\t\t\t\t\tif (filePath !== undefined) {\r\n\t\t\t\t\t\tconst parserRegExps = languageId2ParserRegExp.get(document.languageId);\r\n\t\t\t\t\t\tconst pluginName = languageId2PluginName.get(document.languageId);\r\n\t\t\t\t\t\tconst parserOptions = languageId2ParserOptions.get(document.languageId);\r\n\t\t\t\t\t\tif (defaultLanguageIds.has(document.languageId)) {\r\n\t\t\t\t\t\t\tsettings.validate = Validate.on;\r\n\t\t\t\t\t\t} else if (parserRegExps !== undefined || pluginName !== undefined || parserOptions !== undefined) {\r\n\t\t\t\t\t\t\tconst eslintConfig: ESLintConfig | undefined = await ESLint.withClass(async (eslintClass) => {\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\treturn eslintClass.calculateConfigForFile(filePath!);\r\n\t\t\t\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\t\t\t\treturn undefined;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}, settings);\r\n\t\t\t\t\t\t\tif (eslintConfig !== undefined) {\r\n\t\t\t\t\t\t\t\tif (ESLintModule.isFlatConfig(settings.library)) {\r\n\t\t\t\t\t\t\t\t\t// We have a flat configuration. This means that the config file needs to\r\n\t\t\t\t\t\t\t\t\t// have a section per file extension we want to validate. If there is none than\r\n\t\t\t\t\t\t\t\t\t// `calculateConfigForFile` will return no config since the config options without\r\n\t\t\t\t\t\t\t\t\t// a `files` property only applies to `**/*.js, **/*.cjs, and **/*.mjs` by default\r\n\t\t\t\t\t\t\t\t\t// See https://eslint.org/docs/latest/user-guide/configuring/configuration-files-new#specifying-files-and-ignores\r\n\r\n\t\t\t\t\t\t\t\t\t// This means since we have found a configuration for the given file we assume that\r\n\t\t\t\t\t\t\t\t\t// that configuration is correctly pointing to a parser.\r\n\t\t\t\t\t\t\t\t\tsettings.validate = Validate.on;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tconst parser: string | undefined =  eslintConfig.parser !== null\r\n\t\t\t\t\t\t\t\t\t\t? normalizePath(eslintConfig.parser)\r\n\t\t\t\t\t\t\t\t\t\t: undefined;\r\n\t\t\t\t\t\t\t\t\tif (parser !== undefined) {\r\n\t\t\t\t\t\t\t\t\t\tif (parserRegExps !== undefined) {\r\n\t\t\t\t\t\t\t\t\t\t\tfor (const regExp of parserRegExps) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (regExp.test(parser)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsettings.validate = Validate.on;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif (settings.validate !== Validate.on && parserOptions !== undefined && typeof eslintConfig.parserOptions?.parser === 'string') {\r\n\t\t\t\t\t\t\t\t\t\t\tconst eslintConfigParserOptionsParser = normalizePath(eslintConfig.parserOptions.parser);\r\n\t\t\t\t\t\t\t\t\t\t\tfor (const regExp of parserOptions.regExps) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (regExp.test(parser) && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tparserOptions.parsers.has(eslintConfig.parserOptions.parser) ||\r\n\t\t\t\t\t\t\t\t\t\t\tparserOptions.parserRegExps !== undefined && parserOptions.parserRegExps.some(parserRegExp => parserRegExp.test(eslintConfigParserOptionsParser))\r\n\t\t\t\t\t\t\t\t\t\t\t\t)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsettings.validate = Validate.on;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (settings.validate !== Validate.on && Array.isArray(eslintConfig.plugins) && eslintConfig.plugins.length > 0 && pluginName !== undefined) {\r\n\t\t\t\t\t\t\t\t\t\tfor (const name of eslintConfig.plugins) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (name === pluginName) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsettings.validate = Validate.on;\r\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (settings.validate === Validate.off) {\r\n\t\t\t\t\t\tconst params: ProbeFailedParams = { textDocument: { uri: document.uri } };\r\n\t\t\t\t\t\tvoid connection.sendRequest(ProbeFailedRequest.type, params);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (settings.validate === Validate.on) {\r\n\t\t\t\t\tsettings.silent = false;\r\n\t\t\t\t\tif (settings.format && TextDocumentSettings.hasLibrary(settings)) {\r\n\t\t\t\t\t\tconst Uri = URI.parse(uri);\r\n\t\t\t\t\t\tconst isFile = Uri.scheme === 'file';\r\n\t\t\t\t\t\tlet pattern: string = isFile\r\n\t\t\t\t\t\t\t? Uri.fsPath.replace(/\\\\/g, '/')\r\n\t\t\t\t\t\t\t: Uri.fsPath;\r\n\t\t\t\t\t\tpattern = pattern.replace(/[\\[\\]\\{\\}]/g, '?');\r\n\r\n\t\t\t\t\t\tconst filter: DocumentFilter = { scheme: Uri.scheme, pattern: pattern };\r\n\t\t\t\t\t\tconst options: DocumentFormattingRegistrationOptions = { documentSelector: [filter] };\r\n\t\t\t\t\t\tif (!isFile) {\r\n\t\t\t\t\t\t\tformatterRegistrations.set(uri, connection.client.register(DocumentFormattingRequest.type, options));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconst filePath = inferFilePath(uri)!;\r\n\t\t\t\t\t\t\tawait ESLint.withClass(async (eslintClass) => {\r\n\t\t\t\t\t\t\t\tif (!await eslintClass.isPathIgnored(filePath)) {\r\n\t\t\t\t\t\t\t\t\tformatterRegistrations.set(uri, connection.client.register(DocumentFormattingRequest.type, options));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}, settings);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn settings;\r\n\t\t\t}, () => {\r\n\t\t\t\tsettings.validate = Validate.off;\r\n\t\t\t\tif (!settings.silent) {\r\n\t\t\t\t\tvoid connection.sendRequest(NoESLintLibraryRequest.type, { source: { uri: document.uri } });\r\n\t\t\t\t}\r\n\t\t\t\treturn settings;\r\n\t\t\t});\r\n\t\t});\r\n\t\tdocument2Settings.set(uri, resultPromise);\r\n\t\treturn resultPromise;\r\n\t}\r\n\r\n\texport function newClass(library: ESLintModule, newOptions: ESLintClassOptions | CLIOptions, useESLintClass: boolean): ESLintClass {\r\n\t\tif (ESLintModule.hasESLintClass(library) && useESLintClass) {\r\n\t\t\treturn new library.ESLint(newOptions);\r\n\t\t}\r\n\t\tif (ESLintModule.hasCLIEngine(library)) {\r\n\t\t\treturn new ESLintClassEmulator(new library.CLIEngine(newOptions));\r\n\t\t}\r\n\t\treturn new library.ESLint(newOptions);\r\n\t}\r\n\r\n\texport async function withClass<T>(func: (eslintClass: ESLintClass) => Promise<T>, settings: TextDocumentSettings & { library: ESLintModule }, options?: ESLintClassOptions | CLIOptions): Promise<T> {\r\n\t\tconst newOptions: ESLintClassOptions | CLIOptions = options === undefined\r\n\t\t\t? Object.assign(Object.create(null), settings.options)\r\n\t\t\t: Object.assign(Object.create(null), settings.options, options);\r\n\r\n\t\tconst cwd = process.cwd();\r\n\t\ttry {\r\n\t\t\tif (settings.workingDirectory) {\r\n\t\t\t// A lot of libs are sensitive to drive letter casing and assume a\r\n\t\t\t// capital drive letter. Make sure we support that correctly.\r\n\t\t\t\tconst newCWD = normalizeWorkingDirectory(settings.workingDirectory.directory);\r\n\t\t\t\tnewOptions.cwd = newCWD;\r\n\t\t\t\tif (settings.workingDirectory['!cwd'] !== true && fs.existsSync(newCWD)) {\r\n\t\t\t\t\tprocess.chdir(newCWD);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst eslintClass = newClass(settings.library, newOptions, settings.useESLintClass);\r\n\t\t\t// We need to await the result to ensure proper execution of the\r\n\t\t\t// finally block.\r\n\t\t\treturn await func(eslintClass);\r\n\t\t} finally {\r\n\t\t\tif (cwd !== process.cwd()) {\r\n\t\t\t\tprocess.chdir(cwd);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction normalizeWorkingDirectory(value: string): string {\r\n\t\tconst result = normalizeDriveLetter(value);\r\n\t\tif (result.length === 0) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\treturn result[result.length - 1] === path.sep\r\n\t\t\t? result.substring(0, result.length - 1)\r\n\t\t\t: result;\r\n\t}\r\n\r\n\texport function getFilePath(document: TextDocument | undefined, settings: TextDocumentSettings): string | undefined {\r\n\t\tif (document === undefined) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tconst uri = URI.parse(document.uri);\r\n\t\tif (uri.scheme !== 'file') {\r\n\t\t\tif (settings.workspaceFolder !== undefined) {\r\n\t\t\t\tconst ext = LanguageDefaults.getExtension(document.languageId);\r\n\t\t\t\tconst workspacePath = inferFilePath(settings.workspaceFolder.uri);\r\n\t\t\t\tif (workspacePath !== undefined && ext !== undefined) {\r\n\t\t\t\t\treturn path.join(workspacePath, `test.${ext}`);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn undefined;\r\n\t\t} else {\r\n\t\t\treturn inferFilePath(uri);\r\n\t\t}\r\n\t}\r\n\r\n\tconst validFixTypes = new Set<string>(['problem', 'suggestion', 'layout', 'directive']);\r\n\texport async function validate(document: TextDocument, settings: TextDocumentSettings & { library: ESLintModule }): Promise<Diagnostic[]> {\r\n\t\tconst newOptions: CLIOptions = Object.assign(Object.create(null), settings.options);\r\n\t\tlet fixTypes: Set<string> | undefined = undefined;\r\n\t\tif (Array.isArray(newOptions.fixTypes) && newOptions.fixTypes.length > 0) {\r\n\t\t\tfixTypes = new Set();\r\n\t\t\tfor (const item of newOptions.fixTypes) {\r\n\t\t\t\tif (validFixTypes.has(item)) {\r\n\t\t\t\t\tfixTypes.add(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (fixTypes.size === 0) {\r\n\t\t\t\tfixTypes = undefined;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst content = document.getText();\r\n\t\tconst uri = document.uri;\r\n\t\tconst file = getFilePath(document, settings);\r\n\r\n\t\treturn withClass(async (eslintClass) => {\r\n\t\t\tCodeActions.remove(uri);\r\n\t\t\tconst reportResults: ESLintDocumentReport[] = await eslintClass.lintText(content, { filePath: file, warnIgnored: settings.onIgnoredFiles !== ESLintSeverity.off });\r\n\t\t\tRuleMetaData.capture(eslintClass, reportResults);\r\n\t\t\tconst diagnostics: Diagnostic[] = [];\r\n\t\t\tif (reportResults && Array.isArray(reportResults) && reportResults.length > 0) {\r\n\t\t\t\tconst docReport = reportResults[0];\r\n\t\t\t\tif (docReport.messages && Array.isArray(docReport.messages)) {\r\n\t\t\t\t\tdocReport.messages.forEach((problem) => {\r\n\t\t\t\t\t\tif (problem) {\r\n\t\t\t\t\t\t\tconst [diagnostic, override] = Diagnostics.create(settings, problem, document);\r\n\t\t\t\t\t\t\tif (!(override === RuleSeverity.off || (settings.quiet && diagnostic.severity === DiagnosticSeverity.Warning))) {\r\n\t\t\t\t\t\t\t\tdiagnostics.push(diagnostic);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (fixTypes !== undefined && problem.ruleId !== undefined && problem.fix !== undefined) {\r\n\t\t\t\t\t\t\t\tconst type = RuleMetaData.getType(problem.ruleId);\r\n\t\t\t\t\t\t\t\tif (type !== undefined && fixTypes.has(type)) {\r\n\t\t\t\t\t\t\t\t\tCodeActions.record(document, diagnostic, problem);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (RuleMetaData.isUnusedDisableDirectiveProblem(problem)) {\r\n\t\t\t\t\t\t\t\t\tproblem.ruleId = RuleMetaData.unusedDisableDirectiveId;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tCodeActions.record(document, diagnostic, problem);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn diagnostics;\r\n\t\t}, settings);\r\n\t}\r\n\r\n\tfunction trace(message: string, verbose?: string): void {\r\n\t\tconnection.tracer.log(message, verbose);\r\n\t}\r\n\r\n\t/**\r\n\t * Global paths for the different package managers\r\n\t */\r\n\tnamespace GlobalPaths {\r\n\t\tconst globalPaths: Record<string, { cache: string | undefined; get(): string | undefined; }> = {\r\n\t\t\tyarn: {\r\n\t\t\t\tcache: undefined,\r\n\t\t\t\tget(): string | undefined {\r\n\t\t\t\t\treturn Files.resolveGlobalYarnPath(trace);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tnpm: {\r\n\t\t\t\tcache: undefined,\r\n\t\t\t\tget(): string | undefined {\r\n\t\t\t\t\treturn Files.resolveGlobalNodePath(trace);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tpnpm: {\r\n\t\t\t\tcache: undefined,\r\n\t\t\t\tget(): string {\r\n\t\t\t\t\tconst pnpmPath = execSync('pnpm root -g').toString().trim();\r\n\t\t\t\t\treturn pnpmPath;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\texport function get(packageManager: PackageManagers): string | undefined {\r\n\t\t\tconst pm = globalPaths[packageManager];\r\n\t\t\tif (pm) {\r\n\t\t\t\tif (pm.cache === undefined) {\r\n\t\t\t\t\tpm.cache = pm.get();\r\n\t\t\t\t}\r\n\t\t\t\treturn pm.cache;\r\n\t\t\t}\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\r\n\texport function findWorkingDirectory(workspaceFolder: string, file: string | undefined): string | undefined {\r\n\t\tif (file === undefined || isUNC(file)) {\r\n\t\t\treturn workspaceFolder;\r\n\t\t}\r\n\t\t// Don't probe for something in node modules folder.\r\n\t\tif (file.indexOf(`${path.sep}node_modules${path.sep}`) !== -1) {\r\n\t\t\treturn workspaceFolder;\r\n\t\t}\r\n\r\n\t\tlet result: string = workspaceFolder;\r\n\t\tlet directory: string | undefined = path.dirname(file);\r\n\t\touter: while (directory !== undefined && directory.startsWith(workspaceFolder)) {\r\n\t\t\tfor (const { fileName, isRoot } of projectFolderIndicators) {\r\n\t\t\t\tif (fs.existsSync(path.join(directory, fileName))) {\r\n\t\t\t\t\tresult = directory;\r\n\t\t\t\t\tif (isRoot) {\r\n\t\t\t\t\t\tbreak outer;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst parent = path.dirname(directory);\r\n\t\t\tdirectory = parent !== directory ? parent : undefined;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\texport namespace ErrorHandlers {\r\n\r\n\t\texport const single: ((error: any, document: TextDocument, library: ESLintModule) => Status | undefined)[] = [\r\n\t\t\ttryHandleNoConfig,\r\n\t\t\ttryHandleConfigError,\r\n\t\t\ttryHandleMissingModule,\r\n\t\t\tshowErrorMessage\r\n\t\t];\r\n\r\n\t\texport function getMessage(err: any, document: TextDocument): string {\r\n\t\t\tlet result: string | undefined = undefined;\r\n\t\t\tif (typeof err.message === 'string' || err.message instanceof String) {\r\n\t\t\t\tresult = <string>err.message;\r\n\t\t\t\tresult = result.replace(/\\r?\\n/g, ' ');\r\n\t\t\t\tif (/^CLI: /.test(result)) {\r\n\t\t\t\t\tresult = result.substr(5);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tresult = `An unknown error occurred while validating document: ${document.uri}`;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tconst noConfigReported: Map<string, ESLintModule> = new Map<string, ESLintModule>();\r\n\r\n\t\texport function clearNoConfigReported(): void {\r\n\t\t\tnoConfigReported.clear();\r\n\t\t}\r\n\r\n\t\tfunction tryHandleNoConfig(error: any, document: TextDocument, library: ESLintModule): Status | undefined {\r\n\t\t\tif (!ESLintError.isNoConfigFound(error)) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t\tif (!noConfigReported.has(document.uri)) {\r\n\t\t\t\tconnection.sendRequest(\r\n\t\t\t\t\tNoConfigRequest.type,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmessage: getMessage(error, document),\r\n\t\t\t\t\t\tdocument: {\r\n\t\t\t\t\t\t\turi: document.uri\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t).then(undefined, () => { });\r\n\t\t\t\tnoConfigReported.set(document.uri, library);\r\n\t\t\t}\r\n\t\t\treturn Status.warn;\r\n\t\t}\r\n\r\n\t\tconst configErrorReported: Map<string, ESLintModule> = new Map<string, ESLintModule>();\r\n\r\n\t\texport function getConfigErrorReported(key: string): ESLintModule | undefined {\r\n\t\t\treturn configErrorReported.get(key);\r\n\t\t}\r\n\r\n\t\texport function removeConfigErrorReported(key: string): boolean {\r\n\t\t\treturn configErrorReported.delete(key);\r\n\t\t}\r\n\r\n\t\tfunction tryHandleConfigError(error: any, document: TextDocument, library: ESLintModule): Status | undefined {\r\n\t\t\tif (!error.message) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\r\n\t\t\tfunction handleFileName(filename: string): Status {\r\n\t\t\t\tif (!configErrorReported.has(filename)) {\r\n\t\t\t\t\tconnection.console.error(getMessage(error, document));\r\n\t\t\t\t\tif (!documents.get(URI.file(filename).toString())) {\r\n\t\t\t\t\t\tconnection.window.showInformationMessage(getMessage(error, document));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconfigErrorReported.set(filename, library);\r\n\t\t\t\t}\r\n\t\t\t\treturn Status.warn;\r\n\t\t\t}\r\n\r\n\t\t\tlet matches = /Cannot read config file:\\s+(.*)\\nError:\\s+(.*)/.exec(error.message);\r\n\t\t\tif (matches && matches.length === 3) {\r\n\t\t\t\treturn handleFileName(matches[1]);\r\n\t\t\t}\r\n\r\n\t\t\tmatches = /(.*):\\n\\s*Configuration for rule \\\"(.*)\\\" is /.exec(error.message);\r\n\t\t\tif (matches && matches.length === 3) {\r\n\t\t\t\treturn handleFileName(matches[1]);\r\n\t\t\t}\r\n\r\n\t\t\tmatches = /Cannot find module '([^']*)'\\nReferenced from:\\s+(.*)/.exec(error.message);\r\n\t\t\tif (matches && matches.length === 3) {\r\n\t\t\t\treturn handleFileName(matches[2]);\r\n\t\t\t}\r\n\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\r\n\t\tconst missingModuleReported: Map<string, ESLintModule> = new Map<string, ESLintModule>();\r\n\r\n\t\texport function clearMissingModuleReported(): void {\r\n\t\t\tmissingModuleReported.clear();\r\n\t\t}\r\n\r\n\t\tfunction tryHandleMissingModule(error: any, document: TextDocument, library: ESLintModule): Status | undefined {\r\n\t\t\tif (!error.message) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\r\n\t\t\tfunction handleMissingModule(plugin: string, module: string, error: ESLintError): Status {\r\n\t\t\t\tif (!missingModuleReported.has(plugin)) {\r\n\t\t\t\t\tconst fsPath = inferFilePath(document);\r\n\t\t\t\t\tmissingModuleReported.set(plugin, library);\r\n\t\t\t\t\tif (error.messageTemplate === 'plugin-missing') {\r\n\t\t\t\t\t\tconnection.console.error([\r\n\t\t\t\t\t\t\t'',\r\n\t\t\t\t\t\t\t`${error.message.toString()}`,\r\n\t\t\t\t\t\t\t`Happened while validating ${fsPath ? fsPath : document.uri}`,\r\n\t\t\t\t\t\t\t`This can happen for a couple of reasons:`,\r\n\t\t\t\t\t\t\t`1. The plugin name is spelled incorrectly in an ESLint configuration file (e.g. .eslintrc).`,\r\n\t\t\t\t\t\t\t`2. If ESLint is installed globally, then make sure ${module} is installed globally as well.`,\r\n\t\t\t\t\t\t\t`3. If ESLint is installed locally, then ${module} isn't installed correctly.`,\r\n\t\t\t\t\t\t\t'',\r\n\t\t\t\t\t\t\t`Consider running eslint --debug ${fsPath ? fsPath : document.uri} from a terminal to obtain a trace about the configuration files used.`\r\n\t\t\t\t\t\t].join('\\n'));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconnection.console.error([\r\n\t\t\t\t\t\t\t`${error.message.toString()}`,\r\n\t\t\t\t\t\t\t`Happened while validating ${fsPath ? fsPath : document.uri}`\r\n\t\t\t\t\t\t].join('\\n'));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn Status.warn;\r\n\t\t\t}\r\n\r\n\t\t\tconst matches = /Failed to load plugin (.*): Cannot find module (.*)/.exec(error.message);\r\n\t\t\tif (matches && matches.length === 3) {\r\n\t\t\t\treturn handleMissingModule(matches[1], matches[2], error);\r\n\t\t\t}\r\n\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\r\n\t\tfunction showErrorMessage(error: any, document: TextDocument): Status {\r\n\t\t\tif (Is.string(error.stack)) {\r\n\t\t\t\tconnection.console.error('An unexpected error occurred:');\r\n\t\t\t\tconnection.console.error(error.stack);\r\n\t\t\t} else {\r\n\t\t\t\tconnection.console.error(`An unexpected error occurred: ${getMessage(error, document)}.`);\r\n\t\t\t}\r\n\t\t\treturn Status.error;\r\n\t\t}\r\n\t}\r\n}\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n\r\nconst toString = Object.prototype.toString;\r\n\r\nexport function boolean(value: any): value is boolean {\r\n\treturn value === true || value === false;\r\n}\r\n\r\nexport function nullOrUndefined(value: any): value is null | undefined {\r\n\treturn value === null || value === undefined;\r\n}\r\n\r\nexport function string(value: any): value is string {\r\n\treturn toString.call(value) === '[object String]';\r\n}","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n\r\n// This should either come from LSP or VS Code. That we repeat this is bogus.\r\n\r\ntype LanguageConfig = {\r\n\text: string;\r\n\tlineComment: string;\r\n\tblockComment: [string, string];\r\n};\r\n\r\nconst languageId2Config: Map<string, LanguageConfig> = new Map([\r\n\t['javascript', { ext: 'js', lineComment: '//', blockComment: ['/*', '*/'] }],\r\n\t['javascriptreact', { ext: 'jsx', lineComment: '//', blockComment: ['/*', '*/'] }],\r\n\t['typescript', { ext: 'ts', lineComment: '//', blockComment: ['/*', '*/'] } ],\r\n\t['typescriptreact', { ext: 'tsx', lineComment: '//', blockComment: ['/*', '*/'] } ],\r\n\t['html', { ext: 'html', lineComment: '//', blockComment: ['<!--', '-->'] }],\r\n\t['vue', { ext: 'vue', lineComment: '//', blockComment: ['<!--', '-->'] }],\r\n\t['coffeescript', { ext: 'coffee', lineComment: '#', blockComment: ['###', '###'] }],\r\n\t['yaml', { ext: 'yaml', lineComment: '#', blockComment: ['#', ''] }],\r\n\t['graphql', { ext: 'graphql', lineComment: '#', blockComment: ['#', ''] }]\r\n]);\r\n\r\nnamespace LanguageDefaults {\r\n\texport function getLineComment(languageId: string): string {\r\n\t\treturn languageId2Config.get(languageId)?.lineComment ?? '//';\r\n\t}\r\n\r\n\texport function getBlockComment(languageId: string): [string, string] {\r\n\t\treturn languageId2Config.get(languageId)?.blockComment ?? ['/**', '*/'];\r\n\t}\r\n\r\n\texport function getExtension(languageId: string): string | undefined {\r\n\t\treturn languageId2Config.get(languageId)?.ext;\r\n\t}\r\n}\r\n\r\nexport default LanguageDefaults;","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n\r\ninterface Item<K, V> {\r\n\tprevious: Item<K, V> | undefined;\r\n\tnext: Item<K, V> | undefined;\r\n\tkey: K;\r\n\tvalue: V;\r\n}\r\n\r\nexport namespace Touch {\r\n\texport const None: 0 = 0;\r\n\texport const First: 1 = 1;\r\n\texport const AsOld: 1 = Touch.First;\r\n\texport const Last: 2 = 2;\r\n\texport const AsNew: 2 = Touch.Last;\r\n}\r\n\r\nexport type Touch = 0 | 1 | 2;\r\n\r\nexport class LinkedMap<K, V> implements Map<K, V> {\r\n\r\n\treadonly [Symbol.toStringTag] = 'LinkedMap';\r\n\r\n\tprivate _map: Map<K, Item<K, V>>;\r\n\tprivate _head: Item<K, V> | undefined;\r\n\tprivate _tail: Item<K, V> | undefined;\r\n\tprivate _size: number;\r\n\r\n\tprivate _state: number;\r\n\r\n\tpublic constructor() {\r\n\t\tthis._map = new Map<K, Item<K, V>>();\r\n\t\tthis._head = undefined;\r\n\t\tthis._tail = undefined;\r\n\t\tthis._size = 0;\r\n\t\tthis._state = 0;\r\n\t}\r\n\r\n\tpublic clear(): void {\r\n\t\tthis._map.clear();\r\n\t\tthis._head = undefined;\r\n\t\tthis._tail = undefined;\r\n\t\tthis._size = 0;\r\n\t\tthis._state++;\r\n\t}\r\n\r\n\tpublic isEmpty(): boolean {\r\n\t\treturn !this._head && !this._tail;\r\n\t}\r\n\r\n\tpublic get size(): number {\r\n\t\treturn this._size;\r\n\t}\r\n\r\n\tpublic get first(): V | undefined {\r\n\t\treturn this._head?.value;\r\n\t}\r\n\r\n\tpublic get last(): V | undefined {\r\n\t\treturn this._tail?.value;\r\n\t}\r\n\r\n\tpublic has(key: K): boolean {\r\n\t\treturn this._map.has(key);\r\n\t}\r\n\r\n\tpublic get(key: K, touch: Touch = Touch.None): V | undefined {\r\n\t\tconst item = this._map.get(key);\r\n\t\tif (!item) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tif (touch !== Touch.None) {\r\n\t\t\tthis.touch(item, touch);\r\n\t\t}\r\n\t\treturn item.value;\r\n\t}\r\n\r\n\tpublic set(key: K, value: V, touch: Touch = Touch.None): this {\r\n\t\tlet item = this._map.get(key);\r\n\t\tif (item) {\r\n\t\t\titem.value = value;\r\n\t\t\tif (touch !== Touch.None) {\r\n\t\t\t\tthis.touch(item, touch);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\titem = { key, value, next: undefined, previous: undefined };\r\n\t\t\tswitch (touch) {\r\n\t\t\t\tcase Touch.None:\r\n\t\t\t\t\tthis.addItemLast(item);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Touch.First:\r\n\t\t\t\t\tthis.addItemFirst(item);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase Touch.Last:\r\n\t\t\t\t\tthis.addItemLast(item);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthis.addItemLast(item);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tthis._map.set(key, item);\r\n\t\t\tthis._size++;\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic delete(key: K): boolean {\r\n\t\treturn !!this.remove(key);\r\n\t}\r\n\r\n\tpublic remove(key: K): V | undefined {\r\n\t\tconst item = this._map.get(key);\r\n\t\tif (!item) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tthis._map.delete(key);\r\n\t\tthis.removeItem(item);\r\n\t\tthis._size--;\r\n\t\treturn item.value;\r\n\t}\r\n\r\n\tpublic shift(): V | undefined {\r\n\t\tif (!this._head && !this._tail) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tif (!this._head || !this._tail) {\r\n\t\t\tthrow new Error('Invalid list');\r\n\t\t}\r\n\t\tconst item = this._head;\r\n\t\tthis._map.delete(item.key);\r\n\t\tthis.removeItem(item);\r\n\t\tthis._size--;\r\n\t\treturn item.value;\r\n\t}\r\n\r\n\tpublic forEach(callbackfn: (value: V, key: K, map: LinkedMap<K, V>) => void, thisArg?: any): void {\r\n\t\tconst state = this._state;\r\n\t\tlet current = this._head;\r\n\t\twhile (current) {\r\n\t\t\tif (thisArg) {\r\n\t\t\t\tcallbackfn.bind(thisArg)(current.value, current.key, this);\r\n\t\t\t} else {\r\n\t\t\t\tcallbackfn(current.value, current.key, this);\r\n\t\t\t}\r\n\t\t\tif (this._state !== state) {\r\n\t\t\t\tthrow new Error(`LinkedMap got modified during iteration.`);\r\n\t\t\t}\r\n\t\t\tcurrent = current.next;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic keys(): IterableIterator<K> {\r\n\t\tconst map = this;\r\n\t\tconst state = this._state;\r\n\t\tlet current = this._head;\r\n\t\tconst iterator: IterableIterator<K> = {\r\n\t\t\t[Symbol.iterator]() {\r\n\t\t\t\treturn iterator;\r\n\t\t\t},\r\n\t\t\tnext(): IteratorResult<K> {\r\n\t\t\t\tif (map._state !== state) {\r\n\t\t\t\t\tthrow new Error(`LinkedMap got modified during iteration.`);\r\n\t\t\t\t}\r\n\t\t\t\tif (current) {\r\n\t\t\t\t\tconst result = { value: current.key, done: false };\r\n\t\t\t\t\tcurrent = current.next;\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn { value: undefined, done: true };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn iterator;\r\n\t}\r\n\r\n\tpublic values(): IterableIterator<V> {\r\n\t\tconst map = this;\r\n\t\tconst state = this._state;\r\n\t\tlet current = this._head;\r\n\t\tconst iterator: IterableIterator<V> = {\r\n\t\t\t[Symbol.iterator]() {\r\n\t\t\t\treturn iterator;\r\n\t\t\t},\r\n\t\t\tnext(): IteratorResult<V> {\r\n\t\t\t\tif (map._state !== state) {\r\n\t\t\t\t\tthrow new Error(`LinkedMap got modified during iteration.`);\r\n\t\t\t\t}\r\n\t\t\t\tif (current) {\r\n\t\t\t\t\tconst result = { value: current.value, done: false };\r\n\t\t\t\t\tcurrent = current.next;\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn { value: undefined, done: true };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn iterator;\r\n\t}\r\n\r\n\tpublic entries(): IterableIterator<[K, V]> {\r\n\t\tconst map = this;\r\n\t\tconst state = this._state;\r\n\t\tlet current = this._head;\r\n\t\tconst iterator: IterableIterator<[K, V]> = {\r\n\t\t\t[Symbol.iterator]() {\r\n\t\t\t\treturn iterator;\r\n\t\t\t},\r\n\t\t\tnext(): IteratorResult<[K, V]> {\r\n\t\t\t\tif (map._state !== state) {\r\n\t\t\t\t\tthrow new Error(`LinkedMap got modified during iteration.`);\r\n\t\t\t\t}\r\n\t\t\t\tif (current) {\r\n\t\t\t\t\tconst result: IteratorResult<[K, V]> = { value: [current.key, current.value], done: false };\r\n\t\t\t\t\tcurrent = current.next;\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn { value: undefined, done: true };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn iterator;\r\n\t}\r\n\r\n\tpublic [Symbol.iterator](): IterableIterator<[K, V]> {\r\n\t\treturn this.entries();\r\n\t}\r\n\r\n\tprotected trimOld(newSize: number) {\r\n\t\tif (newSize >= this.size) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (newSize === 0) {\r\n\t\t\tthis.clear();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet current = this._head;\r\n\t\tlet currentSize = this.size;\r\n\t\twhile (current && currentSize > newSize) {\r\n\t\t\tthis._map.delete(current.key);\r\n\t\t\tcurrent = current.next;\r\n\t\t\tcurrentSize--;\r\n\t\t}\r\n\t\tthis._head = current;\r\n\t\tthis._size = currentSize;\r\n\t\tif (current) {\r\n\t\t\tcurrent.previous = undefined;\r\n\t\t}\r\n\t\tthis._state++;\r\n\t}\r\n\r\n\tprivate addItemFirst(item: Item<K, V>): void {\r\n\t\t// First time Insert\r\n\t\tif (!this._head && !this._tail) {\r\n\t\t\tthis._tail = item;\r\n\t\t} else if (!this._head) {\r\n\t\t\tthrow new Error('Invalid list');\r\n\t\t} else {\r\n\t\t\titem.next = this._head;\r\n\t\t\tthis._head.previous = item;\r\n\t\t}\r\n\t\tthis._head = item;\r\n\t\tthis._state++;\r\n\t}\r\n\r\n\tprivate addItemLast(item: Item<K, V>): void {\r\n\t\t// First time Insert\r\n\t\tif (!this._head && !this._tail) {\r\n\t\t\tthis._head = item;\r\n\t\t} else if (!this._tail) {\r\n\t\t\tthrow new Error('Invalid list');\r\n\t\t} else {\r\n\t\t\titem.previous = this._tail;\r\n\t\t\tthis._tail.next = item;\r\n\t\t}\r\n\t\tthis._tail = item;\r\n\t\tthis._state++;\r\n\t}\r\n\r\n\tprivate removeItem(item: Item<K, V>): void {\r\n\t\tif (item === this._head && item === this._tail) {\r\n\t\t\tthis._head = undefined;\r\n\t\t\tthis._tail = undefined;\r\n\t\t}\r\n\t\telse if (item === this._head) {\r\n\t\t\t// This can only happend if size === 1 which is handle\r\n\t\t\t// by the case above.\r\n\t\t\tif (!item.next) {\r\n\t\t\t\tthrow new Error('Invalid list');\r\n\t\t\t}\r\n\t\t\titem.next.previous = undefined;\r\n\t\t\tthis._head = item.next;\r\n\t\t}\r\n\t\telse if (item === this._tail) {\r\n\t\t\t// This can only happend if size === 1 which is handle\r\n\t\t\t// by the case above.\r\n\t\t\tif (!item.previous) {\r\n\t\t\t\tthrow new Error('Invalid list');\r\n\t\t\t}\r\n\t\t\titem.previous.next = undefined;\r\n\t\t\tthis._tail = item.previous;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconst next = item.next;\r\n\t\t\tconst previous = item.previous;\r\n\t\t\tif (!next || !previous) {\r\n\t\t\t\tthrow new Error('Invalid list');\r\n\t\t\t}\r\n\t\t\tnext.previous = previous;\r\n\t\t\tprevious.next = next;\r\n\t\t}\r\n\t\titem.next = undefined;\r\n\t\titem.previous = undefined;\r\n\t\tthis._state++;\r\n\t}\r\n\r\n\tprivate touch(item: Item<K, V>, touch: Touch): void {\r\n\t\tif (!this._head || !this._tail) {\r\n\t\t\tthrow new Error('Invalid list');\r\n\t\t}\r\n\t\tif ((touch !== Touch.First && touch !== Touch.Last)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (touch === Touch.First) {\r\n\t\t\tif (item === this._head) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst next = item.next;\r\n\t\t\tconst previous = item.previous;\r\n\r\n\t\t\t// Unlink the item\r\n\t\t\tif (item === this._tail) {\r\n\t\t\t\t// previous must be defined since item was not head but is tail\r\n\t\t\t\t// So there are more than on item in the map\r\n\t\t\t\tprevious!.next = undefined;\r\n\t\t\t\tthis._tail = previous;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Both next and previous are not undefined since item was neither head nor tail.\r\n\t\t\t\tnext!.previous = previous;\r\n\t\t\t\tprevious!.next = next;\r\n\t\t\t}\r\n\r\n\t\t\t// Insert the node at head\r\n\t\t\titem.previous = undefined;\r\n\t\t\titem.next = this._head;\r\n\t\t\tthis._head.previous = item;\r\n\t\t\tthis._head = item;\r\n\t\t\tthis._state++;\r\n\t\t} else if (touch === Touch.Last) {\r\n\t\t\tif (item === this._tail) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst next = item.next;\r\n\t\t\tconst previous = item.previous;\r\n\r\n\t\t\t// Unlink the item.\r\n\t\t\tif (item === this._head) {\r\n\t\t\t\t// next must be defined since item was not tail but is head\r\n\t\t\t\t// So there are more than on item in the map\r\n\t\t\t\tnext!.previous = undefined;\r\n\t\t\t\tthis._head = next;\r\n\t\t\t} else {\r\n\t\t\t\t// Both next and previous are not undefined since item was neither head nor tail.\r\n\t\t\t\tnext!.previous = previous;\r\n\t\t\t\tprevious!.next = next;\r\n\t\t\t}\r\n\t\t\titem.next = undefined;\r\n\t\t\titem.previous = this._tail;\r\n\t\t\tthis._tail.next = item;\r\n\t\t\tthis._tail = item;\r\n\t\t\tthis._state++;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic toJSON(): [K, V][] {\r\n\t\tconst data: [K, V][] = [];\r\n\r\n\t\tthis.forEach((value, key) => {\r\n\t\t\tdata.push([key, value]);\r\n\t\t});\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tpublic fromJSON(data: [K, V][]): void {\r\n\t\tthis.clear();\r\n\r\n\t\tfor (const [key, value] of data) {\r\n\t\t\tthis.set(key, value);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class LRUCache<K, V> extends LinkedMap<K, V> {\r\n\r\n\tprivate _limit: number;\r\n\tprivate _ratio: number;\r\n\r\n\tpublic constructor(limit: number, ratio: number = 1) {\r\n\t\tsuper();\r\n\t\tthis._limit = limit;\r\n\t\tthis._ratio = Math.min(Math.max(0, ratio), 1);\r\n\t}\r\n\r\n\tpublic get limit(): number {\r\n\t\treturn this._limit;\r\n\t}\r\n\r\n\tpublic set limit(limit: number) {\r\n\t\tthis._limit = limit;\r\n\t\tthis.checkTrim();\r\n\t}\r\n\r\n\tpublic get ratio(): number {\r\n\t\treturn this._ratio;\r\n\t}\r\n\r\n\tpublic set ratio(ratio: number) {\r\n\t\tthis._ratio = Math.min(Math.max(0, ratio), 1);\r\n\t\tthis.checkTrim();\r\n\t}\r\n\r\n\tpublic get(key: K, touch: Touch = Touch.AsNew): V | undefined {\r\n\t\treturn super.get(key, touch);\r\n\t}\r\n\r\n\tpublic peek(key: K): V | undefined {\r\n\t\treturn super.get(key, Touch.None);\r\n\t}\r\n\r\n\tpublic set(key: K, value: V): this {\r\n\t\tsuper.set(key, value, Touch.Last);\r\n\t\tthis.checkTrim();\r\n\t\treturn this;\r\n\t}\r\n\r\n\tprivate checkTrim() {\r\n\t\tif (this.size > this._limit) {\r\n\t\t\tthis.trimOld(Math.round(this._limit * this._ratio));\r\n\t\t}\r\n\t}\r\n}","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n\r\nimport * as fs from 'fs';\r\n\r\nimport { URI } from 'vscode-uri';\r\nimport { TextDocument } from 'vscode-languageserver-textdocument';\r\n\r\nimport * as Is from './is';\r\n\r\n/**\r\n * Special functions to deal with path conversions in the context of ESLint\r\n */\r\n\r\n/**\r\n * Normalizes the drive letter to upper case which is the default in Node but not in\r\n * VS Code.\r\n */\r\nexport function normalizeDriveLetter(path: string): string {\r\n\tif (process.platform !== 'win32' || path.length < 2 || path[1] !== ':') {\r\n\t\treturn path;\r\n\t}\r\n\treturn path[0].toUpperCase() + path.substring(1);\r\n}\r\n\r\nconst enum CharCode {\r\n\t/**\r\n\t * The `\\` character.\r\n\t */\r\n\tBackslash = 92,\r\n}\r\n\r\n/**\r\n * Check if the path follows this pattern: `\\\\hostname\\sharename`.\r\n *\r\n * @see https://msdn.microsoft.com/en-us/library/gg465305.aspx\r\n * @return A boolean indication if the path is a UNC path, on none-windows\r\n * always false.\r\n */\r\nexport function isUNC(path: string): boolean {\r\n\tif (process.platform !== 'win32') {\r\n\t\t// UNC is a windows concept\r\n\t\treturn false;\r\n\t}\r\n\r\n\tif (!path || path.length < 5) {\r\n\t\t// at least \\\\a\\b\r\n\t\treturn false;\r\n\t}\r\n\r\n\tlet code = path.charCodeAt(0);\r\n\tif (code !== CharCode.Backslash) {\r\n\t\treturn false;\r\n\t}\r\n\tcode = path.charCodeAt(1);\r\n\tif (code !== CharCode.Backslash) {\r\n\t\treturn false;\r\n\t}\r\n\tlet pos = 2;\r\n\tconst start = pos;\r\n\tfor (; pos < path.length; pos++) {\r\n\t\tcode = path.charCodeAt(pos);\r\n\t\tif (code === CharCode.Backslash) {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tif (start === pos) {\r\n\t\treturn false;\r\n\t}\r\n\tcode = path.charCodeAt(pos + 1);\r\n\tif (isNaN(code) || code === CharCode.Backslash) {\r\n\t\treturn false;\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nexport function getFileSystemPath(uri: URI): string {\r\n\tlet result = uri.fsPath;\r\n\tif (process.platform === 'win32' && result.length >= 2 && result[1] === ':') {\r\n\t\t// Node by default uses an upper case drive letter and ESLint uses\r\n\t\t// === to compare paths which results in the equal check failing\r\n\t\t// if the drive letter is lower case in th URI. Ensure upper case.\r\n\t\tresult = result[0].toUpperCase() + result.substr(1);\r\n\t}\r\n\tif (process.platform === 'win32' || process.platform === 'darwin') {\r\n\t\ttry {\r\n\t\t\tconst realpath = fs.realpathSync.native(result);\r\n\t\t\t// Only use the real path if only the casing has changed.\r\n\t\t\tif (realpath.toLowerCase() === result.toLowerCase()) {\r\n\t\t\t\tresult = realpath;\r\n\t\t\t}\r\n\t\t} catch {\r\n\t\t\t// Silently ignore errors from `fs.realpathSync` to handle scenarios where\r\n\t\t\t// the file being linted is not yet written to disk. This occurs in editors\r\n\t\t\t// such as Neovim for non-written buffers.\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nexport function normalizePath(path: string): string;\r\nexport function normalizePath(path: undefined): undefined;\r\nexport function normalizePath(path: string | undefined): string | undefined {\r\n\tif (path === undefined) {\r\n\t\treturn undefined;\r\n\t}\r\n\tif (process.platform === 'win32') {\r\n\t\treturn path.replace(/\\\\/g, '/');\r\n\t}\r\n\treturn path;\r\n}\r\n\r\nexport function getUri(documentOrUri: string | TextDocument | URI): URI {\r\n\treturn Is.string(documentOrUri)\r\n\t\t? URI.parse(documentOrUri)\r\n\t\t: documentOrUri instanceof URI\r\n\t\t\t? documentOrUri\r\n\t\t\t: URI.parse(documentOrUri.uri);\r\n}\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n\r\nimport { NotificationType, NotificationType0, RequestType, TextDocumentIdentifier } from 'vscode-languageserver-protocol';\r\n\r\nexport enum Status {\r\n\tok = 1,\r\n\twarn = 2,\r\n\terror = 3\r\n}\r\n\r\nexport type StatusParams = {\r\n\turi: string;\r\n\tstate: Status;\r\n\tvalidationTime?: number;\r\n};\r\n\r\n/**\r\n * The status notification is sent from the server to the client to\r\n * inform the client about server status changes.\r\n */\r\nexport namespace StatusNotification {\r\n\texport const method: 'eslint/status' = 'eslint/status';\r\n\texport const type = new NotificationType<StatusParams>(method);\r\n}\r\n\r\nexport type NoConfigParams = {\r\n\tmessage: string;\r\n\tdocument: TextDocumentIdentifier;\r\n};\r\n\r\nexport type NoConfigResult = {\r\n};\r\n\r\n/**\r\n * The NoConfigRequest is sent from the server to the client to inform\r\n * the client that no eslint configuration file could be found when\r\n * trying to lint a file.\r\n */\r\nexport namespace NoConfigRequest {\r\n\texport const method: 'eslint/noConfig' = 'eslint/noConfig';\r\n\texport const type = new RequestType<NoConfigParams, NoConfigResult, void>(method);\r\n}\r\n\r\nexport type NoESLintLibraryParams = {\r\n\tsource: TextDocumentIdentifier;\r\n};\r\n\r\nexport type NoESLintLibraryResult = {\r\n};\r\n\r\n/**\r\n * The NoESLintLibraryRequest is sent from the server to the client to\r\n * inform the client that no eslint library could be found when trying\r\n * to lint a file.\r\n */\r\nexport namespace NoESLintLibraryRequest {\r\n\texport const method: 'eslint/noLibrary' = 'eslint/noLibrary';\r\n\texport const type = new RequestType<NoESLintLibraryParams, NoESLintLibraryResult, void>(method);\r\n}\r\n\r\nexport type OpenESLintDocParams = {\r\n\turl: string;\r\n};\r\n\r\nexport type OpenESLintDocResult = {\r\n};\r\n\r\n/**\r\n * The eslint/openDoc request is sent from the server to the client to\r\n * ask the client to open the documentation URI for a given\r\n * ESLint rule.\r\n */\r\nexport namespace OpenESLintDocRequest {\r\n\texport const method: 'eslint/openDoc' = 'eslint/openDoc';\r\n\texport const type = new RequestType<OpenESLintDocParams, OpenESLintDocResult, void>(method);\r\n}\r\n\r\nexport type ProbeFailedParams = {\r\n\ttextDocument: TextDocumentIdentifier;\r\n};\r\n\r\n/**\r\n * The eslint/probeFailed request is sent from the server to the client\r\n * to tell the client the the lint probing for a certain document has\r\n * failed and that there is no need to sync that document to the server\r\n * anymore.\r\n */\r\nexport namespace ProbeFailedRequest {\r\n\texport const method: 'eslint/probeFailed' = 'eslint/probeFailed';\r\n\texport const type = new RequestType<ProbeFailedParams, void, void>(method);\r\n}\r\n\r\n/**\r\n * The eslint/showOutputChannel notification is sent from the server to\r\n * the client to ask the client to reveal it's output channel.\r\n */\r\nexport namespace ShowOutputChannel {\r\n\texport const method: 'eslint/showOutputChannel' = 'eslint/showOutputChannel';\r\n\texport const type = new NotificationType0('eslint/showOutputChannel');\r\n}\r\n\r\n/**\r\n * The eslint/exitCalled notification is sent from the server to the client\r\n * to inform the client that a process.exit call on the server got intercepted.\r\n * The call was very likely made by an ESLint plugin.\r\n */\r\nexport namespace ExitCalled {\r\n\texport const method: 'eslint/exitCalled' = 'eslint/exitCalled';\r\n\texport const type = new NotificationType<[number, string]>(method);\r\n}","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n\r\nimport {\r\n\tWorkspaceFolder\r\n} from 'vscode-languageserver-protocol';\r\n\r\nnamespace Is {\r\n\tconst toString = Object.prototype.toString;\r\n\r\n\texport function boolean(value: any): value is boolean {\r\n\t\treturn value === true || value === false;\r\n\t}\r\n\r\n\texport function string(value: any): value is string {\r\n\t\treturn toString.call(value) === '[object String]';\r\n\t}\r\n}\r\n\r\nexport enum Validate {\r\n\ton = 'on',\r\n\toff = 'off',\r\n\tprobe = 'probe'\r\n}\r\n\r\nexport type CodeActionSettings = {\r\n\tdisableRuleComment: {\r\n\t\tenable: boolean;\r\n\t\tlocation: 'separateLine' | 'sameLine';\r\n\t\tcommentStyle: 'line' | 'block';\r\n\t};\r\n\tshowDocumentation: {\r\n\t\tenable: boolean;\r\n\t};\r\n};\r\n\r\nexport enum CodeActionsOnSaveMode {\r\n\tall = 'all',\r\n\tproblems = 'problems'\r\n}\r\n\r\nexport namespace CodeActionsOnSaveMode {\r\n\texport function from(value: string | undefined | null): CodeActionsOnSaveMode {\r\n\t\tif (value === undefined || value === null || !Is.string(value)) {\r\n\t\t\treturn CodeActionsOnSaveMode.all;\r\n\t\t}\r\n\t\tswitch(value.toLowerCase()) {\r\n\t\t\tcase CodeActionsOnSaveMode.problems:\r\n\t\t\t\treturn CodeActionsOnSaveMode.problems;\r\n\t\t\tdefault:\r\n\t\t\t\treturn CodeActionsOnSaveMode.all;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport namespace CodeActionsOnSaveRules {\r\n\texport function from(value: string[] | undefined | null): string[] | undefined {\r\n\t\tif (value === undefined || value === null || !Array.isArray(value)) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn value.filter(item => Is.string(item));\r\n\t}\r\n}\r\n\r\nexport type CodeActionsOnSaveSettings = {\r\n\tmode: CodeActionsOnSaveMode,\r\n\trules?: string[]\r\n};\r\n\r\nexport enum ESLintSeverity {\r\n\toff = 'off',\r\n\twarn = 'warn',\r\n\terror = 'error'\r\n}\r\n\r\nexport namespace ESLintSeverity {\r\n\texport function from(value: string | undefined | null): ESLintSeverity {\r\n\t\tif (value === undefined || value === null) {\r\n\t\t\treturn ESLintSeverity.off;\r\n\t\t}\r\n\t\tswitch (value.toLowerCase()) {\r\n\t\t\tcase ESLintSeverity.off:\r\n\t\t\t\treturn ESLintSeverity.off;\r\n\t\t\tcase ESLintSeverity.warn:\r\n\t\t\t\treturn ESLintSeverity.warn;\r\n\t\t\tcase ESLintSeverity.error:\r\n\t\t\t\treturn ESLintSeverity.error;\r\n\t\t\tdefault:\r\n\t\t\t\treturn ESLintSeverity.off;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport enum RuleSeverity {\r\n\t// Original ESLint values\r\n\tinfo = 'info',\r\n\twarn = 'warn',\r\n\terror = 'error',\r\n\toff = 'off',\r\n\r\n\t// Added severity override changes\r\n\tdefault = 'default',\r\n\tdowngrade = 'downgrade',\r\n\tupgrade = 'upgrade'\r\n}\r\n\r\nexport type RuleCustomization = {\r\n\trule: string;\r\n\tseverity: RuleSeverity;\r\n};\r\n\r\nexport type RunValues = 'onType' | 'onSave';\r\n\r\nexport enum ModeEnum {\r\n\tauto = 'auto',\r\n\tlocation = 'location'\r\n}\r\n\r\nexport namespace ModeEnum {\r\n\texport function is(value: string): value is ModeEnum {\r\n\t\treturn value === ModeEnum.auto || value === ModeEnum.location;\r\n\t}\r\n}\r\n\r\nexport type ModeItem = {\r\n\tmode: ModeEnum\r\n};\r\n\r\nexport namespace ModeItem {\r\n\texport function is(item: any): item is ModeItem {\r\n\t\tconst candidate = item as ModeItem;\r\n\t\treturn candidate && ModeEnum.is(candidate.mode);\r\n\t}\r\n}\r\n\r\nexport type DirectoryItem = {\r\n\tdirectory: string;\r\n\t'!cwd'?: boolean;\r\n};\r\n\r\nexport namespace DirectoryItem {\r\n\texport function is(item: any): item is DirectoryItem {\r\n\t\tconst candidate = item as DirectoryItem;\r\n\t\treturn candidate && Is.string(candidate.directory) && (Is.boolean(candidate['!cwd']) || candidate['!cwd'] === undefined);\r\n\t}\r\n}\r\n\r\nexport type PackageManagers = 'npm' | 'yarn' | 'pnpm';\r\n\r\nexport type ESLintOptions = object & { fixTypes?: string[] };\r\n\r\nexport type ConfigurationSettings = {\r\n\tvalidate: Validate;\r\n\tpackageManager: PackageManagers;\r\n\tuseESLintClass: boolean;\r\n\texperimental: {\r\n\t\tuseFlatConfig: boolean;\r\n\t}\r\n\tcodeAction: CodeActionSettings;\r\n\tcodeActionOnSave: CodeActionsOnSaveSettings;\r\n\tformat: boolean;\r\n\tquiet: boolean;\r\n\tonIgnoredFiles: ESLintSeverity;\r\n\toptions: ESLintOptions | undefined;\r\n\trulesCustomizations: RuleCustomization[];\r\n\trun: RunValues;\r\n\tproblems: {\r\n\t\tshortenToSingleLine: boolean;\r\n\t};\r\n\tnodePath: string | null;\r\n\tworkspaceFolder: WorkspaceFolder | undefined;\r\n\tworkingDirectory: ModeItem | DirectoryItem | undefined;\r\n};\r\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/thenable.d.ts\" />\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressType = exports.ProgressToken = exports.createMessageConnection = exports.NullLogger = exports.ConnectionOptions = exports.ConnectionStrategy = exports.AbstractMessageBuffer = exports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = exports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = exports.SharedArrayReceiverStrategy = exports.SharedArraySenderStrategy = exports.CancellationToken = exports.CancellationTokenSource = exports.Emitter = exports.Event = exports.Disposable = exports.LRUCache = exports.Touch = exports.LinkedMap = exports.ParameterStructures = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.ErrorCodes = exports.ResponseError = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType0 = exports.RequestType = exports.Message = exports.RAL = void 0;\nexports.MessageStrategy = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.CancellationReceiverStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.TraceValues = exports.Trace = void 0;\nconst messages_1 = require(\"./messages\");\nObject.defineProperty(exports, \"Message\", { enumerable: true, get: function () { return messages_1.Message; } });\nObject.defineProperty(exports, \"RequestType\", { enumerable: true, get: function () { return messages_1.RequestType; } });\nObject.defineProperty(exports, \"RequestType0\", { enumerable: true, get: function () { return messages_1.RequestType0; } });\nObject.defineProperty(exports, \"RequestType1\", { enumerable: true, get: function () { return messages_1.RequestType1; } });\nObject.defineProperty(exports, \"RequestType2\", { enumerable: true, get: function () { return messages_1.RequestType2; } });\nObject.defineProperty(exports, \"RequestType3\", { enumerable: true, get: function () { return messages_1.RequestType3; } });\nObject.defineProperty(exports, \"RequestType4\", { enumerable: true, get: function () { return messages_1.RequestType4; } });\nObject.defineProperty(exports, \"RequestType5\", { enumerable: true, get: function () { return messages_1.RequestType5; } });\nObject.defineProperty(exports, \"RequestType6\", { enumerable: true, get: function () { return messages_1.RequestType6; } });\nObject.defineProperty(exports, \"RequestType7\", { enumerable: true, get: function () { return messages_1.RequestType7; } });\nObject.defineProperty(exports, \"RequestType8\", { enumerable: true, get: function () { return messages_1.RequestType8; } });\nObject.defineProperty(exports, \"RequestType9\", { enumerable: true, get: function () { return messages_1.RequestType9; } });\nObject.defineProperty(exports, \"ResponseError\", { enumerable: true, get: function () { return messages_1.ResponseError; } });\nObject.defineProperty(exports, \"ErrorCodes\", { enumerable: true, get: function () { return messages_1.ErrorCodes; } });\nObject.defineProperty(exports, \"NotificationType\", { enumerable: true, get: function () { return messages_1.NotificationType; } });\nObject.defineProperty(exports, \"NotificationType0\", { enumerable: true, get: function () { return messages_1.NotificationType0; } });\nObject.defineProperty(exports, \"NotificationType1\", { enumerable: true, get: function () { return messages_1.NotificationType1; } });\nObject.defineProperty(exports, \"NotificationType2\", { enumerable: true, get: function () { return messages_1.NotificationType2; } });\nObject.defineProperty(exports, \"NotificationType3\", { enumerable: true, get: function () { return messages_1.NotificationType3; } });\nObject.defineProperty(exports, \"NotificationType4\", { enumerable: true, get: function () { return messages_1.NotificationType4; } });\nObject.defineProperty(exports, \"NotificationType5\", { enumerable: true, get: function () { return messages_1.NotificationType5; } });\nObject.defineProperty(exports, \"NotificationType6\", { enumerable: true, get: function () { return messages_1.NotificationType6; } });\nObject.defineProperty(exports, \"NotificationType7\", { enumerable: true, get: function () { return messages_1.NotificationType7; } });\nObject.defineProperty(exports, \"NotificationType8\", { enumerable: true, get: function () { return messages_1.NotificationType8; } });\nObject.defineProperty(exports, \"NotificationType9\", { enumerable: true, get: function () { return messages_1.NotificationType9; } });\nObject.defineProperty(exports, \"ParameterStructures\", { enumerable: true, get: function () { return messages_1.ParameterStructures; } });\nconst linkedMap_1 = require(\"./linkedMap\");\nObject.defineProperty(exports, \"LinkedMap\", { enumerable: true, get: function () { return linkedMap_1.LinkedMap; } });\nObject.defineProperty(exports, \"LRUCache\", { enumerable: true, get: function () { return linkedMap_1.LRUCache; } });\nObject.defineProperty(exports, \"Touch\", { enumerable: true, get: function () { return linkedMap_1.Touch; } });\nconst disposable_1 = require(\"./disposable\");\nObject.defineProperty(exports, \"Disposable\", { enumerable: true, get: function () { return disposable_1.Disposable; } });\nconst events_1 = require(\"./events\");\nObject.defineProperty(exports, \"Event\", { enumerable: true, get: function () { return events_1.Event; } });\nObject.defineProperty(exports, \"Emitter\", { enumerable: true, get: function () { return events_1.Emitter; } });\nconst cancellation_1 = require(\"./cancellation\");\nObject.defineProperty(exports, \"CancellationTokenSource\", { enumerable: true, get: function () { return cancellation_1.CancellationTokenSource; } });\nObject.defineProperty(exports, \"CancellationToken\", { enumerable: true, get: function () { return cancellation_1.CancellationToken; } });\nconst sharedArrayCancellation_1 = require(\"./sharedArrayCancellation\");\nObject.defineProperty(exports, \"SharedArraySenderStrategy\", { enumerable: true, get: function () { return sharedArrayCancellation_1.SharedArraySenderStrategy; } });\nObject.defineProperty(exports, \"SharedArrayReceiverStrategy\", { enumerable: true, get: function () { return sharedArrayCancellation_1.SharedArrayReceiverStrategy; } });\nconst messageReader_1 = require(\"./messageReader\");\nObject.defineProperty(exports, \"MessageReader\", { enumerable: true, get: function () { return messageReader_1.MessageReader; } });\nObject.defineProperty(exports, \"AbstractMessageReader\", { enumerable: true, get: function () { return messageReader_1.AbstractMessageReader; } });\nObject.defineProperty(exports, \"ReadableStreamMessageReader\", { enumerable: true, get: function () { return messageReader_1.ReadableStreamMessageReader; } });\nconst messageWriter_1 = require(\"./messageWriter\");\nObject.defineProperty(exports, \"MessageWriter\", { enumerable: true, get: function () { return messageWriter_1.MessageWriter; } });\nObject.defineProperty(exports, \"AbstractMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.AbstractMessageWriter; } });\nObject.defineProperty(exports, \"WriteableStreamMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.WriteableStreamMessageWriter; } });\nconst messageBuffer_1 = require(\"./messageBuffer\");\nObject.defineProperty(exports, \"AbstractMessageBuffer\", { enumerable: true, get: function () { return messageBuffer_1.AbstractMessageBuffer; } });\nconst connection_1 = require(\"./connection\");\nObject.defineProperty(exports, \"ConnectionStrategy\", { enumerable: true, get: function () { return connection_1.ConnectionStrategy; } });\nObject.defineProperty(exports, \"ConnectionOptions\", { enumerable: true, get: function () { return connection_1.ConnectionOptions; } });\nObject.defineProperty(exports, \"NullLogger\", { enumerable: true, get: function () { return connection_1.NullLogger; } });\nObject.defineProperty(exports, \"createMessageConnection\", { enumerable: true, get: function () { return connection_1.createMessageConnection; } });\nObject.defineProperty(exports, \"ProgressToken\", { enumerable: true, get: function () { return connection_1.ProgressToken; } });\nObject.defineProperty(exports, \"ProgressType\", { enumerable: true, get: function () { return connection_1.ProgressType; } });\nObject.defineProperty(exports, \"Trace\", { enumerable: true, get: function () { return connection_1.Trace; } });\nObject.defineProperty(exports, \"TraceValues\", { enumerable: true, get: function () { return connection_1.TraceValues; } });\nObject.defineProperty(exports, \"TraceFormat\", { enumerable: true, get: function () { return connection_1.TraceFormat; } });\nObject.defineProperty(exports, \"SetTraceNotification\", { enumerable: true, get: function () { return connection_1.SetTraceNotification; } });\nObject.defineProperty(exports, \"LogTraceNotification\", { enumerable: true, get: function () { return connection_1.LogTraceNotification; } });\nObject.defineProperty(exports, \"ConnectionErrors\", { enumerable: true, get: function () { return connection_1.ConnectionErrors; } });\nObject.defineProperty(exports, \"ConnectionError\", { enumerable: true, get: function () { return connection_1.ConnectionError; } });\nObject.defineProperty(exports, \"CancellationReceiverStrategy\", { enumerable: true, get: function () { return connection_1.CancellationReceiverStrategy; } });\nObject.defineProperty(exports, \"CancellationSenderStrategy\", { enumerable: true, get: function () { return connection_1.CancellationSenderStrategy; } });\nObject.defineProperty(exports, \"CancellationStrategy\", { enumerable: true, get: function () { return connection_1.CancellationStrategy; } });\nObject.defineProperty(exports, \"MessageStrategy\", { enumerable: true, get: function () { return connection_1.MessageStrategy; } });\nconst ral_1 = require(\"./ral\");\nexports.RAL = ral_1.default;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CancellationTokenSource = exports.CancellationToken = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nvar CancellationToken;\n(function (CancellationToken) {\n    CancellationToken.None = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: events_1.Event.None\n    });\n    CancellationToken.Cancelled = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: events_1.Event.None\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate === CancellationToken.None\n            || candidate === CancellationToken.Cancelled\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\n    }\n    CancellationToken.is = is;\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\nconst shortcutEvent = Object.freeze(function (callback, context) {\n    const handle = (0, ral_1.default)().timer.setTimeout(callback.bind(context), 0);\n    return { dispose() { handle.dispose(); } };\n});\nclass MutableToken {\n    constructor() {\n        this._isCancelled = false;\n    }\n    cancel() {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this.dispose();\n            }\n        }\n    }\n    get isCancellationRequested() {\n        return this._isCancelled;\n    }\n    get onCancellationRequested() {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new events_1.Emitter();\n        }\n        return this._emitter.event;\n    }\n    dispose() {\n        if (this._emitter) {\n            this._emitter.dispose();\n            this._emitter = undefined;\n        }\n    }\n}\nclass CancellationTokenSource {\n    get token() {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n    cancel() {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        }\n        else {\n            this._token.cancel();\n        }\n    }\n    dispose() {\n        if (!this._token) {\n            // ensure to initialize with an empty token if we had none\n            this._token = CancellationToken.None;\n        }\n        else if (this._token instanceof MutableToken) {\n            // actually dispose\n            this._token.dispose();\n        }\n    }\n}\nexports.CancellationTokenSource = CancellationTokenSource;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createMessageConnection = exports.ConnectionOptions = exports.MessageStrategy = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.CancellationReceiverStrategy = exports.RequestCancellationReceiverStrategy = exports.IdCancellationReceiverStrategy = exports.ConnectionStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.TraceValues = exports.Trace = exports.NullLogger = exports.ProgressType = exports.ProgressToken = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst messages_1 = require(\"./messages\");\nconst linkedMap_1 = require(\"./linkedMap\");\nconst events_1 = require(\"./events\");\nconst cancellation_1 = require(\"./cancellation\");\nvar CancelNotification;\n(function (CancelNotification) {\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\n})(CancelNotification || (CancelNotification = {}));\nvar ProgressToken;\n(function (ProgressToken) {\n    function is(value) {\n        return typeof value === 'string' || typeof value === 'number';\n    }\n    ProgressToken.is = is;\n})(ProgressToken = exports.ProgressToken || (exports.ProgressToken = {}));\nvar ProgressNotification;\n(function (ProgressNotification) {\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\n})(ProgressNotification || (ProgressNotification = {}));\nclass ProgressType {\n    constructor() {\n    }\n}\nexports.ProgressType = ProgressType;\nvar StarRequestHandler;\n(function (StarRequestHandler) {\n    function is(value) {\n        return Is.func(value);\n    }\n    StarRequestHandler.is = is;\n})(StarRequestHandler || (StarRequestHandler = {}));\nexports.NullLogger = Object.freeze({\n    error: () => { },\n    warn: () => { },\n    info: () => { },\n    log: () => { }\n});\nvar Trace;\n(function (Trace) {\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\n    Trace[Trace[\"Compact\"] = 2] = \"Compact\";\n    Trace[Trace[\"Verbose\"] = 3] = \"Verbose\";\n})(Trace = exports.Trace || (exports.Trace = {}));\nvar TraceValues;\n(function (TraceValues) {\n    /**\n     * Turn tracing off.\n     */\n    TraceValues.Off = 'off';\n    /**\n     * Trace messages only.\n     */\n    TraceValues.Messages = 'messages';\n    /**\n     * Compact message tracing.\n     */\n    TraceValues.Compact = 'compact';\n    /**\n     * Verbose message tracing.\n     */\n    TraceValues.Verbose = 'verbose';\n})(TraceValues = exports.TraceValues || (exports.TraceValues = {}));\n(function (Trace) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return Trace.Off;\n        }\n        value = value.toLowerCase();\n        switch (value) {\n            case 'off':\n                return Trace.Off;\n            case 'messages':\n                return Trace.Messages;\n            case 'compact':\n                return Trace.Compact;\n            case 'verbose':\n                return Trace.Verbose;\n            default:\n                return Trace.Off;\n        }\n    }\n    Trace.fromString = fromString;\n    function toString(value) {\n        switch (value) {\n            case Trace.Off:\n                return 'off';\n            case Trace.Messages:\n                return 'messages';\n            case Trace.Compact:\n                return 'compact';\n            case Trace.Verbose:\n                return 'verbose';\n            default:\n                return 'off';\n        }\n    }\n    Trace.toString = toString;\n})(Trace = exports.Trace || (exports.Trace = {}));\nvar TraceFormat;\n(function (TraceFormat) {\n    TraceFormat[\"Text\"] = \"text\";\n    TraceFormat[\"JSON\"] = \"json\";\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\n(function (TraceFormat) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return TraceFormat.Text;\n        }\n        value = value.toLowerCase();\n        if (value === 'json') {\n            return TraceFormat.JSON;\n        }\n        else {\n            return TraceFormat.Text;\n        }\n    }\n    TraceFormat.fromString = fromString;\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\nvar SetTraceNotification;\n(function (SetTraceNotification) {\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTrace');\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\nvar LogTraceNotification;\n(function (LogTraceNotification) {\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTrace');\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\nvar ConnectionErrors;\n(function (ConnectionErrors) {\n    /**\n     * The connection is closed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\n    /**\n     * The connection got disposed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\n    /**\n     * The connection is already in listening mode.\n     */\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\nclass ConnectionError extends Error {\n    constructor(code, message) {\n        super(message);\n        this.code = code;\n        Object.setPrototypeOf(this, ConnectionError.prototype);\n    }\n}\nexports.ConnectionError = ConnectionError;\nvar ConnectionStrategy;\n(function (ConnectionStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.cancelUndispatched);\n    }\n    ConnectionStrategy.is = is;\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\nvar IdCancellationReceiverStrategy;\n(function (IdCancellationReceiverStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.kind === undefined || candidate.kind === 'id') && Is.func(candidate.createCancellationTokenSource) && (candidate.dispose === undefined || Is.func(candidate.dispose));\n    }\n    IdCancellationReceiverStrategy.is = is;\n})(IdCancellationReceiverStrategy = exports.IdCancellationReceiverStrategy || (exports.IdCancellationReceiverStrategy = {}));\nvar RequestCancellationReceiverStrategy;\n(function (RequestCancellationReceiverStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && candidate.kind === 'request' && Is.func(candidate.createCancellationTokenSource) && (candidate.dispose === undefined || Is.func(candidate.dispose));\n    }\n    RequestCancellationReceiverStrategy.is = is;\n})(RequestCancellationReceiverStrategy = exports.RequestCancellationReceiverStrategy || (exports.RequestCancellationReceiverStrategy = {}));\nvar CancellationReceiverStrategy;\n(function (CancellationReceiverStrategy) {\n    CancellationReceiverStrategy.Message = Object.freeze({\n        createCancellationTokenSource(_) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n    });\n    function is(value) {\n        return IdCancellationReceiverStrategy.is(value) || RequestCancellationReceiverStrategy.is(value);\n    }\n    CancellationReceiverStrategy.is = is;\n})(CancellationReceiverStrategy = exports.CancellationReceiverStrategy || (exports.CancellationReceiverStrategy = {}));\nvar CancellationSenderStrategy;\n(function (CancellationSenderStrategy) {\n    CancellationSenderStrategy.Message = Object.freeze({\n        sendCancellation(conn, id) {\n            return conn.sendNotification(CancelNotification.type, { id });\n        },\n        cleanup(_) { }\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.sendCancellation) && Is.func(candidate.cleanup);\n    }\n    CancellationSenderStrategy.is = is;\n})(CancellationSenderStrategy = exports.CancellationSenderStrategy || (exports.CancellationSenderStrategy = {}));\nvar CancellationStrategy;\n(function (CancellationStrategy) {\n    CancellationStrategy.Message = Object.freeze({\n        receiver: CancellationReceiverStrategy.Message,\n        sender: CancellationSenderStrategy.Message\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && CancellationReceiverStrategy.is(candidate.receiver) && CancellationSenderStrategy.is(candidate.sender);\n    }\n    CancellationStrategy.is = is;\n})(CancellationStrategy = exports.CancellationStrategy || (exports.CancellationStrategy = {}));\nvar MessageStrategy;\n(function (MessageStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.handleMessage);\n    }\n    MessageStrategy.is = is;\n})(MessageStrategy = exports.MessageStrategy || (exports.MessageStrategy = {}));\nvar ConnectionOptions;\n(function (ConnectionOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (CancellationStrategy.is(candidate.cancellationStrategy) || ConnectionStrategy.is(candidate.connectionStrategy) || MessageStrategy.is(candidate.messageStrategy));\n    }\n    ConnectionOptions.is = is;\n})(ConnectionOptions = exports.ConnectionOptions || (exports.ConnectionOptions = {}));\nvar ConnectionState;\n(function (ConnectionState) {\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\n})(ConnectionState || (ConnectionState = {}));\nfunction createMessageConnection(messageReader, messageWriter, _logger, options) {\n    const logger = _logger !== undefined ? _logger : exports.NullLogger;\n    let sequenceNumber = 0;\n    let notificationSequenceNumber = 0;\n    let unknownResponseSequenceNumber = 0;\n    const version = '2.0';\n    let starRequestHandler = undefined;\n    const requestHandlers = new Map();\n    let starNotificationHandler = undefined;\n    const notificationHandlers = new Map();\n    const progressHandlers = new Map();\n    let timer;\n    let messageQueue = new linkedMap_1.LinkedMap();\n    let responsePromises = new Map();\n    let knownCanceledRequests = new Set();\n    let requestTokens = new Map();\n    let trace = Trace.Off;\n    let traceFormat = TraceFormat.Text;\n    let tracer;\n    let state = ConnectionState.New;\n    const errorEmitter = new events_1.Emitter();\n    const closeEmitter = new events_1.Emitter();\n    const unhandledNotificationEmitter = new events_1.Emitter();\n    const unhandledProgressEmitter = new events_1.Emitter();\n    const disposeEmitter = new events_1.Emitter();\n    const cancellationStrategy = (options && options.cancellationStrategy) ? options.cancellationStrategy : CancellationStrategy.Message;\n    function createRequestQueueKey(id) {\n        if (id === null) {\n            throw new Error(`Can't send requests with id null since the response can't be correlated.`);\n        }\n        return 'req-' + id.toString();\n    }\n    function createResponseQueueKey(id) {\n        if (id === null) {\n            return 'res-unknown-' + (++unknownResponseSequenceNumber).toString();\n        }\n        else {\n            return 'res-' + id.toString();\n        }\n    }\n    function createNotificationQueueKey() {\n        return 'not-' + (++notificationSequenceNumber).toString();\n    }\n    function addMessageToQueue(queue, message) {\n        if (messages_1.Message.isRequest(message)) {\n            queue.set(createRequestQueueKey(message.id), message);\n        }\n        else if (messages_1.Message.isResponse(message)) {\n            queue.set(createResponseQueueKey(message.id), message);\n        }\n        else {\n            queue.set(createNotificationQueueKey(), message);\n        }\n    }\n    function cancelUndispatched(_message) {\n        return undefined;\n    }\n    function isListening() {\n        return state === ConnectionState.Listening;\n    }\n    function isClosed() {\n        return state === ConnectionState.Closed;\n    }\n    function isDisposed() {\n        return state === ConnectionState.Disposed;\n    }\n    function closeHandler() {\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\n            state = ConnectionState.Closed;\n            closeEmitter.fire(undefined);\n        }\n        // If the connection is disposed don't sent close events.\n    }\n    function readErrorHandler(error) {\n        errorEmitter.fire([error, undefined, undefined]);\n    }\n    function writeErrorHandler(data) {\n        errorEmitter.fire(data);\n    }\n    messageReader.onClose(closeHandler);\n    messageReader.onError(readErrorHandler);\n    messageWriter.onClose(closeHandler);\n    messageWriter.onError(writeErrorHandler);\n    function triggerMessageQueue() {\n        if (timer || messageQueue.size === 0) {\n            return;\n        }\n        timer = (0, ral_1.default)().timer.setImmediate(() => {\n            timer = undefined;\n            processMessageQueue();\n        });\n    }\n    function handleMessage(message) {\n        if (messages_1.Message.isRequest(message)) {\n            handleRequest(message);\n        }\n        else if (messages_1.Message.isNotification(message)) {\n            handleNotification(message);\n        }\n        else if (messages_1.Message.isResponse(message)) {\n            handleResponse(message);\n        }\n        else {\n            handleInvalidMessage(message);\n        }\n    }\n    function processMessageQueue() {\n        if (messageQueue.size === 0) {\n            return;\n        }\n        const message = messageQueue.shift();\n        try {\n            const messageStrategy = options?.messageStrategy;\n            if (MessageStrategy.is(messageStrategy)) {\n                messageStrategy.handleMessage(message, handleMessage);\n            }\n            else {\n                handleMessage(message);\n            }\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    }\n    const callback = (message) => {\n        try {\n            // We have received a cancellation message. Check if the message is still in the queue\n            // and cancel it if allowed to do so.\n            if (messages_1.Message.isNotification(message) && message.method === CancelNotification.type.method) {\n                const cancelId = message.params.id;\n                const key = createRequestQueueKey(cancelId);\n                const toCancel = messageQueue.get(key);\n                if (messages_1.Message.isRequest(toCancel)) {\n                    const strategy = options?.connectionStrategy;\n                    const response = (strategy && strategy.cancelUndispatched) ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\n                    if (response && (response.error !== undefined || response.result !== undefined)) {\n                        messageQueue.delete(key);\n                        requestTokens.delete(cancelId);\n                        response.id = toCancel.id;\n                        traceSendingResponse(response, message.method, Date.now());\n                        messageWriter.write(response).catch(() => logger.error(`Sending response for canceled message failed.`));\n                        return;\n                    }\n                }\n                const cancellationToken = requestTokens.get(cancelId);\n                // The request is already running. Cancel the token\n                if (cancellationToken !== undefined) {\n                    cancellationToken.cancel();\n                    traceReceivedNotification(message);\n                    return;\n                }\n                else {\n                    // Remember the cancel but still queue the message to\n                    // clean up state in process message.\n                    knownCanceledRequests.add(cancelId);\n                }\n            }\n            addMessageToQueue(messageQueue, message);\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    };\n    function handleRequest(requestMessage) {\n        if (isDisposed()) {\n            // we return here silently since we fired an event when the\n            // connection got disposed.\n            return;\n        }\n        function reply(resultOrError, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id\n            };\n            if (resultOrError instanceof messages_1.ResponseError) {\n                message.error = resultOrError.toJson();\n            }\n            else {\n                message.result = resultOrError === undefined ? null : resultOrError;\n            }\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        function replyError(error, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                error: error.toJson()\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        function replySuccess(result, method, startTime) {\n            // The JSON RPC defines that a response must either have a result or an error\n            // So we can't treat undefined as a valid response result.\n            if (result === undefined) {\n                result = null;\n            }\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                result: result\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        traceReceivedRequest(requestMessage);\n        const element = requestHandlers.get(requestMessage.method);\n        let type;\n        let requestHandler;\n        if (element) {\n            type = element.type;\n            requestHandler = element.handler;\n        }\n        const startTime = Date.now();\n        if (requestHandler || starRequestHandler) {\n            const tokenKey = requestMessage.id ?? String(Date.now()); //\n            const cancellationSource = IdCancellationReceiverStrategy.is(cancellationStrategy.receiver)\n                ? cancellationStrategy.receiver.createCancellationTokenSource(tokenKey)\n                : cancellationStrategy.receiver.createCancellationTokenSource(requestMessage);\n            if (requestMessage.id !== null && knownCanceledRequests.has(requestMessage.id)) {\n                cancellationSource.cancel();\n            }\n            if (requestMessage.id !== null) {\n                requestTokens.set(tokenKey, cancellationSource);\n            }\n            try {\n                let handlerResult;\n                if (requestHandler) {\n                    if (requestMessage.params === undefined) {\n                        if (type !== undefined && type.numberOfParams !== 0) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines ${type.numberOfParams} params but received none.`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(cancellationSource.token);\n                    }\n                    else if (Array.isArray(requestMessage.params)) {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byName) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by name but received parameters by position`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(...requestMessage.params, cancellationSource.token);\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by position but received parameters by name`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(requestMessage.params, cancellationSource.token);\n                    }\n                }\n                else if (starRequestHandler) {\n                    handlerResult = starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\n                }\n                const promise = handlerResult;\n                if (!handlerResult) {\n                    requestTokens.delete(tokenKey);\n                    replySuccess(handlerResult, requestMessage.method, startTime);\n                }\n                else if (promise.then) {\n                    promise.then((resultOrError) => {\n                        requestTokens.delete(tokenKey);\n                        reply(resultOrError, requestMessage.method, startTime);\n                    }, error => {\n                        requestTokens.delete(tokenKey);\n                        if (error instanceof messages_1.ResponseError) {\n                            replyError(error, requestMessage.method, startTime);\n                        }\n                        else if (error && Is.string(error.message)) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                        }\n                        else {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                        }\n                    });\n                }\n                else {\n                    requestTokens.delete(tokenKey);\n                    reply(handlerResult, requestMessage.method, startTime);\n                }\n            }\n            catch (error) {\n                requestTokens.delete(tokenKey);\n                if (error instanceof messages_1.ResponseError) {\n                    reply(error, requestMessage.method, startTime);\n                }\n                else if (error && Is.string(error.message)) {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                }\n                else {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                }\n            }\n        }\n        else {\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\n        }\n    }\n    function handleResponse(responseMessage) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        if (responseMessage.id === null) {\n            if (responseMessage.error) {\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\n            }\n            else {\n                logger.error(`Received response message without id. No further error information provided.`);\n            }\n        }\n        else {\n            const key = responseMessage.id;\n            const responsePromise = responsePromises.get(key);\n            traceReceivedResponse(responseMessage, responsePromise);\n            if (responsePromise !== undefined) {\n                responsePromises.delete(key);\n                try {\n                    if (responseMessage.error) {\n                        const error = responseMessage.error;\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\n                    }\n                    else if (responseMessage.result !== undefined) {\n                        responsePromise.resolve(responseMessage.result);\n                    }\n                    else {\n                        throw new Error('Should never happen.');\n                    }\n                }\n                catch (error) {\n                    if (error.message) {\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\n                    }\n                    else {\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\n                    }\n                }\n            }\n        }\n    }\n    function handleNotification(message) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        let type = undefined;\n        let notificationHandler;\n        if (message.method === CancelNotification.type.method) {\n            const cancelId = message.params.id;\n            knownCanceledRequests.delete(cancelId);\n            traceReceivedNotification(message);\n            return;\n        }\n        else {\n            const element = notificationHandlers.get(message.method);\n            if (element) {\n                notificationHandler = element.handler;\n                type = element.type;\n            }\n        }\n        if (notificationHandler || starNotificationHandler) {\n            try {\n                traceReceivedNotification(message);\n                if (notificationHandler) {\n                    if (message.params === undefined) {\n                        if (type !== undefined) {\n                            if (type.numberOfParams !== 0 && type.parameterStructures !== messages_1.ParameterStructures.byName) {\n                                logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received none.`);\n                            }\n                        }\n                        notificationHandler();\n                    }\n                    else if (Array.isArray(message.params)) {\n                        // There are JSON-RPC libraries that send progress message as positional params although\n                        // specified as named. So convert them if this is the case.\n                        const params = message.params;\n                        if (message.method === ProgressNotification.type.method && params.length === 2 && ProgressToken.is(params[0])) {\n                            notificationHandler({ token: params[0], value: params[1] });\n                        }\n                        else {\n                            if (type !== undefined) {\n                                if (type.parameterStructures === messages_1.ParameterStructures.byName) {\n                                    logger.error(`Notification ${message.method} defines parameters by name but received parameters by position`);\n                                }\n                                if (type.numberOfParams !== message.params.length) {\n                                    logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received ${params.length} arguments`);\n                                }\n                            }\n                            notificationHandler(...params);\n                        }\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            logger.error(`Notification ${message.method} defines parameters by position but received parameters by name`);\n                        }\n                        notificationHandler(message.params);\n                    }\n                }\n                else if (starNotificationHandler) {\n                    starNotificationHandler(message.method, message.params);\n                }\n            }\n            catch (error) {\n                if (error.message) {\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\n                }\n                else {\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\n                }\n            }\n        }\n        else {\n            unhandledNotificationEmitter.fire(message);\n        }\n    }\n    function handleInvalidMessage(message) {\n        if (!message) {\n            logger.error('Received empty message.');\n            return;\n        }\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\n        // Test whether we find an id to reject the promise\n        const responseMessage = message;\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\n            const key = responseMessage.id;\n            const responseHandler = responsePromises.get(key);\n            if (responseHandler) {\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\n            }\n        }\n    }\n    function stringifyTrace(params) {\n        if (params === undefined || params === null) {\n            return undefined;\n        }\n        switch (trace) {\n            case Trace.Verbose:\n                return JSON.stringify(params, null, 4);\n            case Trace.Compact:\n                return JSON.stringify(params);\n            default:\n                return undefined;\n        }\n    }\n    function traceSendingRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if ((trace === Trace.Verbose || trace === Trace.Compact) && message.params) {\n                data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n            }\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('send-request', message);\n        }\n    }\n    function traceSendingNotification(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.params) {\n                    data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Sending notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('send-notification', message);\n        }\n    }\n    function traceSendingResponse(message, method, startTime) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${stringifyTrace(message.error.data)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${stringifyTrace(message.result)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\n        }\n        else {\n            logLSPMessage('send-response', message);\n        }\n    }\n    function traceReceivedRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if ((trace === Trace.Verbose || trace === Trace.Compact) && message.params) {\n                data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n            }\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('receive-request', message);\n        }\n    }\n    function traceReceivedNotification(message) {\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.params) {\n                    data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Received notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('receive-notification', message);\n        }\n    }\n    function traceReceivedResponse(message, responsePromise) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${stringifyTrace(message.error.data)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${stringifyTrace(message.result)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            if (responsePromise) {\n                const error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\n            }\n            else {\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\n            }\n        }\n        else {\n            logLSPMessage('receive-response', message);\n        }\n    }\n    function logLSPMessage(type, message) {\n        if (!tracer || trace === Trace.Off) {\n            return;\n        }\n        const lspMessage = {\n            isLSPMessage: true,\n            type,\n            message,\n            timestamp: Date.now()\n        };\n        tracer.log(lspMessage);\n    }\n    function throwIfClosedOrDisposed() {\n        if (isClosed()) {\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\n        }\n        if (isDisposed()) {\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\n        }\n    }\n    function throwIfListening() {\n        if (isListening()) {\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\n        }\n    }\n    function throwIfNotListening() {\n        if (!isListening()) {\n            throw new Error('Call listen() first.');\n        }\n    }\n    function undefinedToNull(param) {\n        if (param === undefined) {\n            return null;\n        }\n        else {\n            return param;\n        }\n    }\n    function nullToUndefined(param) {\n        if (param === null) {\n            return undefined;\n        }\n        else {\n            return param;\n        }\n    }\n    function isNamedParam(param) {\n        return param !== undefined && param !== null && !Array.isArray(param) && typeof param === 'object';\n    }\n    function computeSingleParam(parameterStructures, param) {\n        switch (parameterStructures) {\n            case messages_1.ParameterStructures.auto:\n                if (isNamedParam(param)) {\n                    return nullToUndefined(param);\n                }\n                else {\n                    return [undefinedToNull(param)];\n                }\n            case messages_1.ParameterStructures.byName:\n                if (!isNamedParam(param)) {\n                    throw new Error(`Received parameters by name but param is not an object literal.`);\n                }\n                return nullToUndefined(param);\n            case messages_1.ParameterStructures.byPosition:\n                return [undefinedToNull(param)];\n            default:\n                throw new Error(`Unknown parameter structure ${parameterStructures.toString()}`);\n        }\n    }\n    function computeMessageParams(type, params) {\n        let result;\n        const numberOfParams = type.numberOfParams;\n        switch (numberOfParams) {\n            case 0:\n                result = undefined;\n                break;\n            case 1:\n                result = computeSingleParam(type.parameterStructures, params[0]);\n                break;\n            default:\n                result = [];\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\n                    result.push(undefinedToNull(params[i]));\n                }\n                if (params.length < numberOfParams) {\n                    for (let i = params.length; i < numberOfParams; i++) {\n                        result.push(null);\n                    }\n                }\n                break;\n        }\n        return result;\n    }\n    const connection = {\n        sendNotification: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            let method;\n            let messageParams;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' notification parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n            }\n            const notificationMessage = {\n                jsonrpc: version,\n                method: method,\n                params: messageParams\n            };\n            traceSendingNotification(notificationMessage);\n            return messageWriter.write(notificationMessage).catch((error) => {\n                logger.error(`Sending notification failed.`);\n                throw error;\n            });\n        },\n        onNotification: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method;\n            if (Is.func(type)) {\n                starNotificationHandler = type;\n            }\n            else if (handler) {\n                if (Is.string(type)) {\n                    method = type;\n                    notificationHandlers.set(type, { type: undefined, handler });\n                }\n                else {\n                    method = type.method;\n                    notificationHandlers.set(type.method, { type, handler });\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method !== undefined) {\n                        notificationHandlers.delete(method);\n                    }\n                    else {\n                        starNotificationHandler = undefined;\n                    }\n                }\n            };\n        },\n        onProgress: (_type, token, handler) => {\n            if (progressHandlers.has(token)) {\n                throw new Error(`Progress handler for token ${token} already registered`);\n            }\n            progressHandlers.set(token, handler);\n            return {\n                dispose: () => {\n                    progressHandlers.delete(token);\n                }\n            };\n        },\n        sendProgress: (_type, token, value) => {\n            // This should not await but simple return to ensure that we don't have another\n            // async scheduling. Otherwise one send could overtake another send.\n            return connection.sendNotification(ProgressNotification.type, { token, value });\n        },\n        onUnhandledProgress: unhandledProgressEmitter.event,\n        sendRequest: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            throwIfNotListening();\n            let method;\n            let messageParams;\n            let token = undefined;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                const last = args[args.length - 1];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                if (cancellation_1.CancellationToken.is(last)) {\n                    paramEnd = paramEnd - 1;\n                    token = last;\n                }\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' request parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n                const numberOfParams = type.numberOfParams;\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\n            }\n            const id = sequenceNumber++;\n            let disposable;\n            if (token) {\n                disposable = token.onCancellationRequested(() => {\n                    const p = cancellationStrategy.sender.sendCancellation(connection, id);\n                    if (p === undefined) {\n                        logger.log(`Received no promise from cancellation strategy when cancelling id ${id}`);\n                        return Promise.resolve();\n                    }\n                    else {\n                        return p.catch(() => {\n                            logger.log(`Sending cancellation messages for id ${id} failed`);\n                        });\n                    }\n                });\n            }\n            const requestMessage = {\n                jsonrpc: version,\n                id: id,\n                method: method,\n                params: messageParams\n            };\n            traceSendingRequest(requestMessage);\n            if (typeof cancellationStrategy.sender.enableCancellation === 'function') {\n                cancellationStrategy.sender.enableCancellation(requestMessage);\n            }\n            return new Promise(async (resolve, reject) => {\n                const resolveWithCleanup = (r) => {\n                    resolve(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable?.dispose();\n                };\n                const rejectWithCleanup = (r) => {\n                    reject(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable?.dispose();\n                };\n                const responsePromise = { method: method, timerStart: Date.now(), resolve: resolveWithCleanup, reject: rejectWithCleanup };\n                try {\n                    await messageWriter.write(requestMessage);\n                    responsePromises.set(id, responsePromise);\n                }\n                catch (error) {\n                    logger.error(`Sending request failed.`);\n                    // Writing the message failed. So we need to reject the promise.\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, error.message ? error.message : 'Unknown reason'));\n                    throw error;\n                }\n            });\n        },\n        onRequest: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method = null;\n            if (StarRequestHandler.is(type)) {\n                method = undefined;\n                starRequestHandler = type;\n            }\n            else if (Is.string(type)) {\n                method = null;\n                if (handler !== undefined) {\n                    method = type;\n                    requestHandlers.set(type, { handler: handler, type: undefined });\n                }\n            }\n            else {\n                if (handler !== undefined) {\n                    method = type.method;\n                    requestHandlers.set(type.method, { type, handler });\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method === null) {\n                        return;\n                    }\n                    if (method !== undefined) {\n                        requestHandlers.delete(method);\n                    }\n                    else {\n                        starRequestHandler = undefined;\n                    }\n                }\n            };\n        },\n        hasPendingResponse: () => {\n            return responsePromises.size > 0;\n        },\n        trace: async (_value, _tracer, sendNotificationOrTraceOptions) => {\n            let _sendNotification = false;\n            let _traceFormat = TraceFormat.Text;\n            if (sendNotificationOrTraceOptions !== undefined) {\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\n                    _sendNotification = sendNotificationOrTraceOptions;\n                }\n                else {\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\n                }\n            }\n            trace = _value;\n            traceFormat = _traceFormat;\n            if (trace === Trace.Off) {\n                tracer = undefined;\n            }\n            else {\n                tracer = _tracer;\n            }\n            if (_sendNotification && !isClosed() && !isDisposed()) {\n                await connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\n            }\n        },\n        onError: errorEmitter.event,\n        onClose: closeEmitter.event,\n        onUnhandledNotification: unhandledNotificationEmitter.event,\n        onDispose: disposeEmitter.event,\n        end: () => {\n            messageWriter.end();\n        },\n        dispose: () => {\n            if (isDisposed()) {\n                return;\n            }\n            state = ConnectionState.Disposed;\n            disposeEmitter.fire(undefined);\n            const error = new messages_1.ResponseError(messages_1.ErrorCodes.PendingResponseRejected, 'Pending response rejected since connection got disposed');\n            for (const promise of responsePromises.values()) {\n                promise.reject(error);\n            }\n            responsePromises = new Map();\n            requestTokens = new Map();\n            knownCanceledRequests = new Set();\n            messageQueue = new linkedMap_1.LinkedMap();\n            // Test for backwards compatibility\n            if (Is.func(messageWriter.dispose)) {\n                messageWriter.dispose();\n            }\n            if (Is.func(messageReader.dispose)) {\n                messageReader.dispose();\n            }\n        },\n        listen: () => {\n            throwIfClosedOrDisposed();\n            throwIfListening();\n            state = ConnectionState.Listening;\n            messageReader.listen(callback);\n        },\n        inspect: () => {\n            // eslint-disable-next-line no-console\n            (0, ral_1.default)().console.log('inspect');\n        }\n    };\n    connection.onNotification(LogTraceNotification.type, (params) => {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        const verbose = trace === Trace.Verbose || trace === Trace.Compact;\n        tracer.log(params.message, verbose ? params.verbose : undefined);\n    });\n    connection.onNotification(ProgressNotification.type, (params) => {\n        const handler = progressHandlers.get(params.token);\n        if (handler) {\n            handler(params.value);\n        }\n        else {\n            unhandledProgressEmitter.fire(params);\n        }\n    });\n    return connection;\n}\nexports.createMessageConnection = createMessageConnection;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Disposable = void 0;\nvar Disposable;\n(function (Disposable) {\n    function create(func) {\n        return {\n            dispose: func\n        };\n    }\n    Disposable.create = create;\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Emitter = exports.Event = void 0;\nconst ral_1 = require(\"./ral\");\nvar Event;\n(function (Event) {\n    const _disposable = { dispose() { } };\n    Event.None = function () { return _disposable; };\n})(Event = exports.Event || (exports.Event = {}));\nclass CallbackList {\n    add(callback, context = null, bucket) {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts.push(context);\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n    remove(callback, context = null) {\n        if (!this._callbacks) {\n            return;\n        }\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0, len = this._callbacks.length; i < len; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts[i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts.splice(i, 1);\n                    return;\n                }\n                else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n    invoke(...args) {\n        if (!this._callbacks) {\n            return [];\n        }\n        const ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\n        for (let i = 0, len = callbacks.length; i < len; i++) {\n            try {\n                ret.push(callbacks[i].apply(contexts[i], args));\n            }\n            catch (e) {\n                // eslint-disable-next-line no-console\n                (0, ral_1.default)().console.error(e);\n            }\n        }\n        return ret;\n    }\n    isEmpty() {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n    dispose() {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\nclass Emitter {\n    constructor(_options) {\n        this._options = _options;\n    }\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event() {\n        if (!this._event) {\n            this._event = (listener, thisArgs, disposables) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                const result = {\n                    dispose: () => {\n                        if (!this._callbacks) {\n                            // disposable is disposed after emitter is disposed.\n                            return;\n                        }\n                        this._callbacks.remove(listener, thisArgs);\n                        result.dispose = Emitter._noop;\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\n                            this._options.onLastListenerRemove(this);\n                        }\n                    }\n                };\n                if (Array.isArray(disposables)) {\n                    disposables.push(result);\n                }\n                return result;\n            };\n        }\n        return this._event;\n    }\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event) {\n        if (this._callbacks) {\n            this._callbacks.invoke.call(this._callbacks, event);\n        }\n    }\n    dispose() {\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n    }\n}\nexports.Emitter = Emitter;\nEmitter._noop = function () { };\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringArray = exports.array = exports.func = exports.error = exports.number = exports.string = exports.boolean = void 0;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LRUCache = exports.LinkedMap = exports.Touch = void 0;\nvar Touch;\n(function (Touch) {\n    Touch.None = 0;\n    Touch.First = 1;\n    Touch.AsOld = Touch.First;\n    Touch.Last = 2;\n    Touch.AsNew = Touch.Last;\n})(Touch = exports.Touch || (exports.Touch = {}));\nclass LinkedMap {\n    constructor() {\n        this[_a] = 'LinkedMap';\n        this._map = new Map();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state = 0;\n    }\n    clear() {\n        this._map.clear();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state++;\n    }\n    isEmpty() {\n        return !this._head && !this._tail;\n    }\n    get size() {\n        return this._size;\n    }\n    get first() {\n        return this._head?.value;\n    }\n    get last() {\n        return this._tail?.value;\n    }\n    has(key) {\n        return this._map.has(key);\n    }\n    get(key, touch = Touch.None) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        if (touch !== Touch.None) {\n            this.touch(item, touch);\n        }\n        return item.value;\n    }\n    set(key, value, touch = Touch.None) {\n        let item = this._map.get(key);\n        if (item) {\n            item.value = value;\n            if (touch !== Touch.None) {\n                this.touch(item, touch);\n            }\n        }\n        else {\n            item = { key, value, next: undefined, previous: undefined };\n            switch (touch) {\n                case Touch.None:\n                    this.addItemLast(item);\n                    break;\n                case Touch.First:\n                    this.addItemFirst(item);\n                    break;\n                case Touch.Last:\n                    this.addItemLast(item);\n                    break;\n                default:\n                    this.addItemLast(item);\n                    break;\n            }\n            this._map.set(key, item);\n            this._size++;\n        }\n        return this;\n    }\n    delete(key) {\n        return !!this.remove(key);\n    }\n    remove(key) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        this._map.delete(key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    shift() {\n        if (!this._head && !this._tail) {\n            return undefined;\n        }\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        const item = this._head;\n        this._map.delete(item.key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    forEach(callbackfn, thisArg) {\n        const state = this._state;\n        let current = this._head;\n        while (current) {\n            if (thisArg) {\n                callbackfn.bind(thisArg)(current.value, current.key, this);\n            }\n            else {\n                callbackfn(current.value, current.key, this);\n            }\n            if (this._state !== state) {\n                throw new Error(`LinkedMap got modified during iteration.`);\n            }\n            current = current.next;\n        }\n    }\n    keys() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.key, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    values() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.value, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    entries() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: [current.key, current.value], done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    [(_a = Symbol.toStringTag, Symbol.iterator)]() {\n        return this.entries();\n    }\n    trimOld(newSize) {\n        if (newSize >= this.size) {\n            return;\n        }\n        if (newSize === 0) {\n            this.clear();\n            return;\n        }\n        let current = this._head;\n        let currentSize = this.size;\n        while (current && currentSize > newSize) {\n            this._map.delete(current.key);\n            current = current.next;\n            currentSize--;\n        }\n        this._head = current;\n        this._size = currentSize;\n        if (current) {\n            current.previous = undefined;\n        }\n        this._state++;\n    }\n    addItemFirst(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._tail = item;\n        }\n        else if (!this._head) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.next = this._head;\n            this._head.previous = item;\n        }\n        this._head = item;\n        this._state++;\n    }\n    addItemLast(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._head = item;\n        }\n        else if (!this._tail) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.previous = this._tail;\n            this._tail.next = item;\n        }\n        this._tail = item;\n        this._state++;\n    }\n    removeItem(item) {\n        if (item === this._head && item === this._tail) {\n            this._head = undefined;\n            this._tail = undefined;\n        }\n        else if (item === this._head) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.next) {\n                throw new Error('Invalid list');\n            }\n            item.next.previous = undefined;\n            this._head = item.next;\n        }\n        else if (item === this._tail) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.previous) {\n                throw new Error('Invalid list');\n            }\n            item.previous.next = undefined;\n            this._tail = item.previous;\n        }\n        else {\n            const next = item.next;\n            const previous = item.previous;\n            if (!next || !previous) {\n                throw new Error('Invalid list');\n            }\n            next.previous = previous;\n            previous.next = next;\n        }\n        item.next = undefined;\n        item.previous = undefined;\n        this._state++;\n    }\n    touch(item, touch) {\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\n            return;\n        }\n        if (touch === Touch.First) {\n            if (item === this._head) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item\n            if (item === this._tail) {\n                // previous must be defined since item was not head but is tail\n                // So there are more than on item in the map\n                previous.next = undefined;\n                this._tail = previous;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            // Insert the node at head\n            item.previous = undefined;\n            item.next = this._head;\n            this._head.previous = item;\n            this._head = item;\n            this._state++;\n        }\n        else if (touch === Touch.Last) {\n            if (item === this._tail) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item.\n            if (item === this._head) {\n                // next must be defined since item was not tail but is head\n                // So there are more than on item in the map\n                next.previous = undefined;\n                this._head = next;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            item.next = undefined;\n            item.previous = this._tail;\n            this._tail.next = item;\n            this._tail = item;\n            this._state++;\n        }\n    }\n    toJSON() {\n        const data = [];\n        this.forEach((value, key) => {\n            data.push([key, value]);\n        });\n        return data;\n    }\n    fromJSON(data) {\n        this.clear();\n        for (const [key, value] of data) {\n            this.set(key, value);\n        }\n    }\n}\nexports.LinkedMap = LinkedMap;\nclass LRUCache extends LinkedMap {\n    constructor(limit, ratio = 1) {\n        super();\n        this._limit = limit;\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n    }\n    get limit() {\n        return this._limit;\n    }\n    set limit(limit) {\n        this._limit = limit;\n        this.checkTrim();\n    }\n    get ratio() {\n        return this._ratio;\n    }\n    set ratio(ratio) {\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n        this.checkTrim();\n    }\n    get(key, touch = Touch.AsNew) {\n        return super.get(key, touch);\n    }\n    peek(key) {\n        return super.get(key, Touch.None);\n    }\n    set(key, value) {\n        super.set(key, value, Touch.Last);\n        this.checkTrim();\n        return this;\n    }\n    checkTrim() {\n        if (this.size > this._limit) {\n            this.trimOld(Math.round(this._limit * this._ratio));\n        }\n    }\n}\nexports.LRUCache = LRUCache;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbstractMessageBuffer = void 0;\nconst CR = 13;\nconst LF = 10;\nconst CRLF = '\\r\\n';\nclass AbstractMessageBuffer {\n    constructor(encoding = 'utf-8') {\n        this._encoding = encoding;\n        this._chunks = [];\n        this._totalLength = 0;\n    }\n    get encoding() {\n        return this._encoding;\n    }\n    append(chunk) {\n        const toAppend = typeof chunk === 'string' ? this.fromString(chunk, this._encoding) : chunk;\n        this._chunks.push(toAppend);\n        this._totalLength += toAppend.byteLength;\n    }\n    tryReadHeaders(lowerCaseKeys = false) {\n        if (this._chunks.length === 0) {\n            return undefined;\n        }\n        let state = 0;\n        let chunkIndex = 0;\n        let offset = 0;\n        let chunkBytesRead = 0;\n        row: while (chunkIndex < this._chunks.length) {\n            const chunk = this._chunks[chunkIndex];\n            offset = 0;\n            column: while (offset < chunk.length) {\n                const value = chunk[offset];\n                switch (value) {\n                    case CR:\n                        switch (state) {\n                            case 0:\n                                state = 1;\n                                break;\n                            case 2:\n                                state = 3;\n                                break;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    case LF:\n                        switch (state) {\n                            case 1:\n                                state = 2;\n                                break;\n                            case 3:\n                                state = 4;\n                                offset++;\n                                break row;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    default:\n                        state = 0;\n                }\n                offset++;\n            }\n            chunkBytesRead += chunk.byteLength;\n            chunkIndex++;\n        }\n        if (state !== 4) {\n            return undefined;\n        }\n        // The buffer contains the two CRLF at the end. So we will\n        // have two empty lines after the split at the end as well.\n        const buffer = this._read(chunkBytesRead + offset);\n        const result = new Map();\n        const headers = this.toString(buffer, 'ascii').split(CRLF);\n        if (headers.length < 2) {\n            return result;\n        }\n        for (let i = 0; i < headers.length - 2; i++) {\n            const header = headers[i];\n            const index = header.indexOf(':');\n            if (index === -1) {\n                throw new Error('Message header must separate key and value using :');\n            }\n            const key = header.substr(0, index);\n            const value = header.substr(index + 1).trim();\n            result.set(lowerCaseKeys ? key.toLowerCase() : key, value);\n        }\n        return result;\n    }\n    tryReadBody(length) {\n        if (this._totalLength < length) {\n            return undefined;\n        }\n        return this._read(length);\n    }\n    get numberOfBytes() {\n        return this._totalLength;\n    }\n    _read(byteCount) {\n        if (byteCount === 0) {\n            return this.emptyBuffer();\n        }\n        if (byteCount > this._totalLength) {\n            throw new Error(`Cannot read so many bytes!`);\n        }\n        if (this._chunks[0].byteLength === byteCount) {\n            // super fast path, precisely first chunk must be returned\n            const chunk = this._chunks[0];\n            this._chunks.shift();\n            this._totalLength -= byteCount;\n            return this.asNative(chunk);\n        }\n        if (this._chunks[0].byteLength > byteCount) {\n            // fast path, the reading is entirely within the first chunk\n            const chunk = this._chunks[0];\n            const result = this.asNative(chunk, byteCount);\n            this._chunks[0] = chunk.slice(byteCount);\n            this._totalLength -= byteCount;\n            return result;\n        }\n        const result = this.allocNative(byteCount);\n        let resultOffset = 0;\n        let chunkIndex = 0;\n        while (byteCount > 0) {\n            const chunk = this._chunks[chunkIndex];\n            if (chunk.byteLength > byteCount) {\n                // this chunk will survive\n                const chunkPart = chunk.slice(0, byteCount);\n                result.set(chunkPart, resultOffset);\n                resultOffset += byteCount;\n                this._chunks[chunkIndex] = chunk.slice(byteCount);\n                this._totalLength -= byteCount;\n                byteCount -= byteCount;\n            }\n            else {\n                // this chunk will be entirely read\n                result.set(chunk, resultOffset);\n                resultOffset += chunk.byteLength;\n                this._chunks.shift();\n                this._totalLength -= chunk.byteLength;\n                byteCount -= chunk.byteLength;\n            }\n        }\n        return result;\n    }\n}\nexports.AbstractMessageBuffer = AbstractMessageBuffer;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nconst semaphore_1 = require(\"./semaphore\");\nvar MessageReader;\n(function (MessageReader) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\n    }\n    MessageReader.is = is;\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\nclass AbstractMessageReader {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n        this.partialMessageEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error) {\n        this.errorEmitter.fire(this.asError(error));\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    get onPartialMessage() {\n        return this.partialMessageEmitter.event;\n    }\n    firePartialMessage(info) {\n        this.partialMessageEmitter.fire(info);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageReader = AbstractMessageReader;\nvar ResolvedMessageReaderOptions;\n(function (ResolvedMessageReaderOptions) {\n    function fromOptions(options) {\n        let charset;\n        let result;\n        let contentDecoder;\n        const contentDecoders = new Map();\n        let contentTypeDecoder;\n        const contentTypeDecoders = new Map();\n        if (options === undefined || typeof options === 'string') {\n            charset = options ?? 'utf-8';\n        }\n        else {\n            charset = options.charset ?? 'utf-8';\n            if (options.contentDecoder !== undefined) {\n                contentDecoder = options.contentDecoder;\n                contentDecoders.set(contentDecoder.name, contentDecoder);\n            }\n            if (options.contentDecoders !== undefined) {\n                for (const decoder of options.contentDecoders) {\n                    contentDecoders.set(decoder.name, decoder);\n                }\n            }\n            if (options.contentTypeDecoder !== undefined) {\n                contentTypeDecoder = options.contentTypeDecoder;\n                contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n            }\n            if (options.contentTypeDecoders !== undefined) {\n                for (const decoder of options.contentTypeDecoders) {\n                    contentTypeDecoders.set(decoder.name, decoder);\n                }\n            }\n        }\n        if (contentTypeDecoder === undefined) {\n            contentTypeDecoder = (0, ral_1.default)().applicationJson.decoder;\n            contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n        }\n        return { charset, contentDecoder, contentDecoders, contentTypeDecoder, contentTypeDecoders };\n    }\n    ResolvedMessageReaderOptions.fromOptions = fromOptions;\n})(ResolvedMessageReaderOptions || (ResolvedMessageReaderOptions = {}));\nclass ReadableStreamMessageReader extends AbstractMessageReader {\n    constructor(readable, options) {\n        super();\n        this.readable = readable;\n        this.options = ResolvedMessageReaderOptions.fromOptions(options);\n        this.buffer = (0, ral_1.default)().messageBuffer.create(this.options.charset);\n        this._partialMessageTimeout = 10000;\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.readSemaphore = new semaphore_1.Semaphore(1);\n    }\n    set partialMessageTimeout(timeout) {\n        this._partialMessageTimeout = timeout;\n    }\n    get partialMessageTimeout() {\n        return this._partialMessageTimeout;\n    }\n    listen(callback) {\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.partialMessageTimer = undefined;\n        this.callback = callback;\n        const result = this.readable.onData((data) => {\n            this.onData(data);\n        });\n        this.readable.onError((error) => this.fireError(error));\n        this.readable.onClose(() => this.fireClose());\n        return result;\n    }\n    onData(data) {\n        this.buffer.append(data);\n        while (true) {\n            if (this.nextMessageLength === -1) {\n                const headers = this.buffer.tryReadHeaders(true);\n                if (!headers) {\n                    return;\n                }\n                const contentLength = headers.get('content-length');\n                if (!contentLength) {\n                    this.fireError(new Error('Header must provide a Content-Length property.'));\n                    return;\n                }\n                const length = parseInt(contentLength);\n                if (isNaN(length)) {\n                    this.fireError(new Error('Content-Length value must be a number.'));\n                    return;\n                }\n                this.nextMessageLength = length;\n            }\n            const body = this.buffer.tryReadBody(this.nextMessageLength);\n            if (body === undefined) {\n                /** We haven't received the full message yet. */\n                this.setPartialMessageTimer();\n                return;\n            }\n            this.clearPartialMessageTimer();\n            this.nextMessageLength = -1;\n            // Make sure that we convert one received message after the\n            // other. Otherwise it could happen that a decoding of a second\n            // smaller message finished before the decoding of a first larger\n            // message and then we would deliver the second message first.\n            this.readSemaphore.lock(async () => {\n                const bytes = this.options.contentDecoder !== undefined\n                    ? await this.options.contentDecoder.decode(body)\n                    : body;\n                const message = await this.options.contentTypeDecoder.decode(bytes, this.options);\n                this.callback(message);\n            }).catch((error) => {\n                this.fireError(error);\n            });\n        }\n    }\n    clearPartialMessageTimer() {\n        if (this.partialMessageTimer) {\n            this.partialMessageTimer.dispose();\n            this.partialMessageTimer = undefined;\n        }\n    }\n    setPartialMessageTimer() {\n        this.clearPartialMessageTimer();\n        if (this._partialMessageTimeout <= 0) {\n            return;\n        }\n        this.partialMessageTimer = (0, ral_1.default)().timer.setTimeout((token, timeout) => {\n            this.partialMessageTimer = undefined;\n            if (token === this.messageToken) {\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\n                this.setPartialMessageTimer();\n            }\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\n    }\n}\nexports.ReadableStreamMessageReader = ReadableStreamMessageReader;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst semaphore_1 = require(\"./semaphore\");\nconst events_1 = require(\"./events\");\nconst ContentLength = 'Content-Length: ';\nconst CRLF = '\\r\\n';\nvar MessageWriter;\n(function (MessageWriter) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\n            Is.func(candidate.onError) && Is.func(candidate.write);\n    }\n    MessageWriter.is = is;\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\nclass AbstractMessageWriter {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error, message, count) {\n        this.errorEmitter.fire([this.asError(error), message, count]);\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageWriter = AbstractMessageWriter;\nvar ResolvedMessageWriterOptions;\n(function (ResolvedMessageWriterOptions) {\n    function fromOptions(options) {\n        if (options === undefined || typeof options === 'string') {\n            return { charset: options ?? 'utf-8', contentTypeEncoder: (0, ral_1.default)().applicationJson.encoder };\n        }\n        else {\n            return { charset: options.charset ?? 'utf-8', contentEncoder: options.contentEncoder, contentTypeEncoder: options.contentTypeEncoder ?? (0, ral_1.default)().applicationJson.encoder };\n        }\n    }\n    ResolvedMessageWriterOptions.fromOptions = fromOptions;\n})(ResolvedMessageWriterOptions || (ResolvedMessageWriterOptions = {}));\nclass WriteableStreamMessageWriter extends AbstractMessageWriter {\n    constructor(writable, options) {\n        super();\n        this.writable = writable;\n        this.options = ResolvedMessageWriterOptions.fromOptions(options);\n        this.errorCount = 0;\n        this.writeSemaphore = new semaphore_1.Semaphore(1);\n        this.writable.onError((error) => this.fireError(error));\n        this.writable.onClose(() => this.fireClose());\n    }\n    async write(msg) {\n        return this.writeSemaphore.lock(async () => {\n            const payload = this.options.contentTypeEncoder.encode(msg, this.options).then((buffer) => {\n                if (this.options.contentEncoder !== undefined) {\n                    return this.options.contentEncoder.encode(buffer);\n                }\n                else {\n                    return buffer;\n                }\n            });\n            return payload.then((buffer) => {\n                const headers = [];\n                headers.push(ContentLength, buffer.byteLength.toString(), CRLF);\n                headers.push(CRLF);\n                return this.doWrite(msg, headers, buffer);\n            }, (error) => {\n                this.fireError(error);\n                throw error;\n            });\n        });\n    }\n    async doWrite(msg, headers, data) {\n        try {\n            await this.writable.write(headers.join(''), 'ascii');\n            return this.writable.write(data);\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n        this.writable.end();\n    }\n}\nexports.WriteableStreamMessageWriter = WriteableStreamMessageWriter;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Message = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType = exports.RequestType0 = exports.AbstractMessageSignature = exports.ParameterStructures = exports.ResponseError = exports.ErrorCodes = void 0;\nconst is = require(\"./is\");\n/**\n * Predefined error codes.\n */\nvar ErrorCodes;\n(function (ErrorCodes) {\n    // Defined by JSON RPC\n    ErrorCodes.ParseError = -32700;\n    ErrorCodes.InvalidRequest = -32600;\n    ErrorCodes.MethodNotFound = -32601;\n    ErrorCodes.InvalidParams = -32602;\n    ErrorCodes.InternalError = -32603;\n    /**\n     * This is the start range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code. No application error codes should\n     * be defined between the start and end range. For backwards\n     * compatibility the `ServerNotInitialized` and the `UnknownErrorCode`\n     * are left in the range.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeStart = -32099;\n    /** @deprecated use  jsonrpcReservedErrorRangeStart */\n    ErrorCodes.serverErrorStart = -32099;\n    /**\n     * An error occurred when write a message to the transport layer.\n     */\n    ErrorCodes.MessageWriteError = -32099;\n    /**\n     * An error occurred when reading a message from the transport layer.\n     */\n    ErrorCodes.MessageReadError = -32098;\n    /**\n     * The connection got disposed or lost and all pending responses got\n     * rejected.\n     */\n    ErrorCodes.PendingResponseRejected = -32097;\n    /**\n     * The connection is inactive and a use of it failed.\n     */\n    ErrorCodes.ConnectionInactive = -32096;\n    /**\n     * Error code indicating that a server received a notification or\n     * request before the server has received the `initialize` request.\n     */\n    ErrorCodes.ServerNotInitialized = -32002;\n    ErrorCodes.UnknownErrorCode = -32001;\n    /**\n     * This is the end range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeEnd = -32000;\n    /** @deprecated use  jsonrpcReservedErrorRangeEnd */\n    ErrorCodes.serverErrorEnd = -32000;\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\n/**\n * An error object return in a response in case a request\n * has failed.\n */\nclass ResponseError extends Error {\n    constructor(code, message, data) {\n        super(message);\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\n        this.data = data;\n        Object.setPrototypeOf(this, ResponseError.prototype);\n    }\n    toJson() {\n        const result = {\n            code: this.code,\n            message: this.message\n        };\n        if (this.data !== undefined) {\n            result.data = this.data;\n        }\n        return result;\n    }\n}\nexports.ResponseError = ResponseError;\nclass ParameterStructures {\n    constructor(kind) {\n        this.kind = kind;\n    }\n    static is(value) {\n        return value === ParameterStructures.auto || value === ParameterStructures.byName || value === ParameterStructures.byPosition;\n    }\n    toString() {\n        return this.kind;\n    }\n}\nexports.ParameterStructures = ParameterStructures;\n/**\n * The parameter structure is automatically inferred on the number of parameters\n * and the parameter type in case of a single param.\n */\nParameterStructures.auto = new ParameterStructures('auto');\n/**\n * Forces `byPosition` parameter structure. This is useful if you have a single\n * parameter which has a literal type.\n */\nParameterStructures.byPosition = new ParameterStructures('byPosition');\n/**\n * Forces `byName` parameter structure. This is only useful when having a single\n * parameter. The library will report errors if used with a different number of\n * parameters.\n */\nParameterStructures.byName = new ParameterStructures('byName');\n/**\n * An abstract implementation of a MessageType.\n */\nclass AbstractMessageSignature {\n    constructor(method, numberOfParams) {\n        this.method = method;\n        this.numberOfParams = numberOfParams;\n    }\n    get parameterStructures() {\n        return ParameterStructures.auto;\n    }\n}\nexports.AbstractMessageSignature = AbstractMessageSignature;\n/**\n * Classes to type request response pairs\n */\nclass RequestType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.RequestType0 = RequestType0;\nclass RequestType extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType = RequestType;\nclass RequestType1 extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType1 = RequestType1;\nclass RequestType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.RequestType2 = RequestType2;\nclass RequestType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.RequestType3 = RequestType3;\nclass RequestType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.RequestType4 = RequestType4;\nclass RequestType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.RequestType5 = RequestType5;\nclass RequestType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.RequestType6 = RequestType6;\nclass RequestType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.RequestType7 = RequestType7;\nclass RequestType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.RequestType8 = RequestType8;\nclass RequestType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.RequestType9 = RequestType9;\nclass NotificationType extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType = NotificationType;\nclass NotificationType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.NotificationType0 = NotificationType0;\nclass NotificationType1 extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType1 = NotificationType1;\nclass NotificationType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.NotificationType2 = NotificationType2;\nclass NotificationType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.NotificationType3 = NotificationType3;\nclass NotificationType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.NotificationType4 = NotificationType4;\nclass NotificationType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.NotificationType5 = NotificationType5;\nclass NotificationType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.NotificationType6 = NotificationType6;\nclass NotificationType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.NotificationType7 = NotificationType7;\nclass NotificationType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.NotificationType8 = NotificationType8;\nclass NotificationType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.NotificationType9 = NotificationType9;\nvar Message;\n(function (Message) {\n    /**\n     * Tests if the given message is a request message\n     */\n    function isRequest(message) {\n        const candidate = message;\n        return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\n    }\n    Message.isRequest = isRequest;\n    /**\n     * Tests if the given message is a notification message\n     */\n    function isNotification(message) {\n        const candidate = message;\n        return candidate && is.string(candidate.method) && message.id === void 0;\n    }\n    Message.isNotification = isNotification;\n    /**\n     * Tests if the given message is a response message\n     */\n    function isResponse(message) {\n        const candidate = message;\n        return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\n    }\n    Message.isResponse = isResponse;\n})(Message = exports.Message || (exports.Message = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nlet _ral;\nfunction RAL() {\n    if (_ral === undefined) {\n        throw new Error(`No runtime abstraction layer installed`);\n    }\n    return _ral;\n}\n(function (RAL) {\n    function install(ral) {\n        if (ral === undefined) {\n            throw new Error(`No runtime abstraction layer provided`);\n        }\n        _ral = ral;\n    }\n    RAL.install = install;\n})(RAL || (RAL = {}));\nexports.default = RAL;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Semaphore = void 0;\nconst ral_1 = require(\"./ral\");\nclass Semaphore {\n    constructor(capacity = 1) {\n        if (capacity <= 0) {\n            throw new Error('Capacity must be greater than 0');\n        }\n        this._capacity = capacity;\n        this._active = 0;\n        this._waiting = [];\n    }\n    lock(thunk) {\n        return new Promise((resolve, reject) => {\n            this._waiting.push({ thunk, resolve, reject });\n            this.runNext();\n        });\n    }\n    get active() {\n        return this._active;\n    }\n    runNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        (0, ral_1.default)().timer.setImmediate(() => this.doRunNext());\n    }\n    doRunNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        const next = this._waiting.shift();\n        this._active++;\n        if (this._active > this._capacity) {\n            throw new Error(`To many thunks active`);\n        }\n        try {\n            const result = next.thunk();\n            if (result instanceof Promise) {\n                result.then((value) => {\n                    this._active--;\n                    next.resolve(value);\n                    this.runNext();\n                }, (err) => {\n                    this._active--;\n                    next.reject(err);\n                    this.runNext();\n                });\n            }\n            else {\n                this._active--;\n                next.resolve(result);\n                this.runNext();\n            }\n        }\n        catch (err) {\n            this._active--;\n            next.reject(err);\n            this.runNext();\n        }\n    }\n}\nexports.Semaphore = Semaphore;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SharedArrayReceiverStrategy = exports.SharedArraySenderStrategy = void 0;\nconst cancellation_1 = require(\"./cancellation\");\nvar CancellationState;\n(function (CancellationState) {\n    CancellationState.Continue = 0;\n    CancellationState.Cancelled = 1;\n})(CancellationState || (CancellationState = {}));\nclass SharedArraySenderStrategy {\n    constructor() {\n        this.buffers = new Map();\n    }\n    enableCancellation(request) {\n        if (request.id === null) {\n            return;\n        }\n        const buffer = new SharedArrayBuffer(4);\n        const data = new Int32Array(buffer, 0, 1);\n        data[0] = CancellationState.Continue;\n        this.buffers.set(request.id, buffer);\n        request.$cancellationData = buffer;\n    }\n    async sendCancellation(_conn, id) {\n        const buffer = this.buffers.get(id);\n        if (buffer === undefined) {\n            return;\n        }\n        const data = new Int32Array(buffer, 0, 1);\n        Atomics.store(data, 0, CancellationState.Cancelled);\n    }\n    cleanup(id) {\n        this.buffers.delete(id);\n    }\n    dispose() {\n        this.buffers.clear();\n    }\n}\nexports.SharedArraySenderStrategy = SharedArraySenderStrategy;\nclass SharedArrayBufferCancellationToken {\n    constructor(buffer) {\n        this.data = new Int32Array(buffer, 0, 1);\n    }\n    get isCancellationRequested() {\n        return Atomics.load(this.data, 0) === CancellationState.Cancelled;\n    }\n    get onCancellationRequested() {\n        throw new Error(`Cancellation over SharedArrayBuffer doesn't support cancellation events`);\n    }\n}\nclass SharedArrayBufferCancellationTokenSource {\n    constructor(buffer) {\n        this.token = new SharedArrayBufferCancellationToken(buffer);\n    }\n    cancel() {\n    }\n    dispose() {\n    }\n}\nclass SharedArrayReceiverStrategy {\n    constructor() {\n        this.kind = 'request';\n    }\n    createCancellationTokenSource(request) {\n        const buffer = request.$cancellationData;\n        if (buffer === undefined) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n        return new SharedArrayBufferCancellationTokenSource(buffer);\n    }\n}\nexports.SharedArrayReceiverStrategy = SharedArrayReceiverStrategy;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createMessageConnection = exports.createServerSocketTransport = exports.createClientSocketTransport = exports.createServerPipeTransport = exports.createClientPipeTransport = exports.generateRandomPipeName = exports.StreamMessageWriter = exports.StreamMessageReader = exports.SocketMessageWriter = exports.SocketMessageReader = exports.PortMessageWriter = exports.PortMessageReader = exports.IPCMessageWriter = exports.IPCMessageReader = void 0;\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\nconst ril_1 = require(\"./ril\");\n// Install the node runtime abstract.\nril_1.default.install();\nconst path = require(\"path\");\nconst os = require(\"os\");\nconst crypto_1 = require(\"crypto\");\nconst net_1 = require(\"net\");\nconst api_1 = require(\"../common/api\");\n__exportStar(require(\"../common/api\"), exports);\nclass IPCMessageReader extends api_1.AbstractMessageReader {\n    constructor(process) {\n        super();\n        this.process = process;\n        let eventEmitter = this.process;\n        eventEmitter.on('error', (error) => this.fireError(error));\n        eventEmitter.on('close', () => this.fireClose());\n    }\n    listen(callback) {\n        this.process.on('message', callback);\n        return api_1.Disposable.create(() => this.process.off('message', callback));\n    }\n}\nexports.IPCMessageReader = IPCMessageReader;\nclass IPCMessageWriter extends api_1.AbstractMessageWriter {\n    constructor(process) {\n        super();\n        this.process = process;\n        this.errorCount = 0;\n        const eventEmitter = this.process;\n        eventEmitter.on('error', (error) => this.fireError(error));\n        eventEmitter.on('close', () => this.fireClose);\n    }\n    write(msg) {\n        try {\n            if (typeof this.process.send === 'function') {\n                this.process.send(msg, undefined, undefined, (error) => {\n                    if (error) {\n                        this.errorCount++;\n                        this.handleError(error, msg);\n                    }\n                    else {\n                        this.errorCount = 0;\n                    }\n                });\n            }\n            return Promise.resolve();\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n    }\n}\nexports.IPCMessageWriter = IPCMessageWriter;\nclass PortMessageReader extends api_1.AbstractMessageReader {\n    constructor(port) {\n        super();\n        this.onData = new api_1.Emitter;\n        port.on('close', () => this.fireClose);\n        port.on('error', (error) => this.fireError(error));\n        port.on('message', (message) => {\n            this.onData.fire(message);\n        });\n    }\n    listen(callback) {\n        return this.onData.event(callback);\n    }\n}\nexports.PortMessageReader = PortMessageReader;\nclass PortMessageWriter extends api_1.AbstractMessageWriter {\n    constructor(port) {\n        super();\n        this.port = port;\n        this.errorCount = 0;\n        port.on('close', () => this.fireClose());\n        port.on('error', (error) => this.fireError(error));\n    }\n    write(msg) {\n        try {\n            this.port.postMessage(msg);\n            return Promise.resolve();\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n    }\n}\nexports.PortMessageWriter = PortMessageWriter;\nclass SocketMessageReader extends api_1.ReadableStreamMessageReader {\n    constructor(socket, encoding = 'utf-8') {\n        super((0, ril_1.default)().stream.asReadableStream(socket), encoding);\n    }\n}\nexports.SocketMessageReader = SocketMessageReader;\nclass SocketMessageWriter extends api_1.WriteableStreamMessageWriter {\n    constructor(socket, options) {\n        super((0, ril_1.default)().stream.asWritableStream(socket), options);\n        this.socket = socket;\n    }\n    dispose() {\n        super.dispose();\n        this.socket.destroy();\n    }\n}\nexports.SocketMessageWriter = SocketMessageWriter;\nclass StreamMessageReader extends api_1.ReadableStreamMessageReader {\n    constructor(readable, encoding) {\n        super((0, ril_1.default)().stream.asReadableStream(readable), encoding);\n    }\n}\nexports.StreamMessageReader = StreamMessageReader;\nclass StreamMessageWriter extends api_1.WriteableStreamMessageWriter {\n    constructor(writable, options) {\n        super((0, ril_1.default)().stream.asWritableStream(writable), options);\n    }\n}\nexports.StreamMessageWriter = StreamMessageWriter;\nconst XDG_RUNTIME_DIR = process.env['XDG_RUNTIME_DIR'];\nconst safeIpcPathLengths = new Map([\n    ['linux', 107],\n    ['darwin', 103]\n]);\nfunction generateRandomPipeName() {\n    const randomSuffix = (0, crypto_1.randomBytes)(21).toString('hex');\n    if (process.platform === 'win32') {\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\n    }\n    let result;\n    if (XDG_RUNTIME_DIR) {\n        result = path.join(XDG_RUNTIME_DIR, `vscode-ipc-${randomSuffix}.sock`);\n    }\n    else {\n        result = path.join(os.tmpdir(), `vscode-${randomSuffix}.sock`);\n    }\n    const limit = safeIpcPathLengths.get(process.platform);\n    if (limit !== undefined && result.length > limit) {\n        (0, ril_1.default)().console.warn(`WARNING: IPC handle \"${result}\" is longer than ${limit} characters.`);\n    }\n    return result;\n}\nexports.generateRandomPipeName = generateRandomPipeName;\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\n    let connectResolve;\n    const connected = new Promise((resolve, _reject) => {\n        connectResolve = resolve;\n    });\n    return new Promise((resolve, reject) => {\n        let server = (0, net_1.createServer)((socket) => {\n            server.close();\n            connectResolve([\n                new SocketMessageReader(socket, encoding),\n                new SocketMessageWriter(socket, encoding)\n            ]);\n        });\n        server.on('error', reject);\n        server.listen(pipeName, () => {\n            server.removeListener('error', reject);\n            resolve({\n                onConnected: () => { return connected; }\n            });\n        });\n    });\n}\nexports.createClientPipeTransport = createClientPipeTransport;\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\n    const socket = (0, net_1.createConnection)(pipeName);\n    return [\n        new SocketMessageReader(socket, encoding),\n        new SocketMessageWriter(socket, encoding)\n    ];\n}\nexports.createServerPipeTransport = createServerPipeTransport;\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\n    let connectResolve;\n    const connected = new Promise((resolve, _reject) => {\n        connectResolve = resolve;\n    });\n    return new Promise((resolve, reject) => {\n        const server = (0, net_1.createServer)((socket) => {\n            server.close();\n            connectResolve([\n                new SocketMessageReader(socket, encoding),\n                new SocketMessageWriter(socket, encoding)\n            ]);\n        });\n        server.on('error', reject);\n        server.listen(port, '127.0.0.1', () => {\n            server.removeListener('error', reject);\n            resolve({\n                onConnected: () => { return connected; }\n            });\n        });\n    });\n}\nexports.createClientSocketTransport = createClientSocketTransport;\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\n    const socket = (0, net_1.createConnection)(port, '127.0.0.1');\n    return [\n        new SocketMessageReader(socket, encoding),\n        new SocketMessageWriter(socket, encoding)\n    ];\n}\nexports.createServerSocketTransport = createServerSocketTransport;\nfunction isReadableStream(value) {\n    const candidate = value;\n    return candidate.read !== undefined && candidate.addListener !== undefined;\n}\nfunction isWritableStream(value) {\n    const candidate = value;\n    return candidate.write !== undefined && candidate.addListener !== undefined;\n}\nfunction createMessageConnection(input, output, logger, options) {\n    if (!logger) {\n        logger = api_1.NullLogger;\n    }\n    const reader = isReadableStream(input) ? new StreamMessageReader(input) : input;\n    const writer = isWritableStream(output) ? new StreamMessageWriter(output) : output;\n    if (api_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return (0, api_1.createMessageConnection)(reader, writer, logger, options);\n}\nexports.createMessageConnection = createMessageConnection;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"util\");\nconst api_1 = require(\"../common/api\");\nclass MessageBuffer extends api_1.AbstractMessageBuffer {\n    constructor(encoding = 'utf-8') {\n        super(encoding);\n    }\n    emptyBuffer() {\n        return MessageBuffer.emptyBuffer;\n    }\n    fromString(value, encoding) {\n        return Buffer.from(value, encoding);\n    }\n    toString(value, encoding) {\n        if (value instanceof Buffer) {\n            return value.toString(encoding);\n        }\n        else {\n            return new util_1.TextDecoder(encoding).decode(value);\n        }\n    }\n    asNative(buffer, length) {\n        if (length === undefined) {\n            return buffer instanceof Buffer ? buffer : Buffer.from(buffer);\n        }\n        else {\n            return buffer instanceof Buffer ? buffer.slice(0, length) : Buffer.from(buffer, 0, length);\n        }\n    }\n    allocNative(length) {\n        return Buffer.allocUnsafe(length);\n    }\n}\nMessageBuffer.emptyBuffer = Buffer.allocUnsafe(0);\nclass ReadableStreamWrapper {\n    constructor(stream) {\n        this.stream = stream;\n    }\n    onClose(listener) {\n        this.stream.on('close', listener);\n        return api_1.Disposable.create(() => this.stream.off('close', listener));\n    }\n    onError(listener) {\n        this.stream.on('error', listener);\n        return api_1.Disposable.create(() => this.stream.off('error', listener));\n    }\n    onEnd(listener) {\n        this.stream.on('end', listener);\n        return api_1.Disposable.create(() => this.stream.off('end', listener));\n    }\n    onData(listener) {\n        this.stream.on('data', listener);\n        return api_1.Disposable.create(() => this.stream.off('data', listener));\n    }\n}\nclass WritableStreamWrapper {\n    constructor(stream) {\n        this.stream = stream;\n    }\n    onClose(listener) {\n        this.stream.on('close', listener);\n        return api_1.Disposable.create(() => this.stream.off('close', listener));\n    }\n    onError(listener) {\n        this.stream.on('error', listener);\n        return api_1.Disposable.create(() => this.stream.off('error', listener));\n    }\n    onEnd(listener) {\n        this.stream.on('end', listener);\n        return api_1.Disposable.create(() => this.stream.off('end', listener));\n    }\n    write(data, encoding) {\n        return new Promise((resolve, reject) => {\n            const callback = (error) => {\n                if (error === undefined || error === null) {\n                    resolve();\n                }\n                else {\n                    reject(error);\n                }\n            };\n            if (typeof data === 'string') {\n                this.stream.write(data, encoding, callback);\n            }\n            else {\n                this.stream.write(data, callback);\n            }\n        });\n    }\n    end() {\n        this.stream.end();\n    }\n}\nconst _ril = Object.freeze({\n    messageBuffer: Object.freeze({\n        create: (encoding) => new MessageBuffer(encoding)\n    }),\n    applicationJson: Object.freeze({\n        encoder: Object.freeze({\n            name: 'application/json',\n            encode: (msg, options) => {\n                try {\n                    return Promise.resolve(Buffer.from(JSON.stringify(msg, undefined, 0), options.charset));\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            }\n        }),\n        decoder: Object.freeze({\n            name: 'application/json',\n            decode: (buffer, options) => {\n                try {\n                    if (buffer instanceof Buffer) {\n                        return Promise.resolve(JSON.parse(buffer.toString(options.charset)));\n                    }\n                    else {\n                        return Promise.resolve(JSON.parse(new util_1.TextDecoder(options.charset).decode(buffer)));\n                    }\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            }\n        })\n    }),\n    stream: Object.freeze({\n        asReadableStream: (stream) => new ReadableStreamWrapper(stream),\n        asWritableStream: (stream) => new WritableStreamWrapper(stream)\n    }),\n    console: console,\n    timer: Object.freeze({\n        setTimeout(callback, ms, ...args) {\n            const handle = setTimeout(callback, ms, ...args);\n            return { dispose: () => clearTimeout(handle) };\n        },\n        setImmediate(callback, ...args) {\n            const handle = setImmediate(callback, ...args);\n            return { dispose: () => clearImmediate(handle) };\n        },\n        setInterval(callback, ms, ...args) {\n            const handle = setInterval(callback, ms, ...args);\n            return { dispose: () => clearInterval(handle) };\n        }\n    })\n});\nfunction RIL() {\n    return _ril;\n}\n(function (RIL) {\n    function install() {\n        api_1.RAL.install(_ril);\n    }\n    RIL.install = install;\n})(RIL || (RIL = {}));\nexports.default = RIL;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LSPErrorCodes = exports.createProtocolConnection = void 0;\n__exportStar(require(\"vscode-jsonrpc\"), exports);\n__exportStar(require(\"vscode-languageserver-types\"), exports);\n__exportStar(require(\"./messages\"), exports);\n__exportStar(require(\"./protocol\"), exports);\nvar connection_1 = require(\"./connection\");\nObject.defineProperty(exports, \"createProtocolConnection\", { enumerable: true, get: function () { return connection_1.createProtocolConnection; } });\nvar LSPErrorCodes;\n(function (LSPErrorCodes) {\n    /**\n    * This is the start range of LSP reserved error codes.\n    * It doesn't denote a real error code.\n    *\n    * @since 3.16.0\n    */\n    LSPErrorCodes.lspReservedErrorRangeStart = -32899;\n    /**\n     * A request failed but it was syntactically correct, e.g the\n     * method name was known and the parameters were valid. The error\n     * message should contain human readable information about why\n     * the request failed.\n     *\n     * @since 3.17.0\n     */\n    LSPErrorCodes.RequestFailed = -32803;\n    /**\n     * The server cancelled the request. This error code should\n     * only be used for requests that explicitly support being\n     * server cancellable.\n     *\n     * @since 3.17.0\n     */\n    LSPErrorCodes.ServerCancelled = -32802;\n    /**\n     * The server detected that the content of a document got\n     * modified outside normal conditions. A server should\n     * NOT send this error code if it detects a content change\n     * in it unprocessed messages. The result even computed\n     * on an older state might still be useful for the client.\n     *\n     * If a client decides that a result is not of any use anymore\n     * the client should cancel the request.\n     */\n    LSPErrorCodes.ContentModified = -32801;\n    /**\n     * The client has canceled a request and a server as detected\n     * the cancel.\n     */\n    LSPErrorCodes.RequestCancelled = -32800;\n    /**\n    * This is the end range of LSP reserved error codes.\n    * It doesn't denote a real error code.\n    *\n    * @since 3.16.0\n    */\n    LSPErrorCodes.lspReservedErrorRangeEnd = -32800;\n})(LSPErrorCodes = exports.LSPErrorCodes || (exports.LSPErrorCodes = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createProtocolConnection = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nfunction createProtocolConnection(input, output, logger, options) {\n    if (vscode_jsonrpc_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return (0, vscode_jsonrpc_1.createMessageConnection)(input, output, logger, options);\n}\nexports.createProtocolConnection = createProtocolConnection;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProtocolNotificationType = exports.ProtocolNotificationType0 = exports.ProtocolRequestType = exports.ProtocolRequestType0 = exports.RegistrationType = exports.MessageDirection = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nvar MessageDirection;\n(function (MessageDirection) {\n    MessageDirection[\"clientToServer\"] = \"clientToServer\";\n    MessageDirection[\"serverToClient\"] = \"serverToClient\";\n    MessageDirection[\"both\"] = \"both\";\n})(MessageDirection = exports.MessageDirection || (exports.MessageDirection = {}));\nclass RegistrationType {\n    constructor(method) {\n        this.method = method;\n    }\n}\nexports.RegistrationType = RegistrationType;\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolRequestType0 = ProtocolRequestType0;\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\n    constructor(method) {\n        super(method, vscode_jsonrpc_1.ParameterStructures.byName);\n    }\n}\nexports.ProtocolRequestType = ProtocolRequestType;\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\n    constructor(method) {\n        super(method, vscode_jsonrpc_1.ParameterStructures.byName);\n    }\n}\nexports.ProtocolNotificationType = ProtocolNotificationType;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) TypeFox, Microsoft and others. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CallHierarchyOutgoingCallsRequest = exports.CallHierarchyIncomingCallsRequest = exports.CallHierarchyPrepareRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to result a `CallHierarchyItem` in a document at a given position.\n * Can be used as an input to an incoming or outgoing call hierarchy.\n *\n * @since 3.16.0\n */\nvar CallHierarchyPrepareRequest;\n(function (CallHierarchyPrepareRequest) {\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\n    CallHierarchyPrepareRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\n})(CallHierarchyPrepareRequest = exports.CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = {}));\n/**\n * A request to resolve the incoming calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyIncomingCallsRequest;\n(function (CallHierarchyIncomingCallsRequest) {\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\n    CallHierarchyIncomingCallsRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\n})(CallHierarchyIncomingCallsRequest = exports.CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = {}));\n/**\n * A request to resolve the outgoing calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyOutgoingCallsRequest;\n(function (CallHierarchyOutgoingCallsRequest) {\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\n    CallHierarchyOutgoingCallsRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\n})(CallHierarchyOutgoingCallsRequest = exports.CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ColorPresentationRequest = exports.DocumentColorRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to list all color symbols found in a given text document. The request's\n * parameter is of type {@link DocumentColorParams} the\n * response is of type {@link ColorInformation ColorInformation[]} or a Thenable\n * that resolves to such.\n */\nvar DocumentColorRequest;\n(function (DocumentColorRequest) {\n    DocumentColorRequest.method = 'textDocument/documentColor';\n    DocumentColorRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\n/**\n * A request to list all presentation for a color. The request's\n * parameter is of type {@link ColorPresentationParams} the\n * response is of type {@link ColorInformation ColorInformation[]} or a Thenable\n * that resolves to such.\n */\nvar ColorPresentationRequest;\n(function (ColorPresentationRequest) {\n    ColorPresentationRequest.method = 'textDocument/colorPresentation';\n    ColorPresentationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType(ColorPresentationRequest.method);\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConfigurationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n//---- Get Configuration request ----\n/**\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\n * configuration setting.\n *\n * This pull model replaces the old push model were the client signaled configuration change via an\n * event. If the server still needs to react to configuration changes (since the server caches the\n * result of `workspace/configuration` requests) the server should register for an empty configuration\n * change event and empty the cache if such an event is received.\n */\nvar ConfigurationRequest;\n(function (ConfigurationRequest) {\n    ConfigurationRequest.method = 'workspace/configuration';\n    ConfigurationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType(ConfigurationRequest.method);\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DeclarationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPositionParams]\n * (#TextDocumentPositionParams) the response is of type {@link Declaration}\n * or a typed array of {@link DeclarationLink} or a Thenable that resolves\n * to such.\n */\nvar DeclarationRequest;\n(function (DeclarationRequest) {\n    DeclarationRequest.method = 'textDocument/declaration';\n    DeclarationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiagnosticRefreshRequest = exports.WorkspaceDiagnosticRequest = exports.DocumentDiagnosticRequest = exports.DocumentDiagnosticReportKind = exports.DiagnosticServerCancellationData = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst Is = require(\"./utils/is\");\nconst messages_1 = require(\"./messages\");\n/**\n * @since 3.17.0\n */\nvar DiagnosticServerCancellationData;\n(function (DiagnosticServerCancellationData) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.retriggerRequest);\n    }\n    DiagnosticServerCancellationData.is = is;\n})(DiagnosticServerCancellationData = exports.DiagnosticServerCancellationData || (exports.DiagnosticServerCancellationData = {}));\n/**\n * The document diagnostic report kinds.\n *\n * @since 3.17.0\n */\nvar DocumentDiagnosticReportKind;\n(function (DocumentDiagnosticReportKind) {\n    /**\n     * A diagnostic report with a full\n     * set of problems.\n     */\n    DocumentDiagnosticReportKind.Full = 'full';\n    /**\n     * A report indicating that the last\n     * returned report is still accurate.\n     */\n    DocumentDiagnosticReportKind.Unchanged = 'unchanged';\n})(DocumentDiagnosticReportKind = exports.DocumentDiagnosticReportKind || (exports.DocumentDiagnosticReportKind = {}));\n/**\n * The document diagnostic request definition.\n *\n * @since 3.17.0\n */\nvar DocumentDiagnosticRequest;\n(function (DocumentDiagnosticRequest) {\n    DocumentDiagnosticRequest.method = 'textDocument/diagnostic';\n    DocumentDiagnosticRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentDiagnosticRequest.type = new messages_1.ProtocolRequestType(DocumentDiagnosticRequest.method);\n    DocumentDiagnosticRequest.partialResult = new vscode_jsonrpc_1.ProgressType();\n})(DocumentDiagnosticRequest = exports.DocumentDiagnosticRequest || (exports.DocumentDiagnosticRequest = {}));\n/**\n * The workspace diagnostic request definition.\n *\n * @since 3.17.0\n */\nvar WorkspaceDiagnosticRequest;\n(function (WorkspaceDiagnosticRequest) {\n    WorkspaceDiagnosticRequest.method = 'workspace/diagnostic';\n    WorkspaceDiagnosticRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceDiagnosticRequest.type = new messages_1.ProtocolRequestType(WorkspaceDiagnosticRequest.method);\n    WorkspaceDiagnosticRequest.partialResult = new vscode_jsonrpc_1.ProgressType();\n})(WorkspaceDiagnosticRequest = exports.WorkspaceDiagnosticRequest || (exports.WorkspaceDiagnosticRequest = {}));\n/**\n * The diagnostic refresh request definition.\n *\n * @since 3.17.0\n */\nvar DiagnosticRefreshRequest;\n(function (DiagnosticRefreshRequest) {\n    DiagnosticRefreshRequest.method = `workspace/diagnostic/refresh`;\n    DiagnosticRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    DiagnosticRefreshRequest.type = new messages_1.ProtocolRequestType0(DiagnosticRefreshRequest.method);\n})(DiagnosticRefreshRequest = exports.DiagnosticRefreshRequest || (exports.DiagnosticRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WillDeleteFilesRequest = exports.DidDeleteFilesNotification = exports.DidRenameFilesNotification = exports.WillRenameFilesRequest = exports.DidCreateFilesNotification = exports.WillCreateFilesRequest = exports.FileOperationPatternKind = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A pattern kind describing if a glob pattern matches a file a folder or\n * both.\n *\n * @since 3.16.0\n */\nvar FileOperationPatternKind;\n(function (FileOperationPatternKind) {\n    /**\n     * The pattern matches a file only.\n     */\n    FileOperationPatternKind.file = 'file';\n    /**\n     * The pattern matches a folder only.\n     */\n    FileOperationPatternKind.folder = 'folder';\n})(FileOperationPatternKind = exports.FileOperationPatternKind || (exports.FileOperationPatternKind = {}));\n/**\n * The will create files request is sent from the client to the server before files are actually\n * created as long as the creation is triggered from within the client.\n *\n * The request can return a `WorkspaceEdit` which will be applied to workspace before the\n * files are created. Hence the `WorkspaceEdit` can not manipulate the content of the file\n * to be created.\n *\n * @since 3.16.0\n */\nvar WillCreateFilesRequest;\n(function (WillCreateFilesRequest) {\n    WillCreateFilesRequest.method = 'workspace/willCreateFiles';\n    WillCreateFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillCreateFilesRequest.type = new messages_1.ProtocolRequestType(WillCreateFilesRequest.method);\n})(WillCreateFilesRequest = exports.WillCreateFilesRequest || (exports.WillCreateFilesRequest = {}));\n/**\n * The did create files notification is sent from the client to the server when\n * files were created from within the client.\n *\n * @since 3.16.0\n */\nvar DidCreateFilesNotification;\n(function (DidCreateFilesNotification) {\n    DidCreateFilesNotification.method = 'workspace/didCreateFiles';\n    DidCreateFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCreateFilesNotification.type = new messages_1.ProtocolNotificationType(DidCreateFilesNotification.method);\n})(DidCreateFilesNotification = exports.DidCreateFilesNotification || (exports.DidCreateFilesNotification = {}));\n/**\n * The will rename files request is sent from the client to the server before files are actually\n * renamed as long as the rename is triggered from within the client.\n *\n * @since 3.16.0\n */\nvar WillRenameFilesRequest;\n(function (WillRenameFilesRequest) {\n    WillRenameFilesRequest.method = 'workspace/willRenameFiles';\n    WillRenameFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillRenameFilesRequest.type = new messages_1.ProtocolRequestType(WillRenameFilesRequest.method);\n})(WillRenameFilesRequest = exports.WillRenameFilesRequest || (exports.WillRenameFilesRequest = {}));\n/**\n * The did rename files notification is sent from the client to the server when\n * files were renamed from within the client.\n *\n * @since 3.16.0\n */\nvar DidRenameFilesNotification;\n(function (DidRenameFilesNotification) {\n    DidRenameFilesNotification.method = 'workspace/didRenameFiles';\n    DidRenameFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidRenameFilesNotification.type = new messages_1.ProtocolNotificationType(DidRenameFilesNotification.method);\n})(DidRenameFilesNotification = exports.DidRenameFilesNotification || (exports.DidRenameFilesNotification = {}));\n/**\n * The will delete files request is sent from the client to the server before files are actually\n * deleted as long as the deletion is triggered from within the client.\n *\n * @since 3.16.0\n */\nvar DidDeleteFilesNotification;\n(function (DidDeleteFilesNotification) {\n    DidDeleteFilesNotification.method = 'workspace/didDeleteFiles';\n    DidDeleteFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidDeleteFilesNotification.type = new messages_1.ProtocolNotificationType(DidDeleteFilesNotification.method);\n})(DidDeleteFilesNotification = exports.DidDeleteFilesNotification || (exports.DidDeleteFilesNotification = {}));\n/**\n * The did delete files notification is sent from the client to the server when\n * files were deleted from within the client.\n *\n * @since 3.16.0\n */\nvar WillDeleteFilesRequest;\n(function (WillDeleteFilesRequest) {\n    WillDeleteFilesRequest.method = 'workspace/willDeleteFiles';\n    WillDeleteFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillDeleteFilesRequest.type = new messages_1.ProtocolRequestType(WillDeleteFilesRequest.method);\n})(WillDeleteFilesRequest = exports.WillDeleteFilesRequest || (exports.WillDeleteFilesRequest = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FoldingRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide folding ranges in a document. The request's\n * parameter is of type {@link FoldingRangeParams}, the\n * response is of type {@link FoldingRangeList} or a Thenable\n * that resolves to such.\n */\nvar FoldingRangeRequest;\n(function (FoldingRangeRequest) {\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\n    FoldingRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImplementationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the implementation locations of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPositionParams]\n * (#TextDocumentPositionParams) the response is of type {@link Definition} or a\n * Thenable that resolves to such.\n */\nvar ImplementationRequest;\n(function (ImplementationRequest) {\n    ImplementationRequest.method = 'textDocument/implementation';\n    ImplementationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlayHintRefreshRequest = exports.InlayHintResolveRequest = exports.InlayHintRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide inlay hints in a document. The request's parameter is of\n * type {@link InlayHintsParams}, the response is of type\n * {@link InlayHint InlayHint[]} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlayHintRequest;\n(function (InlayHintRequest) {\n    InlayHintRequest.method = 'textDocument/inlayHint';\n    InlayHintRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlayHintRequest.type = new messages_1.ProtocolRequestType(InlayHintRequest.method);\n})(InlayHintRequest = exports.InlayHintRequest || (exports.InlayHintRequest = {}));\n/**\n * A request to resolve additional properties for an inlay hint.\n * The request's parameter is of type {@link InlayHint}, the response is\n * of type {@link InlayHint} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlayHintResolveRequest;\n(function (InlayHintResolveRequest) {\n    InlayHintResolveRequest.method = 'inlayHint/resolve';\n    InlayHintResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlayHintResolveRequest.type = new messages_1.ProtocolRequestType(InlayHintResolveRequest.method);\n})(InlayHintResolveRequest = exports.InlayHintResolveRequest || (exports.InlayHintResolveRequest = {}));\n/**\n * @since 3.17.0\n */\nvar InlayHintRefreshRequest;\n(function (InlayHintRefreshRequest) {\n    InlayHintRefreshRequest.method = `workspace/inlayHint/refresh`;\n    InlayHintRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    InlayHintRefreshRequest.type = new messages_1.ProtocolRequestType0(InlayHintRefreshRequest.method);\n})(InlayHintRefreshRequest = exports.InlayHintRefreshRequest || (exports.InlayHintRefreshRequest = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineValueRefreshRequest = exports.InlineValueRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide inline values in a document. The request's parameter is of\n * type {@link InlineValueParams}, the response is of type\n * {@link InlineValue InlineValue[]} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlineValueRequest;\n(function (InlineValueRequest) {\n    InlineValueRequest.method = 'textDocument/inlineValue';\n    InlineValueRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlineValueRequest.type = new messages_1.ProtocolRequestType(InlineValueRequest.method);\n})(InlineValueRequest = exports.InlineValueRequest || (exports.InlineValueRequest = {}));\n/**\n * @since 3.17.0\n */\nvar InlineValueRefreshRequest;\n(function (InlineValueRefreshRequest) {\n    InlineValueRefreshRequest.method = `workspace/inlineValue/refresh`;\n    InlineValueRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    InlineValueRefreshRequest.type = new messages_1.ProtocolRequestType0(InlineValueRefreshRequest.method);\n})(InlineValueRefreshRequest = exports.InlineValueRefreshRequest || (exports.InlineValueRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceSymbolRequest = exports.CodeActionResolveRequest = exports.CodeActionRequest = exports.DocumentSymbolRequest = exports.DocumentHighlightRequest = exports.ReferencesRequest = exports.DefinitionRequest = exports.SignatureHelpRequest = exports.SignatureHelpTriggerKind = exports.HoverRequest = exports.CompletionResolveRequest = exports.CompletionRequest = exports.CompletionTriggerKind = exports.PublishDiagnosticsNotification = exports.WatchKind = exports.RelativePattern = exports.FileChangeType = exports.DidChangeWatchedFilesNotification = exports.WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentNotification = exports.TextDocumentSaveReason = exports.DidSaveTextDocumentNotification = exports.DidCloseTextDocumentNotification = exports.DidChangeTextDocumentNotification = exports.TextDocumentContentChangeEvent = exports.DidOpenTextDocumentNotification = exports.TextDocumentSyncKind = exports.TelemetryEventNotification = exports.LogMessageNotification = exports.ShowMessageRequest = exports.ShowMessageNotification = exports.MessageType = exports.DidChangeConfigurationNotification = exports.ExitNotification = exports.ShutdownRequest = exports.InitializedNotification = exports.InitializeErrorCodes = exports.InitializeRequest = exports.WorkDoneProgressOptions = exports.TextDocumentRegistrationOptions = exports.StaticRegistrationOptions = exports.PositionEncodingKind = exports.FailureHandlingKind = exports.ResourceOperationKind = exports.UnregistrationRequest = exports.RegistrationRequest = exports.DocumentSelector = exports.NotebookCellTextDocumentFilter = exports.NotebookDocumentFilter = exports.TextDocumentFilter = void 0;\nexports.TypeHierarchySubtypesRequest = exports.TypeHierarchyPrepareRequest = exports.MonikerRequest = exports.MonikerKind = exports.UniquenessLevel = exports.WillDeleteFilesRequest = exports.DidDeleteFilesNotification = exports.WillRenameFilesRequest = exports.DidRenameFilesNotification = exports.WillCreateFilesRequest = exports.DidCreateFilesNotification = exports.FileOperationPatternKind = exports.LinkedEditingRangeRequest = exports.ShowDocumentRequest = exports.SemanticTokensRegistrationType = exports.SemanticTokensRefreshRequest = exports.SemanticTokensRangeRequest = exports.SemanticTokensDeltaRequest = exports.SemanticTokensRequest = exports.TokenFormat = exports.CallHierarchyPrepareRequest = exports.CallHierarchyOutgoingCallsRequest = exports.CallHierarchyIncomingCallsRequest = exports.WorkDoneProgressCancelNotification = exports.WorkDoneProgressCreateRequest = exports.WorkDoneProgress = exports.SelectionRangeRequest = exports.DeclarationRequest = exports.FoldingRangeRequest = exports.ColorPresentationRequest = exports.DocumentColorRequest = exports.ConfigurationRequest = exports.DidChangeWorkspaceFoldersNotification = exports.WorkspaceFoldersRequest = exports.TypeDefinitionRequest = exports.ImplementationRequest = exports.ApplyWorkspaceEditRequest = exports.ExecuteCommandRequest = exports.PrepareRenameRequest = exports.RenameRequest = exports.PrepareSupportDefaultBehavior = exports.DocumentOnTypeFormattingRequest = exports.DocumentRangeFormattingRequest = exports.DocumentFormattingRequest = exports.DocumentLinkResolveRequest = exports.DocumentLinkRequest = exports.CodeLensRefreshRequest = exports.CodeLensResolveRequest = exports.CodeLensRequest = exports.WorkspaceSymbolResolveRequest = void 0;\nexports.DidCloseNotebookDocumentNotification = exports.DidSaveNotebookDocumentNotification = exports.DidChangeNotebookDocumentNotification = exports.NotebookCellArrayChange = exports.DidOpenNotebookDocumentNotification = exports.NotebookDocumentSyncRegistrationType = exports.NotebookDocument = exports.NotebookCell = exports.ExecutionSummary = exports.NotebookCellKind = exports.DiagnosticRefreshRequest = exports.WorkspaceDiagnosticRequest = exports.DocumentDiagnosticRequest = exports.DocumentDiagnosticReportKind = exports.DiagnosticServerCancellationData = exports.InlayHintRefreshRequest = exports.InlayHintResolveRequest = exports.InlayHintRequest = exports.InlineValueRefreshRequest = exports.InlineValueRequest = exports.TypeHierarchySupertypesRequest = void 0;\nconst messages_1 = require(\"./messages\");\nconst vscode_languageserver_types_1 = require(\"vscode-languageserver-types\");\nconst Is = require(\"./utils/is\");\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\nObject.defineProperty(exports, \"ImplementationRequest\", { enumerable: true, get: function () { return protocol_implementation_1.ImplementationRequest; } });\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\nObject.defineProperty(exports, \"TypeDefinitionRequest\", { enumerable: true, get: function () { return protocol_typeDefinition_1.TypeDefinitionRequest; } });\nconst protocol_workspaceFolder_1 = require(\"./protocol.workspaceFolder\");\nObject.defineProperty(exports, \"WorkspaceFoldersRequest\", { enumerable: true, get: function () { return protocol_workspaceFolder_1.WorkspaceFoldersRequest; } });\nObject.defineProperty(exports, \"DidChangeWorkspaceFoldersNotification\", { enumerable: true, get: function () { return protocol_workspaceFolder_1.DidChangeWorkspaceFoldersNotification; } });\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\nObject.defineProperty(exports, \"ConfigurationRequest\", { enumerable: true, get: function () { return protocol_configuration_1.ConfigurationRequest; } });\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\nObject.defineProperty(exports, \"DocumentColorRequest\", { enumerable: true, get: function () { return protocol_colorProvider_1.DocumentColorRequest; } });\nObject.defineProperty(exports, \"ColorPresentationRequest\", { enumerable: true, get: function () { return protocol_colorProvider_1.ColorPresentationRequest; } });\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\nObject.defineProperty(exports, \"FoldingRangeRequest\", { enumerable: true, get: function () { return protocol_foldingRange_1.FoldingRangeRequest; } });\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\nObject.defineProperty(exports, \"DeclarationRequest\", { enumerable: true, get: function () { return protocol_declaration_1.DeclarationRequest; } });\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\nObject.defineProperty(exports, \"SelectionRangeRequest\", { enumerable: true, get: function () { return protocol_selectionRange_1.SelectionRangeRequest; } });\nconst protocol_progress_1 = require(\"./protocol.progress\");\nObject.defineProperty(exports, \"WorkDoneProgress\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgress; } });\nObject.defineProperty(exports, \"WorkDoneProgressCreateRequest\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgressCreateRequest; } });\nObject.defineProperty(exports, \"WorkDoneProgressCancelNotification\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgressCancelNotification; } });\nconst protocol_callHierarchy_1 = require(\"./protocol.callHierarchy\");\nObject.defineProperty(exports, \"CallHierarchyIncomingCallsRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyIncomingCallsRequest; } });\nObject.defineProperty(exports, \"CallHierarchyOutgoingCallsRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyOutgoingCallsRequest; } });\nObject.defineProperty(exports, \"CallHierarchyPrepareRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyPrepareRequest; } });\nconst protocol_semanticTokens_1 = require(\"./protocol.semanticTokens\");\nObject.defineProperty(exports, \"TokenFormat\", { enumerable: true, get: function () { return protocol_semanticTokens_1.TokenFormat; } });\nObject.defineProperty(exports, \"SemanticTokensRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRequest; } });\nObject.defineProperty(exports, \"SemanticTokensDeltaRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensDeltaRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRangeRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRangeRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRefreshRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRefreshRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRegistrationType\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRegistrationType; } });\nconst protocol_showDocument_1 = require(\"./protocol.showDocument\");\nObject.defineProperty(exports, \"ShowDocumentRequest\", { enumerable: true, get: function () { return protocol_showDocument_1.ShowDocumentRequest; } });\nconst protocol_linkedEditingRange_1 = require(\"./protocol.linkedEditingRange\");\nObject.defineProperty(exports, \"LinkedEditingRangeRequest\", { enumerable: true, get: function () { return protocol_linkedEditingRange_1.LinkedEditingRangeRequest; } });\nconst protocol_fileOperations_1 = require(\"./protocol.fileOperations\");\nObject.defineProperty(exports, \"FileOperationPatternKind\", { enumerable: true, get: function () { return protocol_fileOperations_1.FileOperationPatternKind; } });\nObject.defineProperty(exports, \"DidCreateFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidCreateFilesNotification; } });\nObject.defineProperty(exports, \"WillCreateFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillCreateFilesRequest; } });\nObject.defineProperty(exports, \"DidRenameFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidRenameFilesNotification; } });\nObject.defineProperty(exports, \"WillRenameFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillRenameFilesRequest; } });\nObject.defineProperty(exports, \"DidDeleteFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidDeleteFilesNotification; } });\nObject.defineProperty(exports, \"WillDeleteFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillDeleteFilesRequest; } });\nconst protocol_moniker_1 = require(\"./protocol.moniker\");\nObject.defineProperty(exports, \"UniquenessLevel\", { enumerable: true, get: function () { return protocol_moniker_1.UniquenessLevel; } });\nObject.defineProperty(exports, \"MonikerKind\", { enumerable: true, get: function () { return protocol_moniker_1.MonikerKind; } });\nObject.defineProperty(exports, \"MonikerRequest\", { enumerable: true, get: function () { return protocol_moniker_1.MonikerRequest; } });\nconst protocol_typeHierarchy_1 = require(\"./protocol.typeHierarchy\");\nObject.defineProperty(exports, \"TypeHierarchyPrepareRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchyPrepareRequest; } });\nObject.defineProperty(exports, \"TypeHierarchySubtypesRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchySubtypesRequest; } });\nObject.defineProperty(exports, \"TypeHierarchySupertypesRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchySupertypesRequest; } });\nconst protocol_inlineValue_1 = require(\"./protocol.inlineValue\");\nObject.defineProperty(exports, \"InlineValueRequest\", { enumerable: true, get: function () { return protocol_inlineValue_1.InlineValueRequest; } });\nObject.defineProperty(exports, \"InlineValueRefreshRequest\", { enumerable: true, get: function () { return protocol_inlineValue_1.InlineValueRefreshRequest; } });\nconst protocol_inlayHint_1 = require(\"./protocol.inlayHint\");\nObject.defineProperty(exports, \"InlayHintRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintRequest; } });\nObject.defineProperty(exports, \"InlayHintResolveRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintResolveRequest; } });\nObject.defineProperty(exports, \"InlayHintRefreshRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintRefreshRequest; } });\nconst protocol_diagnostic_1 = require(\"./protocol.diagnostic\");\nObject.defineProperty(exports, \"DiagnosticServerCancellationData\", { enumerable: true, get: function () { return protocol_diagnostic_1.DiagnosticServerCancellationData; } });\nObject.defineProperty(exports, \"DocumentDiagnosticReportKind\", { enumerable: true, get: function () { return protocol_diagnostic_1.DocumentDiagnosticReportKind; } });\nObject.defineProperty(exports, \"DocumentDiagnosticRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.DocumentDiagnosticRequest; } });\nObject.defineProperty(exports, \"WorkspaceDiagnosticRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.WorkspaceDiagnosticRequest; } });\nObject.defineProperty(exports, \"DiagnosticRefreshRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.DiagnosticRefreshRequest; } });\nconst protocol_notebook_1 = require(\"./protocol.notebook\");\nObject.defineProperty(exports, \"NotebookCellKind\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCellKind; } });\nObject.defineProperty(exports, \"ExecutionSummary\", { enumerable: true, get: function () { return protocol_notebook_1.ExecutionSummary; } });\nObject.defineProperty(exports, \"NotebookCell\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCell; } });\nObject.defineProperty(exports, \"NotebookDocument\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookDocument; } });\nObject.defineProperty(exports, \"NotebookDocumentSyncRegistrationType\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookDocumentSyncRegistrationType; } });\nObject.defineProperty(exports, \"DidOpenNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidOpenNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"NotebookCellArrayChange\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCellArrayChange; } });\nObject.defineProperty(exports, \"DidChangeNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidChangeNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"DidSaveNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidSaveNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"DidCloseNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidCloseNotebookDocumentNotification; } });\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * The TextDocumentFilter namespace provides helper functions to work with\n * {@link TextDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar TextDocumentFilter;\n(function (TextDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\n    }\n    TextDocumentFilter.is = is;\n})(TextDocumentFilter = exports.TextDocumentFilter || (exports.TextDocumentFilter = {}));\n/**\n * The NotebookDocumentFilter namespace provides helper functions to work with\n * {@link NotebookDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar NotebookDocumentFilter;\n(function (NotebookDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (Is.string(candidate.notebookType) || Is.string(candidate.scheme) || Is.string(candidate.pattern));\n    }\n    NotebookDocumentFilter.is = is;\n})(NotebookDocumentFilter = exports.NotebookDocumentFilter || (exports.NotebookDocumentFilter = {}));\n/**\n * The NotebookCellTextDocumentFilter namespace provides helper functions to work with\n * {@link NotebookCellTextDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar NotebookCellTextDocumentFilter;\n(function (NotebookCellTextDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate)\n            && (Is.string(candidate.notebook) || NotebookDocumentFilter.is(candidate.notebook))\n            && (candidate.language === undefined || Is.string(candidate.language));\n    }\n    NotebookCellTextDocumentFilter.is = is;\n})(NotebookCellTextDocumentFilter = exports.NotebookCellTextDocumentFilter || (exports.NotebookCellTextDocumentFilter = {}));\n/**\n * The DocumentSelector namespace provides helper functions to work with\n * {@link DocumentSelector}s.\n */\nvar DocumentSelector;\n(function (DocumentSelector) {\n    function is(value) {\n        if (!Array.isArray(value)) {\n            return false;\n        }\n        for (let elem of value) {\n            if (!Is.string(elem) && !TextDocumentFilter.is(elem) && !NotebookCellTextDocumentFilter.is(elem)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    DocumentSelector.is = is;\n})(DocumentSelector = exports.DocumentSelector || (exports.DocumentSelector = {}));\n/**\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\n * handler on the client side.\n */\nvar RegistrationRequest;\n(function (RegistrationRequest) {\n    RegistrationRequest.method = 'client/registerCapability';\n    RegistrationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    RegistrationRequest.type = new messages_1.ProtocolRequestType(RegistrationRequest.method);\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\n/**\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\n * handler on the client side.\n */\nvar UnregistrationRequest;\n(function (UnregistrationRequest) {\n    UnregistrationRequest.method = 'client/unregisterCapability';\n    UnregistrationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType(UnregistrationRequest.method);\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\nvar ResourceOperationKind;\n(function (ResourceOperationKind) {\n    /**\n     * Supports creating new files and folders.\n     */\n    ResourceOperationKind.Create = 'create';\n    /**\n     * Supports renaming existing files and folders.\n     */\n    ResourceOperationKind.Rename = 'rename';\n    /**\n     * Supports deleting existing files and folders.\n     */\n    ResourceOperationKind.Delete = 'delete';\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\nvar FailureHandlingKind;\n(function (FailureHandlingKind) {\n    /**\n     * Applying the workspace change is simply aborted if one of the changes provided\n     * fails. All operations executed before the failing operation stay executed.\n     */\n    FailureHandlingKind.Abort = 'abort';\n    /**\n     * All operations are executed transactional. That means they either all\n     * succeed or no changes at all are applied to the workspace.\n     */\n    FailureHandlingKind.Transactional = 'transactional';\n    /**\n     * If the workspace edit contains only textual file changes they are executed transactional.\n     * If resource changes (create, rename or delete file) are part of the change the failure\n     * handling strategy is abort.\n     */\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\n    /**\n     * The client tries to undo the operations already executed. But there is no\n     * guarantee that this is succeeding.\n     */\n    FailureHandlingKind.Undo = 'undo';\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\n/**\n * A set of predefined position encoding kinds.\n *\n * @since 3.17.0\n */\nvar PositionEncodingKind;\n(function (PositionEncodingKind) {\n    /**\n     * Character offsets count UTF-8 code units (e.g. bytes).\n     */\n    PositionEncodingKind.UTF8 = 'utf-8';\n    /**\n     * Character offsets count UTF-16 code units.\n     *\n     * This is the default and must always be supported\n     * by servers\n     */\n    PositionEncodingKind.UTF16 = 'utf-16';\n    /**\n     * Character offsets count UTF-32 code units.\n     *\n     * Implementation note: these are the same as Unicode codepoints,\n     * so this `PositionEncodingKind` may also be used for an\n     * encoding-agnostic representation of character offsets.\n     */\n    PositionEncodingKind.UTF32 = 'utf-32';\n})(PositionEncodingKind = exports.PositionEncodingKind || (exports.PositionEncodingKind = {}));\n/**\n * The StaticRegistrationOptions namespace provides helper functions to work with\n * {@link StaticRegistrationOptions} literals.\n */\nvar StaticRegistrationOptions;\n(function (StaticRegistrationOptions) {\n    function hasId(value) {\n        const candidate = value;\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\n    }\n    StaticRegistrationOptions.hasId = hasId;\n})(StaticRegistrationOptions = exports.StaticRegistrationOptions || (exports.StaticRegistrationOptions = {}));\n/**\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\n * {@link TextDocumentRegistrationOptions} literals.\n */\nvar TextDocumentRegistrationOptions;\n(function (TextDocumentRegistrationOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\n    }\n    TextDocumentRegistrationOptions.is = is;\n})(TextDocumentRegistrationOptions = exports.TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = {}));\n/**\n * The WorkDoneProgressOptions namespace provides helper functions to work with\n * {@link WorkDoneProgressOptions} literals.\n */\nvar WorkDoneProgressOptions;\n(function (WorkDoneProgressOptions) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\n    }\n    WorkDoneProgressOptions.is = is;\n    function hasWorkDoneProgress(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.workDoneProgress);\n    }\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\n})(WorkDoneProgressOptions = exports.WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = {}));\n/**\n * The initialize request is sent from the client to the server.\n * It is sent once as the request after starting up the server.\n * The requests parameter is of type {@link InitializeParams}\n * the response if of type {@link InitializeResult} of a Thenable that\n * resolves to such.\n */\nvar InitializeRequest;\n(function (InitializeRequest) {\n    InitializeRequest.method = 'initialize';\n    InitializeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InitializeRequest.type = new messages_1.ProtocolRequestType(InitializeRequest.method);\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\n/**\n * Known error codes for an `InitializeErrorCodes`;\n */\nvar InitializeErrorCodes;\n(function (InitializeErrorCodes) {\n    /**\n     * If the protocol version provided by the client can't be handled by the server.\n     *\n     * @deprecated This initialize error got replaced by client capabilities. There is\n     * no version handshake in version 3.0x\n     */\n    InitializeErrorCodes.unknownProtocolVersion = 1;\n})(InitializeErrorCodes = exports.InitializeErrorCodes || (exports.InitializeErrorCodes = {}));\n/**\n * The initialized notification is sent from the client to the\n * server after the client is fully initialized and the server\n * is allowed to send requests from the server to the client.\n */\nvar InitializedNotification;\n(function (InitializedNotification) {\n    InitializedNotification.method = 'initialized';\n    InitializedNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    InitializedNotification.type = new messages_1.ProtocolNotificationType(InitializedNotification.method);\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\n//---- Shutdown Method ----\n/**\n * A shutdown request is sent from the client to the server.\n * It is sent once when the client decides to shutdown the\n * server. The only notification that is sent after a shutdown request\n * is the exit event.\n */\nvar ShutdownRequest;\n(function (ShutdownRequest) {\n    ShutdownRequest.method = 'shutdown';\n    ShutdownRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0(ShutdownRequest.method);\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\n//---- Exit Notification ----\n/**\n * The exit event is sent from the client to the server to\n * ask the server to exit its process.\n */\nvar ExitNotification;\n(function (ExitNotification) {\n    ExitNotification.method = 'exit';\n    ExitNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    ExitNotification.type = new messages_1.ProtocolNotificationType0(ExitNotification.method);\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\n/**\n * The configuration change notification is sent from the client to the server\n * when the client's configuration has changed. The notification contains\n * the changed configuration as defined by the language client.\n */\nvar DidChangeConfigurationNotification;\n(function (DidChangeConfigurationNotification) {\n    DidChangeConfigurationNotification.method = 'workspace/didChangeConfiguration';\n    DidChangeConfigurationNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType(DidChangeConfigurationNotification.method);\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\n//---- Message show and log notifications ----\n/**\n * The message type\n */\nvar MessageType;\n(function (MessageType) {\n    /**\n     * An error message.\n     */\n    MessageType.Error = 1;\n    /**\n     * A warning message.\n     */\n    MessageType.Warning = 2;\n    /**\n     * An information message.\n     */\n    MessageType.Info = 3;\n    /**\n     * A log message.\n     */\n    MessageType.Log = 4;\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\n/**\n * The show message notification is sent from a server to a client to ask\n * the client to display a particular message in the user interface.\n */\nvar ShowMessageNotification;\n(function (ShowMessageNotification) {\n    ShowMessageNotification.method = 'window/showMessage';\n    ShowMessageNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType(ShowMessageNotification.method);\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\n/**\n * The show message request is sent from the server to the client to show a message\n * and a set of options actions to the user.\n */\nvar ShowMessageRequest;\n(function (ShowMessageRequest) {\n    ShowMessageRequest.method = 'window/showMessageRequest';\n    ShowMessageRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType(ShowMessageRequest.method);\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\n/**\n * The log message notification is sent from the server to the client to ask\n * the client to log a particular message.\n */\nvar LogMessageNotification;\n(function (LogMessageNotification) {\n    LogMessageNotification.method = 'window/logMessage';\n    LogMessageNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType(LogMessageNotification.method);\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\n//---- Telemetry notification\n/**\n * The telemetry event notification is sent from the server to the client to ask\n * the client to log telemetry data.\n */\nvar TelemetryEventNotification;\n(function (TelemetryEventNotification) {\n    TelemetryEventNotification.method = 'telemetry/event';\n    TelemetryEventNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType(TelemetryEventNotification.method);\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\n/**\n * Defines how the host (editor) should sync\n * document changes to the language server.\n */\nvar TextDocumentSyncKind;\n(function (TextDocumentSyncKind) {\n    /**\n     * Documents should not be synced at all.\n     */\n    TextDocumentSyncKind.None = 0;\n    /**\n     * Documents are synced by always sending the full content\n     * of the document.\n     */\n    TextDocumentSyncKind.Full = 1;\n    /**\n     * Documents are synced by sending the full content on open.\n     * After that only incremental updates to the document are\n     * send.\n     */\n    TextDocumentSyncKind.Incremental = 2;\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\n/**\n * The document open notification is sent from the client to the server to signal\n * newly opened text documents. The document's truth is now managed by the client\n * and the server must not try to read the document's truth using the document's\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\n * mean that its content is presented in an editor. An open notification must not\n * be sent more than once without a corresponding close notification send before.\n * This means open and close notification must be balanced and the max open count\n * is one.\n */\nvar DidOpenTextDocumentNotification;\n(function (DidOpenTextDocumentNotification) {\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\n    DidOpenTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\nvar TextDocumentContentChangeEvent;\n(function (TextDocumentContentChangeEvent) {\n    /**\n     * Checks whether the information describes a delta event.\n     */\n    function isIncremental(event) {\n        let candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range !== undefined &&\n            (candidate.rangeLength === undefined || typeof candidate.rangeLength === 'number');\n    }\n    TextDocumentContentChangeEvent.isIncremental = isIncremental;\n    /**\n     * Checks whether the information describes a full replacement event.\n     */\n    function isFull(event) {\n        let candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range === undefined && candidate.rangeLength === undefined;\n    }\n    TextDocumentContentChangeEvent.isFull = isFull;\n})(TextDocumentContentChangeEvent = exports.TextDocumentContentChangeEvent || (exports.TextDocumentContentChangeEvent = {}));\n/**\n * The document change notification is sent from the client to the server to signal\n * changes to a text document.\n */\nvar DidChangeTextDocumentNotification;\n(function (DidChangeTextDocumentNotification) {\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\n    DidChangeTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\n/**\n * The document close notification is sent from the client to the server when\n * the document got closed in the client. The document's truth now exists where\n * the document's uri points to (e.g. if the document's uri is a file uri the\n * truth now exists on disk). As with the open notification the close notification\n * is about managing the document's content. Receiving a close notification\n * doesn't mean that the document was open in an editor before. A close\n * notification requires a previous open notification to be sent.\n */\nvar DidCloseTextDocumentNotification;\n(function (DidCloseTextDocumentNotification) {\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\n    DidCloseTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\n/**\n * The document save notification is sent from the client to the server when\n * the document got saved in the client.\n */\nvar DidSaveTextDocumentNotification;\n(function (DidSaveTextDocumentNotification) {\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\n    DidSaveTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\n/**\n * Represents reasons why a text document is saved.\n */\nvar TextDocumentSaveReason;\n(function (TextDocumentSaveReason) {\n    /**\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\n     * or by an API call.\n     */\n    TextDocumentSaveReason.Manual = 1;\n    /**\n     * Automatic after a delay.\n     */\n    TextDocumentSaveReason.AfterDelay = 2;\n    /**\n     * When the editor lost focus.\n     */\n    TextDocumentSaveReason.FocusOut = 3;\n})(TextDocumentSaveReason = exports.TextDocumentSaveReason || (exports.TextDocumentSaveReason = {}));\n/**\n * A document will save notification is sent from the client to the server before\n * the document is actually saved.\n */\nvar WillSaveTextDocumentNotification;\n(function (WillSaveTextDocumentNotification) {\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\n    WillSaveTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\n/**\n * A document will save request is sent from the client to the server before\n * the document is actually saved. The request can return an array of TextEdits\n * which will be applied to the text document before it is saved. Please note that\n * clients might drop results if computing the text edits took too long or if a\n * server constantly fails on this request. This is done to keep the save fast and\n * reliable.\n */\nvar WillSaveTextDocumentWaitUntilRequest;\n(function (WillSaveTextDocumentWaitUntilRequest) {\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\n    WillSaveTextDocumentWaitUntilRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\n/**\n * The watched files notification is sent from the client to the server when\n * the client detects changes to file watched by the language client.\n */\nvar DidChangeWatchedFilesNotification;\n(function (DidChangeWatchedFilesNotification) {\n    DidChangeWatchedFilesNotification.method = 'workspace/didChangeWatchedFiles';\n    DidChangeWatchedFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType(DidChangeWatchedFilesNotification.method);\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\n/**\n * The file event type\n */\nvar FileChangeType;\n(function (FileChangeType) {\n    /**\n     * The file got created.\n     */\n    FileChangeType.Created = 1;\n    /**\n     * The file got changed.\n     */\n    FileChangeType.Changed = 2;\n    /**\n     * The file got deleted.\n     */\n    FileChangeType.Deleted = 3;\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\nvar RelativePattern;\n(function (RelativePattern) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (vscode_languageserver_types_1.URI.is(candidate.baseUri) || vscode_languageserver_types_1.WorkspaceFolder.is(candidate.baseUri)) && Is.string(candidate.pattern);\n    }\n    RelativePattern.is = is;\n})(RelativePattern = exports.RelativePattern || (exports.RelativePattern = {}));\nvar WatchKind;\n(function (WatchKind) {\n    /**\n     * Interested in create events.\n     */\n    WatchKind.Create = 1;\n    /**\n     * Interested in change events\n     */\n    WatchKind.Change = 2;\n    /**\n     * Interested in delete events\n     */\n    WatchKind.Delete = 4;\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\n/**\n * Diagnostics notification are sent from the server to the client to signal\n * results of validation runs.\n */\nvar PublishDiagnosticsNotification;\n(function (PublishDiagnosticsNotification) {\n    PublishDiagnosticsNotification.method = 'textDocument/publishDiagnostics';\n    PublishDiagnosticsNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType(PublishDiagnosticsNotification.method);\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\n/**\n * How a completion was triggered\n */\nvar CompletionTriggerKind;\n(function (CompletionTriggerKind) {\n    /**\n     * Completion was triggered by typing an identifier (24x7 code\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\n     */\n    CompletionTriggerKind.Invoked = 1;\n    /**\n     * Completion was triggered by a trigger character specified by\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\n     */\n    CompletionTriggerKind.TriggerCharacter = 2;\n    /**\n     * Completion was re-triggered as current completion list is incomplete\n     */\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\n/**\n * Request to request completion at a given text document position. The request's\n * parameter is of type {@link TextDocumentPosition} the response\n * is of type {@link CompletionItem CompletionItem[]} or {@link CompletionList}\n * or a Thenable that resolves to such.\n *\n * The request can delay the computation of the {@link CompletionItem.detail `detail`}\n * and {@link CompletionItem.documentation `documentation`} properties to the `completionItem/resolve`\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\n */\nvar CompletionRequest;\n(function (CompletionRequest) {\n    CompletionRequest.method = 'textDocument/completion';\n    CompletionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\n/**\n * Request to resolve additional information for a given completion item.The request's\n * parameter is of type {@link CompletionItem} the response\n * is of type {@link CompletionItem} or a Thenable that resolves to such.\n */\nvar CompletionResolveRequest;\n(function (CompletionResolveRequest) {\n    CompletionResolveRequest.method = 'completionItem/resolve';\n    CompletionResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\n/**\n * Request to request hover information at a given text document position. The request's\n * parameter is of type {@link TextDocumentPosition} the response is of\n * type {@link Hover} or a Thenable that resolves to such.\n */\nvar HoverRequest;\n(function (HoverRequest) {\n    HoverRequest.method = 'textDocument/hover';\n    HoverRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\n/**\n * How a signature help was triggered.\n *\n * @since 3.15.0\n */\nvar SignatureHelpTriggerKind;\n(function (SignatureHelpTriggerKind) {\n    /**\n     * Signature help was invoked manually by the user or by a command.\n     */\n    SignatureHelpTriggerKind.Invoked = 1;\n    /**\n     * Signature help was triggered by a trigger character.\n     */\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\n    /**\n     * Signature help was triggered by the cursor moving or by the document content changing.\n     */\n    SignatureHelpTriggerKind.ContentChange = 3;\n})(SignatureHelpTriggerKind = exports.SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = {}));\nvar SignatureHelpRequest;\n(function (SignatureHelpRequest) {\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\n    SignatureHelpRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\n/**\n * A request to resolve the definition location of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPosition]\n * (#TextDocumentPosition) the response is of either type {@link Definition}\n * or a typed array of {@link DefinitionLink} or a Thenable that resolves\n * to such.\n */\nvar DefinitionRequest;\n(function (DefinitionRequest) {\n    DefinitionRequest.method = 'textDocument/definition';\n    DefinitionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\n/**\n * A request to resolve project-wide references for the symbol denoted\n * by the given text document position. The request's parameter is of\n * type {@link ReferenceParams} the response is of type\n * {@link Location Location[]} or a Thenable that resolves to such.\n */\nvar ReferencesRequest;\n(function (ReferencesRequest) {\n    ReferencesRequest.method = 'textDocument/references';\n    ReferencesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\n/**\n * Request to resolve a {@link DocumentHighlight} for a given\n * text document position. The request's parameter is of type [TextDocumentPosition]\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\n * (#DocumentHighlight) or a Thenable that resolves to such.\n */\nvar DocumentHighlightRequest;\n(function (DocumentHighlightRequest) {\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\n    DocumentHighlightRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\n/**\n * A request to list all symbols found in a given text document. The request's\n * parameter is of type {@link TextDocumentIdentifier} the\n * response is of type {@link SymbolInformation SymbolInformation[]} or a Thenable\n * that resolves to such.\n */\nvar DocumentSymbolRequest;\n(function (DocumentSymbolRequest) {\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\n    DocumentSymbolRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\n/**\n * A request to provide commands for the given text document and range.\n */\nvar CodeActionRequest;\n(function (CodeActionRequest) {\n    CodeActionRequest.method = 'textDocument/codeAction';\n    CodeActionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\n/**\n * Request to resolve additional information for a given code action.The request's\n * parameter is of type {@link CodeAction} the response\n * is of type {@link CodeAction} or a Thenable that resolves to such.\n */\nvar CodeActionResolveRequest;\n(function (CodeActionResolveRequest) {\n    CodeActionResolveRequest.method = 'codeAction/resolve';\n    CodeActionResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeActionResolveRequest.type = new messages_1.ProtocolRequestType(CodeActionResolveRequest.method);\n})(CodeActionResolveRequest = exports.CodeActionResolveRequest || (exports.CodeActionResolveRequest = {}));\n/**\n * A request to list project-wide symbols matching the query string given\n * by the {@link WorkspaceSymbolParams}. The response is\n * of type {@link SymbolInformation SymbolInformation[]} or a Thenable that\n * resolves to such.\n *\n * @since 3.17.0 - support for WorkspaceSymbol in the returned data. Clients\n *  need to advertise support for WorkspaceSymbols via the client capability\n *  `workspace.symbol.resolveSupport`.\n *\n */\nvar WorkspaceSymbolRequest;\n(function (WorkspaceSymbolRequest) {\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\n    WorkspaceSymbolRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\n/**\n * A request to resolve the range inside the workspace\n * symbol's location.\n *\n * @since 3.17.0\n */\nvar WorkspaceSymbolResolveRequest;\n(function (WorkspaceSymbolResolveRequest) {\n    WorkspaceSymbolResolveRequest.method = 'workspaceSymbol/resolve';\n    WorkspaceSymbolResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceSymbolResolveRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolResolveRequest.method);\n})(WorkspaceSymbolResolveRequest = exports.WorkspaceSymbolResolveRequest || (exports.WorkspaceSymbolResolveRequest = {}));\n/**\n * A request to provide code lens for the given text document.\n */\nvar CodeLensRequest;\n(function (CodeLensRequest) {\n    CodeLensRequest.method = 'textDocument/codeLens';\n    CodeLensRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeLensRequest.type = new messages_1.ProtocolRequestType(CodeLensRequest.method);\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\n/**\n * A request to resolve a command for a given code lens.\n */\nvar CodeLensResolveRequest;\n(function (CodeLensResolveRequest) {\n    CodeLensResolveRequest.method = 'codeLens/resolve';\n    CodeLensResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType(CodeLensResolveRequest.method);\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\n/**\n * A request to refresh all code actions\n *\n * @since 3.16.0\n */\nvar CodeLensRefreshRequest;\n(function (CodeLensRefreshRequest) {\n    CodeLensRefreshRequest.method = `workspace/codeLens/refresh`;\n    CodeLensRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    CodeLensRefreshRequest.type = new messages_1.ProtocolRequestType0(CodeLensRefreshRequest.method);\n})(CodeLensRefreshRequest = exports.CodeLensRefreshRequest || (exports.CodeLensRefreshRequest = {}));\n/**\n * A request to provide document links\n */\nvar DocumentLinkRequest;\n(function (DocumentLinkRequest) {\n    DocumentLinkRequest.method = 'textDocument/documentLink';\n    DocumentLinkRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\n/**\n * Request to resolve additional information for a given document link. The request's\n * parameter is of type {@link DocumentLink} the response\n * is of type {@link DocumentLink} or a Thenable that resolves to such.\n */\nvar DocumentLinkResolveRequest;\n(function (DocumentLinkResolveRequest) {\n    DocumentLinkResolveRequest.method = 'documentLink/resolve';\n    DocumentLinkResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType(DocumentLinkResolveRequest.method);\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\n/**\n * A request to to format a whole document.\n */\nvar DocumentFormattingRequest;\n(function (DocumentFormattingRequest) {\n    DocumentFormattingRequest.method = 'textDocument/formatting';\n    DocumentFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\n/**\n * A request to to format a range in a document.\n */\nvar DocumentRangeFormattingRequest;\n(function (DocumentRangeFormattingRequest) {\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\n    DocumentRangeFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\n/**\n * A request to format a document on type.\n */\nvar DocumentOnTypeFormattingRequest;\n(function (DocumentOnTypeFormattingRequest) {\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\n    DocumentOnTypeFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\n//---- Rename ----------------------------------------------\nvar PrepareSupportDefaultBehavior;\n(function (PrepareSupportDefaultBehavior) {\n    /**\n     * The client's default behavior is to select the identifier\n     * according the to language's syntax rule.\n     */\n    PrepareSupportDefaultBehavior.Identifier = 1;\n})(PrepareSupportDefaultBehavior = exports.PrepareSupportDefaultBehavior || (exports.PrepareSupportDefaultBehavior = {}));\n/**\n * A request to rename a symbol.\n */\nvar RenameRequest;\n(function (RenameRequest) {\n    RenameRequest.method = 'textDocument/rename';\n    RenameRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\n/**\n * A request to test and perform the setup necessary for a rename.\n *\n * @since 3.16 - support for default behavior\n */\nvar PrepareRenameRequest;\n(function (PrepareRenameRequest) {\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\n    PrepareRenameRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\n/**\n * A request send from the client to the server to execute a command. The request might return\n * a workspace edit which the client will apply to the workspace.\n */\nvar ExecuteCommandRequest;\n(function (ExecuteCommandRequest) {\n    ExecuteCommandRequest.method = 'workspace/executeCommand';\n    ExecuteCommandRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType(ExecuteCommandRequest.method);\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\n/**\n * A request sent from the server to the client to modified certain resources.\n */\nvar ApplyWorkspaceEditRequest;\n(function (ApplyWorkspaceEditRequest) {\n    ApplyWorkspaceEditRequest.method = 'workspace/applyEdit';\n    ApplyWorkspaceEditRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LinkedEditingRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide ranges that can be edited together.\n *\n * @since 3.16.0\n */\nvar LinkedEditingRangeRequest;\n(function (LinkedEditingRangeRequest) {\n    LinkedEditingRangeRequest.method = 'textDocument/linkedEditingRange';\n    LinkedEditingRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    LinkedEditingRangeRequest.type = new messages_1.ProtocolRequestType(LinkedEditingRangeRequest.method);\n})(LinkedEditingRangeRequest = exports.LinkedEditingRangeRequest || (exports.LinkedEditingRangeRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MonikerRequest = exports.MonikerKind = exports.UniquenessLevel = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * Moniker uniqueness level to define scope of the moniker.\n *\n * @since 3.16.0\n */\nvar UniquenessLevel;\n(function (UniquenessLevel) {\n    /**\n     * The moniker is only unique inside a document\n     */\n    UniquenessLevel.document = 'document';\n    /**\n     * The moniker is unique inside a project for which a dump got created\n     */\n    UniquenessLevel.project = 'project';\n    /**\n     * The moniker is unique inside the group to which a project belongs\n     */\n    UniquenessLevel.group = 'group';\n    /**\n     * The moniker is unique inside the moniker scheme.\n     */\n    UniquenessLevel.scheme = 'scheme';\n    /**\n     * The moniker is globally unique\n     */\n    UniquenessLevel.global = 'global';\n})(UniquenessLevel = exports.UniquenessLevel || (exports.UniquenessLevel = {}));\n/**\n * The moniker kind.\n *\n * @since 3.16.0\n */\nvar MonikerKind;\n(function (MonikerKind) {\n    /**\n     * The moniker represent a symbol that is imported into a project\n     */\n    MonikerKind.$import = 'import';\n    /**\n     * The moniker represents a symbol that is exported from a project\n     */\n    MonikerKind.$export = 'export';\n    /**\n     * The moniker represents a symbol that is local to a project (e.g. a local\n     * variable of a function, a class not visible outside the project, ...)\n     */\n    MonikerKind.local = 'local';\n})(MonikerKind = exports.MonikerKind || (exports.MonikerKind = {}));\n/**\n * A request to get the moniker of a symbol at a given text document position.\n * The request parameter is of type {@link TextDocumentPositionParams}.\n * The response is of type {@link Moniker Moniker[]} or `null`.\n */\nvar MonikerRequest;\n(function (MonikerRequest) {\n    MonikerRequest.method = 'textDocument/moniker';\n    MonikerRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    MonikerRequest.type = new messages_1.ProtocolRequestType(MonikerRequest.method);\n})(MonikerRequest = exports.MonikerRequest || (exports.MonikerRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DidCloseNotebookDocumentNotification = exports.DidSaveNotebookDocumentNotification = exports.DidChangeNotebookDocumentNotification = exports.NotebookCellArrayChange = exports.DidOpenNotebookDocumentNotification = exports.NotebookDocumentSyncRegistrationType = exports.NotebookDocument = exports.NotebookCell = exports.ExecutionSummary = exports.NotebookCellKind = void 0;\nconst vscode_languageserver_types_1 = require(\"vscode-languageserver-types\");\nconst Is = require(\"./utils/is\");\nconst messages_1 = require(\"./messages\");\n/**\n * A notebook cell kind.\n *\n * @since 3.17.0\n */\nvar NotebookCellKind;\n(function (NotebookCellKind) {\n    /**\n     * A markup-cell is formatted source that is used for display.\n     */\n    NotebookCellKind.Markup = 1;\n    /**\n     * A code-cell is source code.\n     */\n    NotebookCellKind.Code = 2;\n    function is(value) {\n        return value === 1 || value === 2;\n    }\n    NotebookCellKind.is = is;\n})(NotebookCellKind = exports.NotebookCellKind || (exports.NotebookCellKind = {}));\nvar ExecutionSummary;\n(function (ExecutionSummary) {\n    function create(executionOrder, success) {\n        const result = { executionOrder };\n        if (success === true || success === false) {\n            result.success = success;\n        }\n        return result;\n    }\n    ExecutionSummary.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && vscode_languageserver_types_1.uinteger.is(candidate.executionOrder) && (candidate.success === undefined || Is.boolean(candidate.success));\n    }\n    ExecutionSummary.is = is;\n    function equals(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === null || one === undefined || other === null || other === undefined) {\n            return false;\n        }\n        return one.executionOrder === other.executionOrder && one.success === other.success;\n    }\n    ExecutionSummary.equals = equals;\n})(ExecutionSummary = exports.ExecutionSummary || (exports.ExecutionSummary = {}));\nvar NotebookCell;\n(function (NotebookCell) {\n    function create(kind, document) {\n        return { kind, document };\n    }\n    NotebookCell.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && NotebookCellKind.is(candidate.kind) && vscode_languageserver_types_1.DocumentUri.is(candidate.document) &&\n            (candidate.metadata === undefined || Is.objectLiteral(candidate.metadata));\n    }\n    NotebookCell.is = is;\n    function diff(one, two) {\n        const result = new Set();\n        if (one.document !== two.document) {\n            result.add('document');\n        }\n        if (one.kind !== two.kind) {\n            result.add('kind');\n        }\n        if (one.executionSummary !== two.executionSummary) {\n            result.add('executionSummary');\n        }\n        if ((one.metadata !== undefined || two.metadata !== undefined) && !equalsMetadata(one.metadata, two.metadata)) {\n            result.add('metadata');\n        }\n        if ((one.executionSummary !== undefined || two.executionSummary !== undefined) && !ExecutionSummary.equals(one.executionSummary, two.executionSummary)) {\n            result.add('executionSummary');\n        }\n        return result;\n    }\n    NotebookCell.diff = diff;\n    function equalsMetadata(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === null || one === undefined || other === null || other === undefined) {\n            return false;\n        }\n        if (typeof one !== typeof other) {\n            return false;\n        }\n        if (typeof one !== 'object') {\n            return false;\n        }\n        const oneArray = Array.isArray(one);\n        const otherArray = Array.isArray(other);\n        if (oneArray !== otherArray) {\n            return false;\n        }\n        if (oneArray && otherArray) {\n            if (one.length !== other.length) {\n                return false;\n            }\n            for (let i = 0; i < one.length; i++) {\n                if (!equalsMetadata(one[i], other[i])) {\n                    return false;\n                }\n            }\n        }\n        if (Is.objectLiteral(one) && Is.objectLiteral(other)) {\n            const oneKeys = Object.keys(one);\n            const otherKeys = Object.keys(other);\n            if (oneKeys.length !== otherKeys.length) {\n                return false;\n            }\n            oneKeys.sort();\n            otherKeys.sort();\n            if (!equalsMetadata(oneKeys, otherKeys)) {\n                return false;\n            }\n            for (let i = 0; i < oneKeys.length; i++) {\n                const prop = oneKeys[i];\n                if (!equalsMetadata(one[prop], other[prop])) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n})(NotebookCell = exports.NotebookCell || (exports.NotebookCell = {}));\nvar NotebookDocument;\n(function (NotebookDocument) {\n    function create(uri, notebookType, version, cells) {\n        return { uri, notebookType, version, cells };\n    }\n    NotebookDocument.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.string(candidate.uri) && vscode_languageserver_types_1.integer.is(candidate.version) && Is.typedArray(candidate.cells, NotebookCell.is);\n    }\n    NotebookDocument.is = is;\n})(NotebookDocument = exports.NotebookDocument || (exports.NotebookDocument = {}));\nvar NotebookDocumentSyncRegistrationType;\n(function (NotebookDocumentSyncRegistrationType) {\n    NotebookDocumentSyncRegistrationType.method = 'notebookDocument/sync';\n    NotebookDocumentSyncRegistrationType.messageDirection = messages_1.MessageDirection.clientToServer;\n    NotebookDocumentSyncRegistrationType.type = new messages_1.RegistrationType(NotebookDocumentSyncRegistrationType.method);\n})(NotebookDocumentSyncRegistrationType = exports.NotebookDocumentSyncRegistrationType || (exports.NotebookDocumentSyncRegistrationType = {}));\n/**\n * A notification sent when a notebook opens.\n *\n * @since 3.17.0\n */\nvar DidOpenNotebookDocumentNotification;\n(function (DidOpenNotebookDocumentNotification) {\n    DidOpenNotebookDocumentNotification.method = 'notebookDocument/didOpen';\n    DidOpenNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidOpenNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenNotebookDocumentNotification.method);\n    DidOpenNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidOpenNotebookDocumentNotification = exports.DidOpenNotebookDocumentNotification || (exports.DidOpenNotebookDocumentNotification = {}));\nvar NotebookCellArrayChange;\n(function (NotebookCellArrayChange) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && vscode_languageserver_types_1.uinteger.is(candidate.start) && vscode_languageserver_types_1.uinteger.is(candidate.deleteCount) && (candidate.cells === undefined || Is.typedArray(candidate.cells, NotebookCell.is));\n    }\n    NotebookCellArrayChange.is = is;\n    function create(start, deleteCount, cells) {\n        const result = { start, deleteCount };\n        if (cells !== undefined) {\n            result.cells = cells;\n        }\n        return result;\n    }\n    NotebookCellArrayChange.create = create;\n})(NotebookCellArrayChange = exports.NotebookCellArrayChange || (exports.NotebookCellArrayChange = {}));\nvar DidChangeNotebookDocumentNotification;\n(function (DidChangeNotebookDocumentNotification) {\n    DidChangeNotebookDocumentNotification.method = 'notebookDocument/didChange';\n    DidChangeNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeNotebookDocumentNotification.method);\n    DidChangeNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidChangeNotebookDocumentNotification = exports.DidChangeNotebookDocumentNotification || (exports.DidChangeNotebookDocumentNotification = {}));\n/**\n * A notification sent when a notebook document is saved.\n *\n * @since 3.17.0\n */\nvar DidSaveNotebookDocumentNotification;\n(function (DidSaveNotebookDocumentNotification) {\n    DidSaveNotebookDocumentNotification.method = 'notebookDocument/didSave';\n    DidSaveNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidSaveNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveNotebookDocumentNotification.method);\n    DidSaveNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidSaveNotebookDocumentNotification = exports.DidSaveNotebookDocumentNotification || (exports.DidSaveNotebookDocumentNotification = {}));\n/**\n * A notification sent when a notebook closes.\n *\n * @since 3.17.0\n */\nvar DidCloseNotebookDocumentNotification;\n(function (DidCloseNotebookDocumentNotification) {\n    DidCloseNotebookDocumentNotification.method = 'notebookDocument/didClose';\n    DidCloseNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCloseNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseNotebookDocumentNotification.method);\n    DidCloseNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidCloseNotebookDocumentNotification = exports.DidCloseNotebookDocumentNotification || (exports.DidCloseNotebookDocumentNotification = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkDoneProgressCancelNotification = exports.WorkDoneProgressCreateRequest = exports.WorkDoneProgress = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\nvar WorkDoneProgress;\n(function (WorkDoneProgress) {\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\n    function is(value) {\n        return value === WorkDoneProgress.type;\n    }\n    WorkDoneProgress.is = is;\n})(WorkDoneProgress = exports.WorkDoneProgress || (exports.WorkDoneProgress = {}));\n/**\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\n * reporting from the server.\n */\nvar WorkDoneProgressCreateRequest;\n(function (WorkDoneProgressCreateRequest) {\n    WorkDoneProgressCreateRequest.method = 'window/workDoneProgress/create';\n    WorkDoneProgressCreateRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType(WorkDoneProgressCreateRequest.method);\n})(WorkDoneProgressCreateRequest = exports.WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = {}));\n/**\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\n * initiated on the server side.\n */\nvar WorkDoneProgressCancelNotification;\n(function (WorkDoneProgressCancelNotification) {\n    WorkDoneProgressCancelNotification.method = 'window/workDoneProgress/cancel';\n    WorkDoneProgressCancelNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType(WorkDoneProgressCancelNotification.method);\n})(WorkDoneProgressCancelNotification = exports.WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SelectionRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide selection ranges in a document. The request's\n * parameter is of type {@link SelectionRangeParams}, the\n * response is of type {@link SelectionRange SelectionRange[]} or a Thenable\n * that resolves to such.\n */\nvar SelectionRangeRequest;\n(function (SelectionRangeRequest) {\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\n    SelectionRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\n})(SelectionRangeRequest = exports.SelectionRangeRequest || (exports.SelectionRangeRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SemanticTokensRefreshRequest = exports.SemanticTokensRangeRequest = exports.SemanticTokensDeltaRequest = exports.SemanticTokensRequest = exports.SemanticTokensRegistrationType = exports.TokenFormat = void 0;\nconst messages_1 = require(\"./messages\");\n//------- 'textDocument/semanticTokens' -----\nvar TokenFormat;\n(function (TokenFormat) {\n    TokenFormat.Relative = 'relative';\n})(TokenFormat = exports.TokenFormat || (exports.TokenFormat = {}));\nvar SemanticTokensRegistrationType;\n(function (SemanticTokensRegistrationType) {\n    SemanticTokensRegistrationType.method = 'textDocument/semanticTokens';\n    SemanticTokensRegistrationType.type = new messages_1.RegistrationType(SemanticTokensRegistrationType.method);\n})(SemanticTokensRegistrationType = exports.SemanticTokensRegistrationType || (exports.SemanticTokensRegistrationType = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRequest;\n(function (SemanticTokensRequest) {\n    SemanticTokensRequest.method = 'textDocument/semanticTokens/full';\n    SemanticTokensRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRequest.method);\n    SemanticTokensRequest.registrationMethod = SemanticTokensRegistrationType.method;\n})(SemanticTokensRequest = exports.SemanticTokensRequest || (exports.SemanticTokensRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensDeltaRequest;\n(function (SemanticTokensDeltaRequest) {\n    SemanticTokensDeltaRequest.method = 'textDocument/semanticTokens/full/delta';\n    SemanticTokensDeltaRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensDeltaRequest.type = new messages_1.ProtocolRequestType(SemanticTokensDeltaRequest.method);\n    SemanticTokensDeltaRequest.registrationMethod = SemanticTokensRegistrationType.method;\n})(SemanticTokensDeltaRequest = exports.SemanticTokensDeltaRequest || (exports.SemanticTokensDeltaRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRangeRequest;\n(function (SemanticTokensRangeRequest) {\n    SemanticTokensRangeRequest.method = 'textDocument/semanticTokens/range';\n    SemanticTokensRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensRangeRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method);\n    SemanticTokensRangeRequest.registrationMethod = SemanticTokensRegistrationType.method;\n})(SemanticTokensRangeRequest = exports.SemanticTokensRangeRequest || (exports.SemanticTokensRangeRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRefreshRequest;\n(function (SemanticTokensRefreshRequest) {\n    SemanticTokensRefreshRequest.method = `workspace/semanticTokens/refresh`;\n    SemanticTokensRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    SemanticTokensRefreshRequest.type = new messages_1.ProtocolRequestType0(SemanticTokensRefreshRequest.method);\n})(SemanticTokensRefreshRequest = exports.SemanticTokensRefreshRequest || (exports.SemanticTokensRefreshRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ShowDocumentRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to show a document. This request might open an\n * external program depending on the value of the URI to open.\n * For example a request to open `https://code.visualstudio.com/`\n * will very likely open the URI in a WEB browser.\n *\n * @since 3.16.0\n*/\nvar ShowDocumentRequest;\n(function (ShowDocumentRequest) {\n    ShowDocumentRequest.method = 'window/showDocument';\n    ShowDocumentRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowDocumentRequest.type = new messages_1.ProtocolRequestType(ShowDocumentRequest.method);\n})(ShowDocumentRequest = exports.ShowDocumentRequest || (exports.ShowDocumentRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeDefinitionRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type [TextDocumentPositionParams]\n * (#TextDocumentPositionParams) the response is of type {@link Definition} or a\n * Thenable that resolves to such.\n */\nvar TypeDefinitionRequest;\n(function (TypeDefinitionRequest) {\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\n    TypeDefinitionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) TypeFox, Microsoft and others. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeHierarchySubtypesRequest = exports.TypeHierarchySupertypesRequest = exports.TypeHierarchyPrepareRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to result a `TypeHierarchyItem` in a document at a given position.\n * Can be used as an input to a subtypes or supertypes type hierarchy.\n *\n * @since 3.17.0\n */\nvar TypeHierarchyPrepareRequest;\n(function (TypeHierarchyPrepareRequest) {\n    TypeHierarchyPrepareRequest.method = 'textDocument/prepareTypeHierarchy';\n    TypeHierarchyPrepareRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(TypeHierarchyPrepareRequest.method);\n})(TypeHierarchyPrepareRequest = exports.TypeHierarchyPrepareRequest || (exports.TypeHierarchyPrepareRequest = {}));\n/**\n * A request to resolve the supertypes for a given `TypeHierarchyItem`.\n *\n * @since 3.17.0\n */\nvar TypeHierarchySupertypesRequest;\n(function (TypeHierarchySupertypesRequest) {\n    TypeHierarchySupertypesRequest.method = 'typeHierarchy/supertypes';\n    TypeHierarchySupertypesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchySupertypesRequest.type = new messages_1.ProtocolRequestType(TypeHierarchySupertypesRequest.method);\n})(TypeHierarchySupertypesRequest = exports.TypeHierarchySupertypesRequest || (exports.TypeHierarchySupertypesRequest = {}));\n/**\n * A request to resolve the subtypes for a given `TypeHierarchyItem`.\n *\n * @since 3.17.0\n */\nvar TypeHierarchySubtypesRequest;\n(function (TypeHierarchySubtypesRequest) {\n    TypeHierarchySubtypesRequest.method = 'typeHierarchy/subtypes';\n    TypeHierarchySubtypesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchySubtypesRequest.type = new messages_1.ProtocolRequestType(TypeHierarchySubtypesRequest.method);\n})(TypeHierarchySubtypesRequest = exports.TypeHierarchySubtypesRequest || (exports.TypeHierarchySubtypesRequest = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DidChangeWorkspaceFoldersNotification = exports.WorkspaceFoldersRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\n */\nvar WorkspaceFoldersRequest;\n(function (WorkspaceFoldersRequest) {\n    WorkspaceFoldersRequest.method = 'workspace/workspaceFolders';\n    WorkspaceFoldersRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0(WorkspaceFoldersRequest.method);\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\n/**\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\n * folder configuration changes.\n */\nvar DidChangeWorkspaceFoldersNotification;\n(function (DidChangeWorkspaceFoldersNotification) {\n    DidChangeWorkspaceFoldersNotification.method = 'workspace/didChangeWorkspaceFolders';\n    DidChangeWorkspaceFoldersNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType(DidChangeWorkspaceFoldersNotification.method);\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.objectLiteral = exports.typedArray = exports.stringArray = exports.array = exports.func = exports.error = exports.number = exports.string = exports.boolean = void 0;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nexports.typedArray = typedArray;\nfunction objectLiteral(value) {\n    // Strictly speaking class instances pass this check as well. Since the LSP\n    // doesn't use classes we ignore this for now. If we do we need to add something\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n    return value !== null && typeof value === 'object';\n}\nexports.objectLiteral = objectLiteral;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createProtocolConnection = void 0;\nconst node_1 = require(\"vscode-jsonrpc/node\");\n__exportStar(require(\"vscode-jsonrpc/node\"), exports);\n__exportStar(require(\"../common/api\"), exports);\nfunction createProtocolConnection(input, output, logger, options) {\n    return (0, node_1.createMessageConnection)(input, output, logger, options);\n}\nexports.createProtocolConnection = createProtocolConnection;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar FullTextDocument = /** @class */ (function () {\n    function FullTextDocument(uri, languageId, version, content) {\n        this._uri = uri;\n        this._languageId = languageId;\n        this._version = version;\n        this._content = content;\n        this._lineOffsets = undefined;\n    }\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\n        get: function () {\n            return this._uri;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\n        get: function () {\n            return this._languageId;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\n        get: function () {\n            return this._version;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FullTextDocument.prototype.getText = function (range) {\n        if (range) {\n            var start = this.offsetAt(range.start);\n            var end = this.offsetAt(range.end);\n            return this._content.substring(start, end);\n        }\n        return this._content;\n    };\n    FullTextDocument.prototype.update = function (changes, version) {\n        for (var _i = 0, changes_1 = changes; _i < changes_1.length; _i++) {\n            var change = changes_1[_i];\n            if (FullTextDocument.isIncremental(change)) {\n                // makes sure start is before end\n                var range = getWellformedRange(change.range);\n                // update content\n                var startOffset = this.offsetAt(range.start);\n                var endOffset = this.offsetAt(range.end);\n                this._content = this._content.substring(0, startOffset) + change.text + this._content.substring(endOffset, this._content.length);\n                // update the offsets\n                var startLine = Math.max(range.start.line, 0);\n                var endLine = Math.max(range.end.line, 0);\n                var lineOffsets = this._lineOffsets;\n                var addedLineOffsets = computeLineOffsets(change.text, false, startOffset);\n                if (endLine - startLine === addedLineOffsets.length) {\n                    for (var i = 0, len = addedLineOffsets.length; i < len; i++) {\n                        lineOffsets[i + startLine + 1] = addedLineOffsets[i];\n                    }\n                }\n                else {\n                    if (addedLineOffsets.length < 10000) {\n                        lineOffsets.splice.apply(lineOffsets, __spreadArray([startLine + 1, endLine - startLine], addedLineOffsets, false));\n                    }\n                    else { // avoid too many arguments for splice\n                        this._lineOffsets = lineOffsets = lineOffsets.slice(0, startLine + 1).concat(addedLineOffsets, lineOffsets.slice(endLine + 1));\n                    }\n                }\n                var diff = change.text.length - (endOffset - startOffset);\n                if (diff !== 0) {\n                    for (var i = startLine + 1 + addedLineOffsets.length, len = lineOffsets.length; i < len; i++) {\n                        lineOffsets[i] = lineOffsets[i] + diff;\n                    }\n                }\n            }\n            else if (FullTextDocument.isFull(change)) {\n                this._content = change.text;\n                this._lineOffsets = undefined;\n            }\n            else {\n                throw new Error('Unknown change event received');\n            }\n        }\n        this._version = version;\n    };\n    FullTextDocument.prototype.getLineOffsets = function () {\n        if (this._lineOffsets === undefined) {\n            this._lineOffsets = computeLineOffsets(this._content, true);\n        }\n        return this._lineOffsets;\n    };\n    FullTextDocument.prototype.positionAt = function (offset) {\n        offset = Math.max(Math.min(offset, this._content.length), 0);\n        var lineOffsets = this.getLineOffsets();\n        var low = 0, high = lineOffsets.length;\n        if (high === 0) {\n            return { line: 0, character: offset };\n        }\n        while (low < high) {\n            var mid = Math.floor((low + high) / 2);\n            if (lineOffsets[mid] > offset) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        // low is the least x for which the line offset is larger than the current offset\n        // or array.length if no line offset is larger than the current offset\n        var line = low - 1;\n        return { line: line, character: offset - lineOffsets[line] };\n    };\n    FullTextDocument.prototype.offsetAt = function (position) {\n        var lineOffsets = this.getLineOffsets();\n        if (position.line >= lineOffsets.length) {\n            return this._content.length;\n        }\n        else if (position.line < 0) {\n            return 0;\n        }\n        var lineOffset = lineOffsets[position.line];\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\n    };\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\n        get: function () {\n            return this.getLineOffsets().length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FullTextDocument.isIncremental = function (event) {\n        var candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range !== undefined &&\n            (candidate.rangeLength === undefined || typeof candidate.rangeLength === 'number');\n    };\n    FullTextDocument.isFull = function (event) {\n        var candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range === undefined && candidate.rangeLength === undefined;\n    };\n    return FullTextDocument;\n}());\nexport var TextDocument;\n(function (TextDocument) {\n    /**\n     * Creates a new text document.\n     *\n     * @param uri The document's uri.\n     * @param languageId  The document's language Id.\n     * @param version The document's initial version number.\n     * @param content The document's content.\n     */\n    function create(uri, languageId, version, content) {\n        return new FullTextDocument(uri, languageId, version, content);\n    }\n    TextDocument.create = create;\n    /**\n     * Updates a TextDocument by modifying its content.\n     *\n     * @param document the document to update. Only documents created by TextDocument.create are valid inputs.\n     * @param changes the changes to apply to the document.\n     * @param version the changes version for the document.\n     * @returns The updated TextDocument. Note: That's the same document instance passed in as first parameter.\n     *\n     */\n    function update(document, changes, version) {\n        if (document instanceof FullTextDocument) {\n            document.update(changes, version);\n            return document;\n        }\n        else {\n            throw new Error('TextDocument.update: document must be created by TextDocument.create');\n        }\n    }\n    TextDocument.update = update;\n    function applyEdits(document, edits) {\n        var text = document.getText();\n        var sortedEdits = mergeSort(edits.map(getWellformedEdit), function (a, b) {\n            var diff = a.range.start.line - b.range.start.line;\n            if (diff === 0) {\n                return a.range.start.character - b.range.start.character;\n            }\n            return diff;\n        });\n        var lastModifiedOffset = 0;\n        var spans = [];\n        for (var _i = 0, sortedEdits_1 = sortedEdits; _i < sortedEdits_1.length; _i++) {\n            var e = sortedEdits_1[_i];\n            var startOffset = document.offsetAt(e.range.start);\n            if (startOffset < lastModifiedOffset) {\n                throw new Error('Overlapping edit');\n            }\n            else if (startOffset > lastModifiedOffset) {\n                spans.push(text.substring(lastModifiedOffset, startOffset));\n            }\n            if (e.newText.length) {\n                spans.push(e.newText);\n            }\n            lastModifiedOffset = document.offsetAt(e.range.end);\n        }\n        spans.push(text.substr(lastModifiedOffset));\n        return spans.join('');\n    }\n    TextDocument.applyEdits = applyEdits;\n})(TextDocument || (TextDocument = {}));\nfunction mergeSort(data, compare) {\n    if (data.length <= 1) {\n        // sorted\n        return data;\n    }\n    var p = (data.length / 2) | 0;\n    var left = data.slice(0, p);\n    var right = data.slice(p);\n    mergeSort(left, compare);\n    mergeSort(right, compare);\n    var leftIdx = 0;\n    var rightIdx = 0;\n    var i = 0;\n    while (leftIdx < left.length && rightIdx < right.length) {\n        var ret = compare(left[leftIdx], right[rightIdx]);\n        if (ret <= 0) {\n            // smaller_equal -> take left to preserve order\n            data[i++] = left[leftIdx++];\n        }\n        else {\n            // greater -> take right\n            data[i++] = right[rightIdx++];\n        }\n    }\n    while (leftIdx < left.length) {\n        data[i++] = left[leftIdx++];\n    }\n    while (rightIdx < right.length) {\n        data[i++] = right[rightIdx++];\n    }\n    return data;\n}\nfunction computeLineOffsets(text, isAtLineStart, textOffset) {\n    if (textOffset === void 0) { textOffset = 0; }\n    var result = isAtLineStart ? [textOffset] : [];\n    for (var i = 0; i < text.length; i++) {\n        var ch = text.charCodeAt(i);\n        if (ch === 13 /* CharCode.CarriageReturn */ || ch === 10 /* CharCode.LineFeed */) {\n            if (ch === 13 /* CharCode.CarriageReturn */ && i + 1 < text.length && text.charCodeAt(i + 1) === 10 /* CharCode.LineFeed */) {\n                i++;\n            }\n            result.push(textOffset + i + 1);\n        }\n    }\n    return result;\n}\nfunction getWellformedRange(range) {\n    var start = range.start;\n    var end = range.end;\n    if (start.line > end.line || (start.line === end.line && start.character > end.character)) {\n        return { start: end, end: start };\n    }\n    return range;\n}\nfunction getWellformedEdit(textEdit) {\n    var range = getWellformedRange(textEdit.range);\n    if (range !== textEdit.range) {\n        return { newText: textEdit.newText, range: range };\n    }\n    return textEdit;\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nexport var DocumentUri;\n(function (DocumentUri) {\n    function is(value) {\n        return typeof value === 'string';\n    }\n    DocumentUri.is = is;\n})(DocumentUri || (DocumentUri = {}));\nexport var URI;\n(function (URI) {\n    function is(value) {\n        return typeof value === 'string';\n    }\n    URI.is = is;\n})(URI || (URI = {}));\nexport var integer;\n(function (integer) {\n    integer.MIN_VALUE = -2147483648;\n    integer.MAX_VALUE = 2147483647;\n    function is(value) {\n        return typeof value === 'number' && integer.MIN_VALUE <= value && value <= integer.MAX_VALUE;\n    }\n    integer.is = is;\n})(integer || (integer = {}));\nexport var uinteger;\n(function (uinteger) {\n    uinteger.MIN_VALUE = 0;\n    uinteger.MAX_VALUE = 2147483647;\n    function is(value) {\n        return typeof value === 'number' && uinteger.MIN_VALUE <= value && value <= uinteger.MAX_VALUE;\n    }\n    uinteger.is = is;\n})(uinteger || (uinteger = {}));\n/**\n * The Position namespace provides helper functions to work with\n * {@link Position} literals.\n */\nexport var Position;\n(function (Position) {\n    /**\n     * Creates a new Position literal from the given line and character.\n     * @param line The position's line.\n     * @param character The position's character.\n     */\n    function create(line, character) {\n        if (line === Number.MAX_VALUE) {\n            line = uinteger.MAX_VALUE;\n        }\n        if (character === Number.MAX_VALUE) {\n            character = uinteger.MAX_VALUE;\n        }\n        return { line: line, character: character };\n    }\n    Position.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Position} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Is.uinteger(candidate.line) && Is.uinteger(candidate.character);\n    }\n    Position.is = is;\n})(Position || (Position = {}));\n/**\n * The Range namespace provides helper functions to work with\n * {@link Range} literals.\n */\nexport var Range;\n(function (Range) {\n    function create(one, two, three, four) {\n        if (Is.uinteger(one) && Is.uinteger(two) && Is.uinteger(three) && Is.uinteger(four)) {\n            return { start: Position.create(one, two), end: Position.create(three, four) };\n        }\n        else if (Position.is(one) && Position.is(two)) {\n            return { start: one, end: two };\n        }\n        else {\n            throw new Error(\"Range#create called with invalid arguments[\".concat(one, \", \").concat(two, \", \").concat(three, \", \").concat(four, \"]\"));\n        }\n    }\n    Range.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Range} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\n    }\n    Range.is = is;\n})(Range || (Range = {}));\n/**\n * The Location namespace provides helper functions to work with\n * {@link Location} literals.\n */\nexport var Location;\n(function (Location) {\n    /**\n     * Creates a Location literal.\n     * @param uri The location's uri.\n     * @param range The location's range.\n     */\n    function create(uri, range) {\n        return { uri: uri, range: range };\n    }\n    Location.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Location} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\n    }\n    Location.is = is;\n})(Location || (Location = {}));\n/**\n * The LocationLink namespace provides helper functions to work with\n * {@link LocationLink} literals.\n */\nexport var LocationLink;\n(function (LocationLink) {\n    /**\n     * Creates a LocationLink literal.\n     * @param targetUri The definition's uri.\n     * @param targetRange The full range of the definition.\n     * @param targetSelectionRange The span of the symbol definition at the target.\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\n     */\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\n    }\n    LocationLink.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link LocationLink} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\n            && Range.is(candidate.targetSelectionRange)\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\n    }\n    LocationLink.is = is;\n})(LocationLink || (LocationLink = {}));\n/**\n * The Color namespace provides helper functions to work with\n * {@link Color} literals.\n */\nexport var Color;\n(function (Color) {\n    /**\n     * Creates a new Color literal.\n     */\n    function create(red, green, blue, alpha) {\n        return {\n            red: red,\n            green: green,\n            blue: blue,\n            alpha: alpha,\n        };\n    }\n    Color.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Color} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Is.numberRange(candidate.red, 0, 1)\n            && Is.numberRange(candidate.green, 0, 1)\n            && Is.numberRange(candidate.blue, 0, 1)\n            && Is.numberRange(candidate.alpha, 0, 1);\n    }\n    Color.is = is;\n})(Color || (Color = {}));\n/**\n * The ColorInformation namespace provides helper functions to work with\n * {@link ColorInformation} literals.\n */\nexport var ColorInformation;\n(function (ColorInformation) {\n    /**\n     * Creates a new ColorInformation literal.\n     */\n    function create(range, color) {\n        return {\n            range: range,\n            color: color,\n        };\n    }\n    ColorInformation.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link ColorInformation} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Range.is(candidate.range) && Color.is(candidate.color);\n    }\n    ColorInformation.is = is;\n})(ColorInformation || (ColorInformation = {}));\n/**\n * The Color namespace provides helper functions to work with\n * {@link ColorPresentation} literals.\n */\nexport var ColorPresentation;\n(function (ColorPresentation) {\n    /**\n     * Creates a new ColorInformation literal.\n     */\n    function create(label, textEdit, additionalTextEdits) {\n        return {\n            label: label,\n            textEdit: textEdit,\n            additionalTextEdits: additionalTextEdits,\n        };\n    }\n    ColorPresentation.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link ColorInformation} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Is.string(candidate.label)\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\n    }\n    ColorPresentation.is = is;\n})(ColorPresentation || (ColorPresentation = {}));\n/**\n * A set of predefined range kinds.\n */\nexport var FoldingRangeKind;\n(function (FoldingRangeKind) {\n    /**\n     * Folding range for a comment\n     */\n    FoldingRangeKind.Comment = 'comment';\n    /**\n     * Folding range for an import or include\n     */\n    FoldingRangeKind.Imports = 'imports';\n    /**\n     * Folding range for a region (e.g. `#region`)\n     */\n    FoldingRangeKind.Region = 'region';\n})(FoldingRangeKind || (FoldingRangeKind = {}));\n/**\n * The folding range namespace provides helper functions to work with\n * {@link FoldingRange} literals.\n */\nexport var FoldingRange;\n(function (FoldingRange) {\n    /**\n     * Creates a new FoldingRange literal.\n     */\n    function create(startLine, endLine, startCharacter, endCharacter, kind, collapsedText) {\n        var result = {\n            startLine: startLine,\n            endLine: endLine\n        };\n        if (Is.defined(startCharacter)) {\n            result.startCharacter = startCharacter;\n        }\n        if (Is.defined(endCharacter)) {\n            result.endCharacter = endCharacter;\n        }\n        if (Is.defined(kind)) {\n            result.kind = kind;\n        }\n        if (Is.defined(collapsedText)) {\n            result.collapsedText = collapsedText;\n        }\n        return result;\n    }\n    FoldingRange.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link FoldingRange} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Is.uinteger(candidate.startLine) && Is.uinteger(candidate.startLine)\n            && (Is.undefined(candidate.startCharacter) || Is.uinteger(candidate.startCharacter))\n            && (Is.undefined(candidate.endCharacter) || Is.uinteger(candidate.endCharacter))\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\n    }\n    FoldingRange.is = is;\n})(FoldingRange || (FoldingRange = {}));\n/**\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\n * {@link DiagnosticRelatedInformation} literals.\n */\nexport var DiagnosticRelatedInformation;\n(function (DiagnosticRelatedInformation) {\n    /**\n     * Creates a new DiagnosticRelatedInformation literal.\n     */\n    function create(location, message) {\n        return {\n            location: location,\n            message: message\n        };\n    }\n    DiagnosticRelatedInformation.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link DiagnosticRelatedInformation} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\n    }\n    DiagnosticRelatedInformation.is = is;\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\n/**\n * The diagnostic's severity.\n */\nexport var DiagnosticSeverity;\n(function (DiagnosticSeverity) {\n    /**\n     * Reports an error.\n     */\n    DiagnosticSeverity.Error = 1;\n    /**\n     * Reports a warning.\n     */\n    DiagnosticSeverity.Warning = 2;\n    /**\n     * Reports an information.\n     */\n    DiagnosticSeverity.Information = 3;\n    /**\n     * Reports a hint.\n     */\n    DiagnosticSeverity.Hint = 4;\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\n/**\n * The diagnostic tags.\n *\n * @since 3.15.0\n */\nexport var DiagnosticTag;\n(function (DiagnosticTag) {\n    /**\n     * Unused or unnecessary code.\n     *\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\n     * an error squiggle.\n     */\n    DiagnosticTag.Unnecessary = 1;\n    /**\n     * Deprecated or obsolete code.\n     *\n     * Clients are allowed to rendered diagnostics with this tag strike through.\n     */\n    DiagnosticTag.Deprecated = 2;\n})(DiagnosticTag || (DiagnosticTag = {}));\n/**\n * The CodeDescription namespace provides functions to deal with descriptions for diagnostic codes.\n *\n * @since 3.16.0\n */\nexport var CodeDescription;\n(function (CodeDescription) {\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Is.string(candidate.href);\n    }\n    CodeDescription.is = is;\n})(CodeDescription || (CodeDescription = {}));\n/**\n * The Diagnostic namespace provides helper functions to work with\n * {@link Diagnostic} literals.\n */\nexport var Diagnostic;\n(function (Diagnostic) {\n    /**\n     * Creates a new Diagnostic literal.\n     */\n    function create(range, message, severity, code, source, relatedInformation) {\n        var result = { range: range, message: message };\n        if (Is.defined(severity)) {\n            result.severity = severity;\n        }\n        if (Is.defined(code)) {\n            result.code = code;\n        }\n        if (Is.defined(source)) {\n            result.source = source;\n        }\n        if (Is.defined(relatedInformation)) {\n            result.relatedInformation = relatedInformation;\n        }\n        return result;\n    }\n    Diagnostic.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Diagnostic} interface.\n     */\n    function is(value) {\n        var _a;\n        var candidate = value;\n        return Is.defined(candidate)\n            && Range.is(candidate.range)\n            && Is.string(candidate.message)\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\n            && (Is.integer(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\n            && (Is.undefined(candidate.codeDescription) || (Is.string((_a = candidate.codeDescription) === null || _a === void 0 ? void 0 : _a.href)))\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\n    }\n    Diagnostic.is = is;\n})(Diagnostic || (Diagnostic = {}));\n/**\n * The Command namespace provides helper functions to work with\n * {@link Command} literals.\n */\nexport var Command;\n(function (Command) {\n    /**\n     * Creates a new Command literal.\n     */\n    function create(title, command) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var result = { title: title, command: command };\n        if (Is.defined(args) && args.length > 0) {\n            result.arguments = args;\n        }\n        return result;\n    }\n    Command.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link Command} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\n    }\n    Command.is = is;\n})(Command || (Command = {}));\n/**\n * The TextEdit namespace provides helper function to create replace,\n * insert and delete edits more easily.\n */\nexport var TextEdit;\n(function (TextEdit) {\n    /**\n     * Creates a replace text edit.\n     * @param range The range of text to be replaced.\n     * @param newText The new text.\n     */\n    function replace(range, newText) {\n        return { range: range, newText: newText };\n    }\n    TextEdit.replace = replace;\n    /**\n     * Creates an insert text edit.\n     * @param position The position to insert the text at.\n     * @param newText The text to be inserted.\n     */\n    function insert(position, newText) {\n        return { range: { start: position, end: position }, newText: newText };\n    }\n    TextEdit.insert = insert;\n    /**\n     * Creates a delete text edit.\n     * @param range The range of text to be deleted.\n     */\n    function del(range) {\n        return { range: range, newText: '' };\n    }\n    TextEdit.del = del;\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate)\n            && Is.string(candidate.newText)\n            && Range.is(candidate.range);\n    }\n    TextEdit.is = is;\n})(TextEdit || (TextEdit = {}));\nexport var ChangeAnnotation;\n(function (ChangeAnnotation) {\n    function create(label, needsConfirmation, description) {\n        var result = { label: label };\n        if (needsConfirmation !== undefined) {\n            result.needsConfirmation = needsConfirmation;\n        }\n        if (description !== undefined) {\n            result.description = description;\n        }\n        return result;\n    }\n    ChangeAnnotation.create = create;\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Is.string(candidate.label) &&\n            (Is.boolean(candidate.needsConfirmation) || candidate.needsConfirmation === undefined) &&\n            (Is.string(candidate.description) || candidate.description === undefined);\n    }\n    ChangeAnnotation.is = is;\n})(ChangeAnnotation || (ChangeAnnotation = {}));\nexport var ChangeAnnotationIdentifier;\n(function (ChangeAnnotationIdentifier) {\n    function is(value) {\n        var candidate = value;\n        return Is.string(candidate);\n    }\n    ChangeAnnotationIdentifier.is = is;\n})(ChangeAnnotationIdentifier || (ChangeAnnotationIdentifier = {}));\nexport var AnnotatedTextEdit;\n(function (AnnotatedTextEdit) {\n    /**\n     * Creates an annotated replace text edit.\n     *\n     * @param range The range of text to be replaced.\n     * @param newText The new text.\n     * @param annotation The annotation.\n     */\n    function replace(range, newText, annotation) {\n        return { range: range, newText: newText, annotationId: annotation };\n    }\n    AnnotatedTextEdit.replace = replace;\n    /**\n     * Creates an annotated insert text edit.\n     *\n     * @param position The position to insert the text at.\n     * @param newText The text to be inserted.\n     * @param annotation The annotation.\n     */\n    function insert(position, newText, annotation) {\n        return { range: { start: position, end: position }, newText: newText, annotationId: annotation };\n    }\n    AnnotatedTextEdit.insert = insert;\n    /**\n     * Creates an annotated delete text edit.\n     *\n     * @param range The range of text to be deleted.\n     * @param annotation The annotation.\n     */\n    function del(range, annotation) {\n        return { range: range, newText: '', annotationId: annotation };\n    }\n    AnnotatedTextEdit.del = del;\n    function is(value) {\n        var candidate = value;\n        return TextEdit.is(candidate) && (ChangeAnnotation.is(candidate.annotationId) || ChangeAnnotationIdentifier.is(candidate.annotationId));\n    }\n    AnnotatedTextEdit.is = is;\n})(AnnotatedTextEdit || (AnnotatedTextEdit = {}));\n/**\n * The TextDocumentEdit namespace provides helper function to create\n * an edit that manipulates a text document.\n */\nexport var TextDocumentEdit;\n(function (TextDocumentEdit) {\n    /**\n     * Creates a new `TextDocumentEdit`\n     */\n    function create(textDocument, edits) {\n        return { textDocument: textDocument, edits: edits };\n    }\n    TextDocumentEdit.create = create;\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate)\n            && OptionalVersionedTextDocumentIdentifier.is(candidate.textDocument)\n            && Array.isArray(candidate.edits);\n    }\n    TextDocumentEdit.is = is;\n})(TextDocumentEdit || (TextDocumentEdit = {}));\nexport var CreateFile;\n(function (CreateFile) {\n    function create(uri, options, annotation) {\n        var result = {\n            kind: 'create',\n            uri: uri\n        };\n        if (options !== undefined && (options.overwrite !== undefined || options.ignoreIfExists !== undefined)) {\n            result.options = options;\n        }\n        if (annotation !== undefined) {\n            result.annotationId = annotation;\n        }\n        return result;\n    }\n    CreateFile.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) && (candidate.options === undefined ||\n            ((candidate.options.overwrite === undefined || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === undefined || Is.boolean(candidate.options.ignoreIfExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n    }\n    CreateFile.is = is;\n})(CreateFile || (CreateFile = {}));\nexport var RenameFile;\n(function (RenameFile) {\n    function create(oldUri, newUri, options, annotation) {\n        var result = {\n            kind: 'rename',\n            oldUri: oldUri,\n            newUri: newUri\n        };\n        if (options !== undefined && (options.overwrite !== undefined || options.ignoreIfExists !== undefined)) {\n            result.options = options;\n        }\n        if (annotation !== undefined) {\n            result.annotationId = annotation;\n        }\n        return result;\n    }\n    RenameFile.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) && (candidate.options === undefined ||\n            ((candidate.options.overwrite === undefined || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === undefined || Is.boolean(candidate.options.ignoreIfExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n    }\n    RenameFile.is = is;\n})(RenameFile || (RenameFile = {}));\nexport var DeleteFile;\n(function (DeleteFile) {\n    function create(uri, options, annotation) {\n        var result = {\n            kind: 'delete',\n            uri: uri\n        };\n        if (options !== undefined && (options.recursive !== undefined || options.ignoreIfNotExists !== undefined)) {\n            result.options = options;\n        }\n        if (annotation !== undefined) {\n            result.annotationId = annotation;\n        }\n        return result;\n    }\n    DeleteFile.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) && (candidate.options === undefined ||\n            ((candidate.options.recursive === undefined || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === undefined || Is.boolean(candidate.options.ignoreIfNotExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n    }\n    DeleteFile.is = is;\n})(DeleteFile || (DeleteFile = {}));\nexport var WorkspaceEdit;\n(function (WorkspaceEdit) {\n    function is(value) {\n        var candidate = value;\n        return candidate &&\n            (candidate.changes !== undefined || candidate.documentChanges !== undefined) &&\n            (candidate.documentChanges === undefined || candidate.documentChanges.every(function (change) {\n                if (Is.string(change.kind)) {\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\n                }\n                else {\n                    return TextDocumentEdit.is(change);\n                }\n            }));\n    }\n    WorkspaceEdit.is = is;\n})(WorkspaceEdit || (WorkspaceEdit = {}));\nvar TextEditChangeImpl = /** @class */ (function () {\n    function TextEditChangeImpl(edits, changeAnnotations) {\n        this.edits = edits;\n        this.changeAnnotations = changeAnnotations;\n    }\n    TextEditChangeImpl.prototype.insert = function (position, newText, annotation) {\n        var edit;\n        var id;\n        if (annotation === undefined) {\n            edit = TextEdit.insert(position, newText);\n        }\n        else if (ChangeAnnotationIdentifier.is(annotation)) {\n            id = annotation;\n            edit = AnnotatedTextEdit.insert(position, newText, annotation);\n        }\n        else {\n            this.assertChangeAnnotations(this.changeAnnotations);\n            id = this.changeAnnotations.manage(annotation);\n            edit = AnnotatedTextEdit.insert(position, newText, id);\n        }\n        this.edits.push(edit);\n        if (id !== undefined) {\n            return id;\n        }\n    };\n    TextEditChangeImpl.prototype.replace = function (range, newText, annotation) {\n        var edit;\n        var id;\n        if (annotation === undefined) {\n            edit = TextEdit.replace(range, newText);\n        }\n        else if (ChangeAnnotationIdentifier.is(annotation)) {\n            id = annotation;\n            edit = AnnotatedTextEdit.replace(range, newText, annotation);\n        }\n        else {\n            this.assertChangeAnnotations(this.changeAnnotations);\n            id = this.changeAnnotations.manage(annotation);\n            edit = AnnotatedTextEdit.replace(range, newText, id);\n        }\n        this.edits.push(edit);\n        if (id !== undefined) {\n            return id;\n        }\n    };\n    TextEditChangeImpl.prototype.delete = function (range, annotation) {\n        var edit;\n        var id;\n        if (annotation === undefined) {\n            edit = TextEdit.del(range);\n        }\n        else if (ChangeAnnotationIdentifier.is(annotation)) {\n            id = annotation;\n            edit = AnnotatedTextEdit.del(range, annotation);\n        }\n        else {\n            this.assertChangeAnnotations(this.changeAnnotations);\n            id = this.changeAnnotations.manage(annotation);\n            edit = AnnotatedTextEdit.del(range, id);\n        }\n        this.edits.push(edit);\n        if (id !== undefined) {\n            return id;\n        }\n    };\n    TextEditChangeImpl.prototype.add = function (edit) {\n        this.edits.push(edit);\n    };\n    TextEditChangeImpl.prototype.all = function () {\n        return this.edits;\n    };\n    TextEditChangeImpl.prototype.clear = function () {\n        this.edits.splice(0, this.edits.length);\n    };\n    TextEditChangeImpl.prototype.assertChangeAnnotations = function (value) {\n        if (value === undefined) {\n            throw new Error(\"Text edit change is not configured to manage change annotations.\");\n        }\n    };\n    return TextEditChangeImpl;\n}());\n/**\n * A helper class\n */\nvar ChangeAnnotations = /** @class */ (function () {\n    function ChangeAnnotations(annotations) {\n        this._annotations = annotations === undefined ? Object.create(null) : annotations;\n        this._counter = 0;\n        this._size = 0;\n    }\n    ChangeAnnotations.prototype.all = function () {\n        return this._annotations;\n    };\n    Object.defineProperty(ChangeAnnotations.prototype, \"size\", {\n        get: function () {\n            return this._size;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ChangeAnnotations.prototype.manage = function (idOrAnnotation, annotation) {\n        var id;\n        if (ChangeAnnotationIdentifier.is(idOrAnnotation)) {\n            id = idOrAnnotation;\n        }\n        else {\n            id = this.nextId();\n            annotation = idOrAnnotation;\n        }\n        if (this._annotations[id] !== undefined) {\n            throw new Error(\"Id \".concat(id, \" is already in use.\"));\n        }\n        if (annotation === undefined) {\n            throw new Error(\"No annotation provided for id \".concat(id));\n        }\n        this._annotations[id] = annotation;\n        this._size++;\n        return id;\n    };\n    ChangeAnnotations.prototype.nextId = function () {\n        this._counter++;\n        return this._counter.toString();\n    };\n    return ChangeAnnotations;\n}());\n/**\n * A workspace change helps constructing changes to a workspace.\n */\nvar WorkspaceChange = /** @class */ (function () {\n    function WorkspaceChange(workspaceEdit) {\n        var _this = this;\n        this._textEditChanges = Object.create(null);\n        if (workspaceEdit !== undefined) {\n            this._workspaceEdit = workspaceEdit;\n            if (workspaceEdit.documentChanges) {\n                this._changeAnnotations = new ChangeAnnotations(workspaceEdit.changeAnnotations);\n                workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n                workspaceEdit.documentChanges.forEach(function (change) {\n                    if (TextDocumentEdit.is(change)) {\n                        var textEditChange = new TextEditChangeImpl(change.edits, _this._changeAnnotations);\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\n                    }\n                });\n            }\n            else if (workspaceEdit.changes) {\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\n                    _this._textEditChanges[key] = textEditChange;\n                });\n            }\n        }\n        else {\n            this._workspaceEdit = {};\n        }\n    }\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\n        /**\n         * Returns the underlying {@link WorkspaceEdit} literal\n         * use to be returned from a workspace edit operation like rename.\n         */\n        get: function () {\n            this.initDocumentChanges();\n            if (this._changeAnnotations !== undefined) {\n                if (this._changeAnnotations.size === 0) {\n                    this._workspaceEdit.changeAnnotations = undefined;\n                }\n                else {\n                    this._workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n                }\n            }\n            return this._workspaceEdit;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\n        if (OptionalVersionedTextDocumentIdentifier.is(key)) {\n            this.initDocumentChanges();\n            if (this._workspaceEdit.documentChanges === undefined) {\n                throw new Error('Workspace edit is not configured for document changes.');\n            }\n            var textDocument = { uri: key.uri, version: key.version };\n            var result = this._textEditChanges[textDocument.uri];\n            if (!result) {\n                var edits = [];\n                var textDocumentEdit = {\n                    textDocument: textDocument,\n                    edits: edits\n                };\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\n                result = new TextEditChangeImpl(edits, this._changeAnnotations);\n                this._textEditChanges[textDocument.uri] = result;\n            }\n            return result;\n        }\n        else {\n            this.initChanges();\n            if (this._workspaceEdit.changes === undefined) {\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\n            }\n            var result = this._textEditChanges[key];\n            if (!result) {\n                var edits = [];\n                this._workspaceEdit.changes[key] = edits;\n                result = new TextEditChangeImpl(edits);\n                this._textEditChanges[key] = result;\n            }\n            return result;\n        }\n    };\n    WorkspaceChange.prototype.initDocumentChanges = function () {\n        if (this._workspaceEdit.documentChanges === undefined && this._workspaceEdit.changes === undefined) {\n            this._changeAnnotations = new ChangeAnnotations();\n            this._workspaceEdit.documentChanges = [];\n            this._workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n        }\n    };\n    WorkspaceChange.prototype.initChanges = function () {\n        if (this._workspaceEdit.documentChanges === undefined && this._workspaceEdit.changes === undefined) {\n            this._workspaceEdit.changes = Object.create(null);\n        }\n    };\n    WorkspaceChange.prototype.createFile = function (uri, optionsOrAnnotation, options) {\n        this.initDocumentChanges();\n        if (this._workspaceEdit.documentChanges === undefined) {\n            throw new Error('Workspace edit is not configured for document changes.');\n        }\n        var annotation;\n        if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n            annotation = optionsOrAnnotation;\n        }\n        else {\n            options = optionsOrAnnotation;\n        }\n        var operation;\n        var id;\n        if (annotation === undefined) {\n            operation = CreateFile.create(uri, options);\n        }\n        else {\n            id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n            operation = CreateFile.create(uri, options, id);\n        }\n        this._workspaceEdit.documentChanges.push(operation);\n        if (id !== undefined) {\n            return id;\n        }\n    };\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, optionsOrAnnotation, options) {\n        this.initDocumentChanges();\n        if (this._workspaceEdit.documentChanges === undefined) {\n            throw new Error('Workspace edit is not configured for document changes.');\n        }\n        var annotation;\n        if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n            annotation = optionsOrAnnotation;\n        }\n        else {\n            options = optionsOrAnnotation;\n        }\n        var operation;\n        var id;\n        if (annotation === undefined) {\n            operation = RenameFile.create(oldUri, newUri, options);\n        }\n        else {\n            id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n            operation = RenameFile.create(oldUri, newUri, options, id);\n        }\n        this._workspaceEdit.documentChanges.push(operation);\n        if (id !== undefined) {\n            return id;\n        }\n    };\n    WorkspaceChange.prototype.deleteFile = function (uri, optionsOrAnnotation, options) {\n        this.initDocumentChanges();\n        if (this._workspaceEdit.documentChanges === undefined) {\n            throw new Error('Workspace edit is not configured for document changes.');\n        }\n        var annotation;\n        if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n            annotation = optionsOrAnnotation;\n        }\n        else {\n            options = optionsOrAnnotation;\n        }\n        var operation;\n        var id;\n        if (annotation === undefined) {\n            operation = DeleteFile.create(uri, options);\n        }\n        else {\n            id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n            operation = DeleteFile.create(uri, options, id);\n        }\n        this._workspaceEdit.documentChanges.push(operation);\n        if (id !== undefined) {\n            return id;\n        }\n    };\n    return WorkspaceChange;\n}());\nexport { WorkspaceChange };\n/**\n * The TextDocumentIdentifier namespace provides helper functions to work with\n * {@link TextDocumentIdentifier} literals.\n */\nexport var TextDocumentIdentifier;\n(function (TextDocumentIdentifier) {\n    /**\n     * Creates a new TextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     */\n    function create(uri) {\n        return { uri: uri };\n    }\n    TextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link TextDocumentIdentifier} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri);\n    }\n    TextDocumentIdentifier.is = is;\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\n/**\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\n * {@link VersionedTextDocumentIdentifier} literals.\n */\nexport var VersionedTextDocumentIdentifier;\n(function (VersionedTextDocumentIdentifier) {\n    /**\n     * Creates a new VersionedTextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     * @param version The document's version.\n     */\n    function create(uri, version) {\n        return { uri: uri, version: version };\n    }\n    VersionedTextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link VersionedTextDocumentIdentifier} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.integer(candidate.version);\n    }\n    VersionedTextDocumentIdentifier.is = is;\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\n/**\n * The OptionalVersionedTextDocumentIdentifier namespace provides helper functions to work with\n * {@link OptionalVersionedTextDocumentIdentifier} literals.\n */\nexport var OptionalVersionedTextDocumentIdentifier;\n(function (OptionalVersionedTextDocumentIdentifier) {\n    /**\n     * Creates a new OptionalVersionedTextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     * @param version The document's version.\n     */\n    function create(uri, version) {\n        return { uri: uri, version: version };\n    }\n    OptionalVersionedTextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link OptionalVersionedTextDocumentIdentifier} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.integer(candidate.version));\n    }\n    OptionalVersionedTextDocumentIdentifier.is = is;\n})(OptionalVersionedTextDocumentIdentifier || (OptionalVersionedTextDocumentIdentifier = {}));\n/**\n * The TextDocumentItem namespace provides helper functions to work with\n * {@link TextDocumentItem} literals.\n */\nexport var TextDocumentItem;\n(function (TextDocumentItem) {\n    /**\n     * Creates a new TextDocumentItem literal.\n     * @param uri The document's uri.\n     * @param languageId The document's language identifier.\n     * @param version The document's version number.\n     * @param text The document's text.\n     */\n    function create(uri, languageId, version, text) {\n        return { uri: uri, languageId: languageId, version: version, text: text };\n    }\n    TextDocumentItem.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link TextDocumentItem} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.integer(candidate.version) && Is.string(candidate.text);\n    }\n    TextDocumentItem.is = is;\n})(TextDocumentItem || (TextDocumentItem = {}));\n/**\n * Describes the content type that a client supports in various\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\n *\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\n * are reserved for internal usage.\n */\nexport var MarkupKind;\n(function (MarkupKind) {\n    /**\n     * Plain text is supported as a content format\n     */\n    MarkupKind.PlainText = 'plaintext';\n    /**\n     * Markdown is supported as a content format\n     */\n    MarkupKind.Markdown = 'markdown';\n    /**\n     * Checks whether the given value is a value of the {@link MarkupKind} type.\n     */\n    function is(value) {\n        var candidate = value;\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\n    }\n    MarkupKind.is = is;\n})(MarkupKind || (MarkupKind = {}));\nexport var MarkupContent;\n(function (MarkupContent) {\n    /**\n     * Checks whether the given value conforms to the {@link MarkupContent} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\n    }\n    MarkupContent.is = is;\n})(MarkupContent || (MarkupContent = {}));\n/**\n * The kind of a completion entry.\n */\nexport var CompletionItemKind;\n(function (CompletionItemKind) {\n    CompletionItemKind.Text = 1;\n    CompletionItemKind.Method = 2;\n    CompletionItemKind.Function = 3;\n    CompletionItemKind.Constructor = 4;\n    CompletionItemKind.Field = 5;\n    CompletionItemKind.Variable = 6;\n    CompletionItemKind.Class = 7;\n    CompletionItemKind.Interface = 8;\n    CompletionItemKind.Module = 9;\n    CompletionItemKind.Property = 10;\n    CompletionItemKind.Unit = 11;\n    CompletionItemKind.Value = 12;\n    CompletionItemKind.Enum = 13;\n    CompletionItemKind.Keyword = 14;\n    CompletionItemKind.Snippet = 15;\n    CompletionItemKind.Color = 16;\n    CompletionItemKind.File = 17;\n    CompletionItemKind.Reference = 18;\n    CompletionItemKind.Folder = 19;\n    CompletionItemKind.EnumMember = 20;\n    CompletionItemKind.Constant = 21;\n    CompletionItemKind.Struct = 22;\n    CompletionItemKind.Event = 23;\n    CompletionItemKind.Operator = 24;\n    CompletionItemKind.TypeParameter = 25;\n})(CompletionItemKind || (CompletionItemKind = {}));\n/**\n * Defines whether the insert text in a completion item should be interpreted as\n * plain text or a snippet.\n */\nexport var InsertTextFormat;\n(function (InsertTextFormat) {\n    /**\n     * The primary text to be inserted is treated as a plain string.\n     */\n    InsertTextFormat.PlainText = 1;\n    /**\n     * The primary text to be inserted is treated as a snippet.\n     *\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\n     * the end of the snippet. Placeholders with equal identifiers are linked,\n     * that is typing in one will update others too.\n     *\n     * See also: https://microsoft.github.io/language-server-protocol/specifications/specification-current/#snippet_syntax\n     */\n    InsertTextFormat.Snippet = 2;\n})(InsertTextFormat || (InsertTextFormat = {}));\n/**\n * Completion item tags are extra annotations that tweak the rendering of a completion\n * item.\n *\n * @since 3.15.0\n */\nexport var CompletionItemTag;\n(function (CompletionItemTag) {\n    /**\n     * Render a completion as obsolete, usually using a strike-out.\n     */\n    CompletionItemTag.Deprecated = 1;\n})(CompletionItemTag || (CompletionItemTag = {}));\n/**\n * The InsertReplaceEdit namespace provides functions to deal with insert / replace edits.\n *\n * @since 3.16.0\n */\nexport var InsertReplaceEdit;\n(function (InsertReplaceEdit) {\n    /**\n     * Creates a new insert / replace edit\n     */\n    function create(newText, insert, replace) {\n        return { newText: newText, insert: insert, replace: replace };\n    }\n    InsertReplaceEdit.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link InsertReplaceEdit} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return candidate && Is.string(candidate.newText) && Range.is(candidate.insert) && Range.is(candidate.replace);\n    }\n    InsertReplaceEdit.is = is;\n})(InsertReplaceEdit || (InsertReplaceEdit = {}));\n/**\n * How whitespace and indentation is handled during completion\n * item insertion.\n *\n * @since 3.16.0\n */\nexport var InsertTextMode;\n(function (InsertTextMode) {\n    /**\n     * The insertion or replace strings is taken as it is. If the\n     * value is multi line the lines below the cursor will be\n     * inserted using the indentation defined in the string value.\n     * The client will not apply any kind of adjustments to the\n     * string.\n     */\n    InsertTextMode.asIs = 1;\n    /**\n     * The editor adjusts leading whitespace of new lines so that\n     * they match the indentation up to the cursor of the line for\n     * which the item is accepted.\n     *\n     * Consider a line like this: <2tabs><cursor><3tabs>foo. Accepting a\n     * multi line completion item is indented using 2 tabs and all\n     * following lines inserted will be indented using 2 tabs as well.\n     */\n    InsertTextMode.adjustIndentation = 2;\n})(InsertTextMode || (InsertTextMode = {}));\nexport var CompletionItemLabelDetails;\n(function (CompletionItemLabelDetails) {\n    function is(value) {\n        var candidate = value;\n        return candidate && (Is.string(candidate.detail) || candidate.detail === undefined) &&\n            (Is.string(candidate.description) || candidate.description === undefined);\n    }\n    CompletionItemLabelDetails.is = is;\n})(CompletionItemLabelDetails || (CompletionItemLabelDetails = {}));\n/**\n * The CompletionItem namespace provides functions to deal with\n * completion items.\n */\nexport var CompletionItem;\n(function (CompletionItem) {\n    /**\n     * Create a completion item and seed it with a label.\n     * @param label The completion item's label\n     */\n    function create(label) {\n        return { label: label };\n    }\n    CompletionItem.create = create;\n})(CompletionItem || (CompletionItem = {}));\n/**\n * The CompletionList namespace provides functions to deal with\n * completion lists.\n */\nexport var CompletionList;\n(function (CompletionList) {\n    /**\n     * Creates a new completion list.\n     *\n     * @param items The completion items.\n     * @param isIncomplete The list is not complete.\n     */\n    function create(items, isIncomplete) {\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\n    }\n    CompletionList.create = create;\n})(CompletionList || (CompletionList = {}));\nexport var MarkedString;\n(function (MarkedString) {\n    /**\n     * Creates a marked string from plain text.\n     *\n     * @param plainText The plain text.\n     */\n    function fromPlainText(plainText) {\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n    }\n    MarkedString.fromPlainText = fromPlainText;\n    /**\n     * Checks whether the given value conforms to the {@link MarkedString} type.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\n    }\n    MarkedString.is = is;\n})(MarkedString || (MarkedString = {}));\nexport var Hover;\n(function (Hover) {\n    /**\n     * Checks whether the given value conforms to the {@link Hover} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\n            MarkedString.is(candidate.contents) ||\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === undefined || Range.is(value.range));\n    }\n    Hover.is = is;\n})(Hover || (Hover = {}));\n/**\n * The ParameterInformation namespace provides helper functions to work with\n * {@link ParameterInformation} literals.\n */\nexport var ParameterInformation;\n(function (ParameterInformation) {\n    /**\n     * Creates a new parameter information literal.\n     *\n     * @param label A label string.\n     * @param documentation A doc string.\n     */\n    function create(label, documentation) {\n        return documentation ? { label: label, documentation: documentation } : { label: label };\n    }\n    ParameterInformation.create = create;\n})(ParameterInformation || (ParameterInformation = {}));\n/**\n * The SignatureInformation namespace provides helper functions to work with\n * {@link SignatureInformation} literals.\n */\nexport var SignatureInformation;\n(function (SignatureInformation) {\n    function create(label, documentation) {\n        var parameters = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            parameters[_i - 2] = arguments[_i];\n        }\n        var result = { label: label };\n        if (Is.defined(documentation)) {\n            result.documentation = documentation;\n        }\n        if (Is.defined(parameters)) {\n            result.parameters = parameters;\n        }\n        else {\n            result.parameters = [];\n        }\n        return result;\n    }\n    SignatureInformation.create = create;\n})(SignatureInformation || (SignatureInformation = {}));\n/**\n * A document highlight kind.\n */\nexport var DocumentHighlightKind;\n(function (DocumentHighlightKind) {\n    /**\n     * A textual occurrence.\n     */\n    DocumentHighlightKind.Text = 1;\n    /**\n     * Read-access of a symbol, like reading a variable.\n     */\n    DocumentHighlightKind.Read = 2;\n    /**\n     * Write-access of a symbol, like writing to a variable.\n     */\n    DocumentHighlightKind.Write = 3;\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\n/**\n * DocumentHighlight namespace to provide helper functions to work with\n * {@link DocumentHighlight} literals.\n */\nexport var DocumentHighlight;\n(function (DocumentHighlight) {\n    /**\n     * Create a DocumentHighlight object.\n     * @param range The range the highlight applies to.\n     * @param kind The highlight kind\n     */\n    function create(range, kind) {\n        var result = { range: range };\n        if (Is.number(kind)) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    DocumentHighlight.create = create;\n})(DocumentHighlight || (DocumentHighlight = {}));\n/**\n * A symbol kind.\n */\nexport var SymbolKind;\n(function (SymbolKind) {\n    SymbolKind.File = 1;\n    SymbolKind.Module = 2;\n    SymbolKind.Namespace = 3;\n    SymbolKind.Package = 4;\n    SymbolKind.Class = 5;\n    SymbolKind.Method = 6;\n    SymbolKind.Property = 7;\n    SymbolKind.Field = 8;\n    SymbolKind.Constructor = 9;\n    SymbolKind.Enum = 10;\n    SymbolKind.Interface = 11;\n    SymbolKind.Function = 12;\n    SymbolKind.Variable = 13;\n    SymbolKind.Constant = 14;\n    SymbolKind.String = 15;\n    SymbolKind.Number = 16;\n    SymbolKind.Boolean = 17;\n    SymbolKind.Array = 18;\n    SymbolKind.Object = 19;\n    SymbolKind.Key = 20;\n    SymbolKind.Null = 21;\n    SymbolKind.EnumMember = 22;\n    SymbolKind.Struct = 23;\n    SymbolKind.Event = 24;\n    SymbolKind.Operator = 25;\n    SymbolKind.TypeParameter = 26;\n})(SymbolKind || (SymbolKind = {}));\n/**\n * Symbol tags are extra annotations that tweak the rendering of a symbol.\n *\n * @since 3.16\n */\nexport var SymbolTag;\n(function (SymbolTag) {\n    /**\n     * Render a symbol as obsolete, usually using a strike-out.\n     */\n    SymbolTag.Deprecated = 1;\n})(SymbolTag || (SymbolTag = {}));\nexport var SymbolInformation;\n(function (SymbolInformation) {\n    /**\n     * Creates a new symbol information literal.\n     *\n     * @param name The name of the symbol.\n     * @param kind The kind of the symbol.\n     * @param range The range of the location of the symbol.\n     * @param uri The resource of the location of symbol.\n     * @param containerName The name of the symbol containing the symbol.\n     */\n    function create(name, kind, range, uri, containerName) {\n        var result = {\n            name: name,\n            kind: kind,\n            location: { uri: uri, range: range }\n        };\n        if (containerName) {\n            result.containerName = containerName;\n        }\n        return result;\n    }\n    SymbolInformation.create = create;\n})(SymbolInformation || (SymbolInformation = {}));\nexport var WorkspaceSymbol;\n(function (WorkspaceSymbol) {\n    /**\n     * Create a new workspace symbol.\n     *\n     * @param name The name of the symbol.\n     * @param kind The kind of the symbol.\n     * @param uri The resource of the location of the symbol.\n     * @param range An options range of the location.\n     * @returns A WorkspaceSymbol.\n     */\n    function create(name, kind, uri, range) {\n        return range !== undefined\n            ? { name: name, kind: kind, location: { uri: uri, range: range } }\n            : { name: name, kind: kind, location: { uri: uri } };\n    }\n    WorkspaceSymbol.create = create;\n})(WorkspaceSymbol || (WorkspaceSymbol = {}));\nexport var DocumentSymbol;\n(function (DocumentSymbol) {\n    /**\n     * Creates a new symbol information literal.\n     *\n     * @param name The name of the symbol.\n     * @param detail The detail of the symbol.\n     * @param kind The kind of the symbol.\n     * @param range The range of the symbol.\n     * @param selectionRange The selectionRange of the symbol.\n     * @param children Children of the symbol.\n     */\n    function create(name, detail, kind, range, selectionRange, children) {\n        var result = {\n            name: name,\n            detail: detail,\n            kind: kind,\n            range: range,\n            selectionRange: selectionRange\n        };\n        if (children !== undefined) {\n            result.children = children;\n        }\n        return result;\n    }\n    DocumentSymbol.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link DocumentSymbol} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return candidate &&\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\n            (candidate.detail === undefined || Is.string(candidate.detail)) &&\n            (candidate.deprecated === undefined || Is.boolean(candidate.deprecated)) &&\n            (candidate.children === undefined || Array.isArray(candidate.children)) &&\n            (candidate.tags === undefined || Array.isArray(candidate.tags));\n    }\n    DocumentSymbol.is = is;\n})(DocumentSymbol || (DocumentSymbol = {}));\n/**\n * A set of predefined code action kinds\n */\nexport var CodeActionKind;\n(function (CodeActionKind) {\n    /**\n     * Empty kind.\n     */\n    CodeActionKind.Empty = '';\n    /**\n     * Base kind for quickfix actions: 'quickfix'\n     */\n    CodeActionKind.QuickFix = 'quickfix';\n    /**\n     * Base kind for refactoring actions: 'refactor'\n     */\n    CodeActionKind.Refactor = 'refactor';\n    /**\n     * Base kind for refactoring extraction actions: 'refactor.extract'\n     *\n     * Example extract actions:\n     *\n     * - Extract method\n     * - Extract function\n     * - Extract variable\n     * - Extract interface from class\n     * - ...\n     */\n    CodeActionKind.RefactorExtract = 'refactor.extract';\n    /**\n     * Base kind for refactoring inline actions: 'refactor.inline'\n     *\n     * Example inline actions:\n     *\n     * - Inline function\n     * - Inline variable\n     * - Inline constant\n     * - ...\n     */\n    CodeActionKind.RefactorInline = 'refactor.inline';\n    /**\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\n     *\n     * Example rewrite actions:\n     *\n     * - Convert JavaScript function to class\n     * - Add or remove parameter\n     * - Encapsulate field\n     * - Make method static\n     * - Move method to base class\n     * - ...\n     */\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\n    /**\n     * Base kind for source actions: `source`\n     *\n     * Source code actions apply to the entire file.\n     */\n    CodeActionKind.Source = 'source';\n    /**\n     * Base kind for an organize imports source action: `source.organizeImports`\n     */\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\n    /**\n     * Base kind for auto-fix source actions: `source.fixAll`.\n     *\n     * Fix all actions automatically fix errors that have a clear fix that do not require user input.\n     * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\n     *\n     * @since 3.15.0\n     */\n    CodeActionKind.SourceFixAll = 'source.fixAll';\n})(CodeActionKind || (CodeActionKind = {}));\n/**\n * The reason why code actions were requested.\n *\n * @since 3.17.0\n */\nexport var CodeActionTriggerKind;\n(function (CodeActionTriggerKind) {\n    /**\n     * Code actions were explicitly requested by the user or by an extension.\n     */\n    CodeActionTriggerKind.Invoked = 1;\n    /**\n     * Code actions were requested automatically.\n     *\n     * This typically happens when current selection in a file changes, but can\n     * also be triggered when file content changes.\n     */\n    CodeActionTriggerKind.Automatic = 2;\n})(CodeActionTriggerKind || (CodeActionTriggerKind = {}));\n/**\n * The CodeActionContext namespace provides helper functions to work with\n * {@link CodeActionContext} literals.\n */\nexport var CodeActionContext;\n(function (CodeActionContext) {\n    /**\n     * Creates a new CodeActionContext literal.\n     */\n    function create(diagnostics, only, triggerKind) {\n        var result = { diagnostics: diagnostics };\n        if (only !== undefined && only !== null) {\n            result.only = only;\n        }\n        if (triggerKind !== undefined && triggerKind !== null) {\n            result.triggerKind = triggerKind;\n        }\n        return result;\n    }\n    CodeActionContext.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link CodeActionContext} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is)\n            && (candidate.only === undefined || Is.typedArray(candidate.only, Is.string))\n            && (candidate.triggerKind === undefined || candidate.triggerKind === CodeActionTriggerKind.Invoked || candidate.triggerKind === CodeActionTriggerKind.Automatic);\n    }\n    CodeActionContext.is = is;\n})(CodeActionContext || (CodeActionContext = {}));\nexport var CodeAction;\n(function (CodeAction) {\n    function create(title, kindOrCommandOrEdit, kind) {\n        var result = { title: title };\n        var checkKind = true;\n        if (typeof kindOrCommandOrEdit === 'string') {\n            checkKind = false;\n            result.kind = kindOrCommandOrEdit;\n        }\n        else if (Command.is(kindOrCommandOrEdit)) {\n            result.command = kindOrCommandOrEdit;\n        }\n        else {\n            result.edit = kindOrCommandOrEdit;\n        }\n        if (checkKind && kind !== undefined) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    CodeAction.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate && Is.string(candidate.title) &&\n            (candidate.diagnostics === undefined || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\n            (candidate.kind === undefined || Is.string(candidate.kind)) &&\n            (candidate.edit !== undefined || candidate.command !== undefined) &&\n            (candidate.command === undefined || Command.is(candidate.command)) &&\n            (candidate.isPreferred === undefined || Is.boolean(candidate.isPreferred)) &&\n            (candidate.edit === undefined || WorkspaceEdit.is(candidate.edit));\n    }\n    CodeAction.is = is;\n})(CodeAction || (CodeAction = {}));\n/**\n * The CodeLens namespace provides helper functions to work with\n * {@link CodeLens} literals.\n */\nexport var CodeLens;\n(function (CodeLens) {\n    /**\n     * Creates a new CodeLens literal.\n     */\n    function create(range, data) {\n        var result = { range: range };\n        if (Is.defined(data)) {\n            result.data = data;\n        }\n        return result;\n    }\n    CodeLens.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link CodeLens} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\n    }\n    CodeLens.is = is;\n})(CodeLens || (CodeLens = {}));\n/**\n * The FormattingOptions namespace provides helper functions to work with\n * {@link FormattingOptions} literals.\n */\nexport var FormattingOptions;\n(function (FormattingOptions) {\n    /**\n     * Creates a new FormattingOptions literal.\n     */\n    function create(tabSize, insertSpaces) {\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\n    }\n    FormattingOptions.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link FormattingOptions} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.uinteger(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\n    }\n    FormattingOptions.is = is;\n})(FormattingOptions || (FormattingOptions = {}));\n/**\n * The DocumentLink namespace provides helper functions to work with\n * {@link DocumentLink} literals.\n */\nexport var DocumentLink;\n(function (DocumentLink) {\n    /**\n     * Creates a new DocumentLink literal.\n     */\n    function create(range, target, data) {\n        return { range: range, target: target, data: data };\n    }\n    DocumentLink.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link DocumentLink} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\n    }\n    DocumentLink.is = is;\n})(DocumentLink || (DocumentLink = {}));\n/**\n * The SelectionRange namespace provides helper function to work with\n * SelectionRange literals.\n */\nexport var SelectionRange;\n(function (SelectionRange) {\n    /**\n     * Creates a new SelectionRange\n     * @param range the range.\n     * @param parent an optional parent.\n     */\n    function create(range, parent) {\n        return { range: range, parent: parent };\n    }\n    SelectionRange.create = create;\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\n    }\n    SelectionRange.is = is;\n})(SelectionRange || (SelectionRange = {}));\n/**\n * A set of predefined token types. This set is not fixed\n * an clients can specify additional token types via the\n * corresponding client capabilities.\n *\n * @since 3.16.0\n */\nexport var SemanticTokenTypes;\n(function (SemanticTokenTypes) {\n    SemanticTokenTypes[\"namespace\"] = \"namespace\";\n    /**\n     * Represents a generic type. Acts as a fallback for types which can't be mapped to\n     * a specific type like class or enum.\n     */\n    SemanticTokenTypes[\"type\"] = \"type\";\n    SemanticTokenTypes[\"class\"] = \"class\";\n    SemanticTokenTypes[\"enum\"] = \"enum\";\n    SemanticTokenTypes[\"interface\"] = \"interface\";\n    SemanticTokenTypes[\"struct\"] = \"struct\";\n    SemanticTokenTypes[\"typeParameter\"] = \"typeParameter\";\n    SemanticTokenTypes[\"parameter\"] = \"parameter\";\n    SemanticTokenTypes[\"variable\"] = \"variable\";\n    SemanticTokenTypes[\"property\"] = \"property\";\n    SemanticTokenTypes[\"enumMember\"] = \"enumMember\";\n    SemanticTokenTypes[\"event\"] = \"event\";\n    SemanticTokenTypes[\"function\"] = \"function\";\n    SemanticTokenTypes[\"method\"] = \"method\";\n    SemanticTokenTypes[\"macro\"] = \"macro\";\n    SemanticTokenTypes[\"keyword\"] = \"keyword\";\n    SemanticTokenTypes[\"modifier\"] = \"modifier\";\n    SemanticTokenTypes[\"comment\"] = \"comment\";\n    SemanticTokenTypes[\"string\"] = \"string\";\n    SemanticTokenTypes[\"number\"] = \"number\";\n    SemanticTokenTypes[\"regexp\"] = \"regexp\";\n    SemanticTokenTypes[\"operator\"] = \"operator\";\n    /**\n     * @since 3.17.0\n     */\n    SemanticTokenTypes[\"decorator\"] = \"decorator\";\n})(SemanticTokenTypes || (SemanticTokenTypes = {}));\n/**\n * A set of predefined token modifiers. This set is not fixed\n * an clients can specify additional token types via the\n * corresponding client capabilities.\n *\n * @since 3.16.0\n */\nexport var SemanticTokenModifiers;\n(function (SemanticTokenModifiers) {\n    SemanticTokenModifiers[\"declaration\"] = \"declaration\";\n    SemanticTokenModifiers[\"definition\"] = \"definition\";\n    SemanticTokenModifiers[\"readonly\"] = \"readonly\";\n    SemanticTokenModifiers[\"static\"] = \"static\";\n    SemanticTokenModifiers[\"deprecated\"] = \"deprecated\";\n    SemanticTokenModifiers[\"abstract\"] = \"abstract\";\n    SemanticTokenModifiers[\"async\"] = \"async\";\n    SemanticTokenModifiers[\"modification\"] = \"modification\";\n    SemanticTokenModifiers[\"documentation\"] = \"documentation\";\n    SemanticTokenModifiers[\"defaultLibrary\"] = \"defaultLibrary\";\n})(SemanticTokenModifiers || (SemanticTokenModifiers = {}));\n/**\n * @since 3.16.0\n */\nexport var SemanticTokens;\n(function (SemanticTokens) {\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && (candidate.resultId === undefined || typeof candidate.resultId === 'string') &&\n            Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === 'number');\n    }\n    SemanticTokens.is = is;\n})(SemanticTokens || (SemanticTokens = {}));\n/**\n * The InlineValueText namespace provides functions to deal with InlineValueTexts.\n *\n * @since 3.17.0\n */\nexport var InlineValueText;\n(function (InlineValueText) {\n    /**\n     * Creates a new InlineValueText literal.\n     */\n    function create(range, text) {\n        return { range: range, text: text };\n    }\n    InlineValueText.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate !== undefined && candidate !== null && Range.is(candidate.range) && Is.string(candidate.text);\n    }\n    InlineValueText.is = is;\n})(InlineValueText || (InlineValueText = {}));\n/**\n * The InlineValueVariableLookup namespace provides functions to deal with InlineValueVariableLookups.\n *\n * @since 3.17.0\n */\nexport var InlineValueVariableLookup;\n(function (InlineValueVariableLookup) {\n    /**\n     * Creates a new InlineValueText literal.\n     */\n    function create(range, variableName, caseSensitiveLookup) {\n        return { range: range, variableName: variableName, caseSensitiveLookup: caseSensitiveLookup };\n    }\n    InlineValueVariableLookup.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate !== undefined && candidate !== null && Range.is(candidate.range) && Is.boolean(candidate.caseSensitiveLookup)\n            && (Is.string(candidate.variableName) || candidate.variableName === undefined);\n    }\n    InlineValueVariableLookup.is = is;\n})(InlineValueVariableLookup || (InlineValueVariableLookup = {}));\n/**\n * The InlineValueEvaluatableExpression namespace provides functions to deal with InlineValueEvaluatableExpression.\n *\n * @since 3.17.0\n */\nexport var InlineValueEvaluatableExpression;\n(function (InlineValueEvaluatableExpression) {\n    /**\n     * Creates a new InlineValueEvaluatableExpression literal.\n     */\n    function create(range, expression) {\n        return { range: range, expression: expression };\n    }\n    InlineValueEvaluatableExpression.create = create;\n    function is(value) {\n        var candidate = value;\n        return candidate !== undefined && candidate !== null && Range.is(candidate.range)\n            && (Is.string(candidate.expression) || candidate.expression === undefined);\n    }\n    InlineValueEvaluatableExpression.is = is;\n})(InlineValueEvaluatableExpression || (InlineValueEvaluatableExpression = {}));\n/**\n * The InlineValueContext namespace provides helper functions to work with\n * {@link InlineValueContext} literals.\n *\n * @since 3.17.0\n */\nexport var InlineValueContext;\n(function (InlineValueContext) {\n    /**\n     * Creates a new InlineValueContext literal.\n     */\n    function create(frameId, stoppedLocation) {\n        return { frameId: frameId, stoppedLocation: stoppedLocation };\n    }\n    InlineValueContext.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link InlineValueContext} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(value.stoppedLocation);\n    }\n    InlineValueContext.is = is;\n})(InlineValueContext || (InlineValueContext = {}));\n/**\n * Inlay hint kinds.\n *\n * @since 3.17.0\n */\nexport var InlayHintKind;\n(function (InlayHintKind) {\n    /**\n     * An inlay hint that for a type annotation.\n     */\n    InlayHintKind.Type = 1;\n    /**\n     * An inlay hint that is for a parameter.\n     */\n    InlayHintKind.Parameter = 2;\n    function is(value) {\n        return value === 1 || value === 2;\n    }\n    InlayHintKind.is = is;\n})(InlayHintKind || (InlayHintKind = {}));\nexport var InlayHintLabelPart;\n(function (InlayHintLabelPart) {\n    function create(value) {\n        return { value: value };\n    }\n    InlayHintLabelPart.create = create;\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate)\n            && (candidate.tooltip === undefined || Is.string(candidate.tooltip) || MarkupContent.is(candidate.tooltip))\n            && (candidate.location === undefined || Location.is(candidate.location))\n            && (candidate.command === undefined || Command.is(candidate.command));\n    }\n    InlayHintLabelPart.is = is;\n})(InlayHintLabelPart || (InlayHintLabelPart = {}));\nexport var InlayHint;\n(function (InlayHint) {\n    function create(position, label, kind) {\n        var result = { position: position, label: label };\n        if (kind !== undefined) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    InlayHint.create = create;\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && Position.is(candidate.position)\n            && (Is.string(candidate.label) || Is.typedArray(candidate.label, InlayHintLabelPart.is))\n            && (candidate.kind === undefined || InlayHintKind.is(candidate.kind))\n            && (candidate.textEdits === undefined) || Is.typedArray(candidate.textEdits, TextEdit.is)\n            && (candidate.tooltip === undefined || Is.string(candidate.tooltip) || MarkupContent.is(candidate.tooltip))\n            && (candidate.paddingLeft === undefined || Is.boolean(candidate.paddingLeft))\n            && (candidate.paddingRight === undefined || Is.boolean(candidate.paddingRight));\n    }\n    InlayHint.is = is;\n})(InlayHint || (InlayHint = {}));\nexport var WorkspaceFolder;\n(function (WorkspaceFolder) {\n    function is(value) {\n        var candidate = value;\n        return Is.objectLiteral(candidate) && URI.is(candidate.uri) && Is.string(candidate.name);\n    }\n    WorkspaceFolder.is = is;\n})(WorkspaceFolder || (WorkspaceFolder = {}));\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\n/**\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\n */\nexport var TextDocument;\n(function (TextDocument) {\n    /**\n     * Creates a new ITextDocument literal from the given uri and content.\n     * @param uri The document's uri.\n     * @param languageId The document's language Id.\n     * @param version The document's version.\n     * @param content The document's content.\n     */\n    function create(uri, languageId, version, content) {\n        return new FullTextDocument(uri, languageId, version, content);\n    }\n    TextDocument.create = create;\n    /**\n     * Checks whether the given literal conforms to the {@link ITextDocument} interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.uinteger(candidate.lineCount)\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\n    }\n    TextDocument.is = is;\n    function applyEdits(document, edits) {\n        var text = document.getText();\n        var sortedEdits = mergeSort(edits, function (a, b) {\n            var diff = a.range.start.line - b.range.start.line;\n            if (diff === 0) {\n                return a.range.start.character - b.range.start.character;\n            }\n            return diff;\n        });\n        var lastModifiedOffset = text.length;\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\n            var e = sortedEdits[i];\n            var startOffset = document.offsetAt(e.range.start);\n            var endOffset = document.offsetAt(e.range.end);\n            if (endOffset <= lastModifiedOffset) {\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\n            }\n            else {\n                throw new Error('Overlapping edit');\n            }\n            lastModifiedOffset = startOffset;\n        }\n        return text;\n    }\n    TextDocument.applyEdits = applyEdits;\n    function mergeSort(data, compare) {\n        if (data.length <= 1) {\n            // sorted\n            return data;\n        }\n        var p = (data.length / 2) | 0;\n        var left = data.slice(0, p);\n        var right = data.slice(p);\n        mergeSort(left, compare);\n        mergeSort(right, compare);\n        var leftIdx = 0;\n        var rightIdx = 0;\n        var i = 0;\n        while (leftIdx < left.length && rightIdx < right.length) {\n            var ret = compare(left[leftIdx], right[rightIdx]);\n            if (ret <= 0) {\n                // smaller_equal -> take left to preserve order\n                data[i++] = left[leftIdx++];\n            }\n            else {\n                // greater -> take right\n                data[i++] = right[rightIdx++];\n            }\n        }\n        while (leftIdx < left.length) {\n            data[i++] = left[leftIdx++];\n        }\n        while (rightIdx < right.length) {\n            data[i++] = right[rightIdx++];\n        }\n        return data;\n    }\n})(TextDocument || (TextDocument = {}));\n/**\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\n */\nvar FullTextDocument = /** @class */ (function () {\n    function FullTextDocument(uri, languageId, version, content) {\n        this._uri = uri;\n        this._languageId = languageId;\n        this._version = version;\n        this._content = content;\n        this._lineOffsets = undefined;\n    }\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\n        get: function () {\n            return this._uri;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\n        get: function () {\n            return this._languageId;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\n        get: function () {\n            return this._version;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    FullTextDocument.prototype.getText = function (range) {\n        if (range) {\n            var start = this.offsetAt(range.start);\n            var end = this.offsetAt(range.end);\n            return this._content.substring(start, end);\n        }\n        return this._content;\n    };\n    FullTextDocument.prototype.update = function (event, version) {\n        this._content = event.text;\n        this._version = version;\n        this._lineOffsets = undefined;\n    };\n    FullTextDocument.prototype.getLineOffsets = function () {\n        if (this._lineOffsets === undefined) {\n            var lineOffsets = [];\n            var text = this._content;\n            var isLineStart = true;\n            for (var i = 0; i < text.length; i++) {\n                if (isLineStart) {\n                    lineOffsets.push(i);\n                    isLineStart = false;\n                }\n                var ch = text.charAt(i);\n                isLineStart = (ch === '\\r' || ch === '\\n');\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\n                    i++;\n                }\n            }\n            if (isLineStart && text.length > 0) {\n                lineOffsets.push(text.length);\n            }\n            this._lineOffsets = lineOffsets;\n        }\n        return this._lineOffsets;\n    };\n    FullTextDocument.prototype.positionAt = function (offset) {\n        offset = Math.max(Math.min(offset, this._content.length), 0);\n        var lineOffsets = this.getLineOffsets();\n        var low = 0, high = lineOffsets.length;\n        if (high === 0) {\n            return Position.create(0, offset);\n        }\n        while (low < high) {\n            var mid = Math.floor((low + high) / 2);\n            if (lineOffsets[mid] > offset) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        // low is the least x for which the line offset is larger than the current offset\n        // or array.length if no line offset is larger than the current offset\n        var line = low - 1;\n        return Position.create(line, offset - lineOffsets[line]);\n    };\n    FullTextDocument.prototype.offsetAt = function (position) {\n        var lineOffsets = this.getLineOffsets();\n        if (position.line >= lineOffsets.length) {\n            return this._content.length;\n        }\n        else if (position.line < 0) {\n            return 0;\n        }\n        var lineOffset = lineOffsets[position.line];\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\n    };\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\n        get: function () {\n            return this.getLineOffsets().length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return FullTextDocument;\n}());\nvar Is;\n(function (Is) {\n    var toString = Object.prototype.toString;\n    function defined(value) {\n        return typeof value !== 'undefined';\n    }\n    Is.defined = defined;\n    function undefined(value) {\n        return typeof value === 'undefined';\n    }\n    Is.undefined = undefined;\n    function boolean(value) {\n        return value === true || value === false;\n    }\n    Is.boolean = boolean;\n    function string(value) {\n        return toString.call(value) === '[object String]';\n    }\n    Is.string = string;\n    function number(value) {\n        return toString.call(value) === '[object Number]';\n    }\n    Is.number = number;\n    function numberRange(value, min, max) {\n        return toString.call(value) === '[object Number]' && min <= value && value <= max;\n    }\n    Is.numberRange = numberRange;\n    function integer(value) {\n        return toString.call(value) === '[object Number]' && -2147483648 <= value && value <= 2147483647;\n    }\n    Is.integer = integer;\n    function uinteger(value) {\n        return toString.call(value) === '[object Number]' && 0 <= value && value <= 2147483647;\n    }\n    Is.uinteger = uinteger;\n    function func(value) {\n        return toString.call(value) === '[object Function]';\n    }\n    Is.func = func;\n    function objectLiteral(value) {\n        // Strictly speaking class instances pass this check as well. Since the LSP\n        // doesn't use classes we ignore this for now. If we do we need to add something\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n        return value !== null && typeof value === 'object';\n    }\n    Is.objectLiteral = objectLiteral;\n    function typedArray(value, check) {\n        return Array.isArray(value) && value.every(check);\n    }\n    Is.typedArray = typedArray;\n})(Is || (Is = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProposedFeatures = exports.NotebookDocuments = exports.TextDocuments = exports.SemanticTokensBuilder = void 0;\nconst semanticTokens_1 = require(\"./semanticTokens\");\nObject.defineProperty(exports, \"SemanticTokensBuilder\", { enumerable: true, get: function () { return semanticTokens_1.SemanticTokensBuilder; } });\n__exportStar(require(\"vscode-languageserver-protocol/\"), exports);\nconst textDocuments_1 = require(\"./textDocuments\");\nObject.defineProperty(exports, \"TextDocuments\", { enumerable: true, get: function () { return textDocuments_1.TextDocuments; } });\nconst notebook_1 = require(\"./notebook\");\nObject.defineProperty(exports, \"NotebookDocuments\", { enumerable: true, get: function () { return notebook_1.NotebookDocuments; } });\n__exportStar(require(\"./server\"), exports);\nvar ProposedFeatures;\n(function (ProposedFeatures) {\n    ProposedFeatures.all = {\n        __brand: 'features',\n    };\n})(ProposedFeatures = exports.ProposedFeatures || (exports.ProposedFeatures = {}));\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CallHierarchyFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst CallHierarchyFeature = (Base) => {\n    return class extends Base {\n        get callHierarchy() {\n            return {\n                onPrepare: (handler) => {\n                    return this.connection.onRequest(vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), undefined);\n                    });\n                },\n                onIncomingCalls: (handler) => {\n                    const type = vscode_languageserver_protocol_1.CallHierarchyIncomingCallsRequest.type;\n                    return this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                },\n                onOutgoingCalls: (handler) => {\n                    const type = vscode_languageserver_protocol_1.CallHierarchyOutgoingCallsRequest.type;\n                    return this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                }\n            };\n        }\n    };\n};\nexports.CallHierarchyFeature = CallHierarchyFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConfigurationFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nconst ConfigurationFeature = (Base) => {\n    return class extends Base {\n        getConfiguration(arg) {\n            if (!arg) {\n                return this._getConfiguration({});\n            }\n            else if (Is.string(arg)) {\n                return this._getConfiguration({ section: arg });\n            }\n            else {\n                return this._getConfiguration(arg);\n            }\n        }\n        _getConfiguration(arg) {\n            let params = {\n                items: Array.isArray(arg) ? arg : [arg]\n            };\n            return this.connection.sendRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, params).then((result) => {\n                if (Array.isArray(result)) {\n                    return Array.isArray(arg) ? result : result[0];\n                }\n                else {\n                    return Array.isArray(arg) ? [] : null;\n                }\n            });\n        }\n    };\n};\nexports.ConfigurationFeature = ConfigurationFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiagnosticFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst DiagnosticFeature = (Base) => {\n    return class extends Base {\n        get diagnostics() {\n            return {\n                refresh: () => {\n                    return this.connection.sendRequest(vscode_languageserver_protocol_1.DiagnosticRefreshRequest.type);\n                },\n                on: (handler) => {\n                    return this.connection.onRequest(vscode_languageserver_protocol_1.DocumentDiagnosticRequest.type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(vscode_languageserver_protocol_1.DocumentDiagnosticRequest.partialResult, params));\n                    });\n                },\n                onWorkspace: (handler) => {\n                    return this.connection.onRequest(vscode_languageserver_protocol_1.WorkspaceDiagnosticRequest.type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(vscode_languageserver_protocol_1.WorkspaceDiagnosticRequest.partialResult, params));\n                    });\n                }\n            };\n        }\n    };\n};\nexports.DiagnosticFeature = DiagnosticFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FileOperationsFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst FileOperationsFeature = (Base) => {\n    return class extends Base {\n        onDidCreateFiles(handler) {\n            return this.connection.onNotification(vscode_languageserver_protocol_1.DidCreateFilesNotification.type, (params) => {\n                handler(params);\n            });\n        }\n        onDidRenameFiles(handler) {\n            return this.connection.onNotification(vscode_languageserver_protocol_1.DidRenameFilesNotification.type, (params) => {\n                handler(params);\n            });\n        }\n        onDidDeleteFiles(handler) {\n            return this.connection.onNotification(vscode_languageserver_protocol_1.DidDeleteFilesNotification.type, (params) => {\n                handler(params);\n            });\n        }\n        onWillCreateFiles(handler) {\n            return this.connection.onRequest(vscode_languageserver_protocol_1.WillCreateFilesRequest.type, (params, cancel) => {\n                return handler(params, cancel);\n            });\n        }\n        onWillRenameFiles(handler) {\n            return this.connection.onRequest(vscode_languageserver_protocol_1.WillRenameFilesRequest.type, (params, cancel) => {\n                return handler(params, cancel);\n            });\n        }\n        onWillDeleteFiles(handler) {\n            return this.connection.onRequest(vscode_languageserver_protocol_1.WillDeleteFilesRequest.type, (params, cancel) => {\n                return handler(params, cancel);\n            });\n        }\n    };\n};\nexports.FileOperationsFeature = FileOperationsFeature;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlayHintFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst InlayHintFeature = (Base) => {\n    return class extends Base {\n        get inlayHint() {\n            return {\n                refresh: () => {\n                    return this.connection.sendRequest(vscode_languageserver_protocol_1.InlayHintRefreshRequest.type);\n                },\n                on: (handler) => {\n                    return this.connection.onRequest(vscode_languageserver_protocol_1.InlayHintRequest.type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params));\n                    });\n                },\n                resolve: (handler) => {\n                    return this.connection.onRequest(vscode_languageserver_protocol_1.InlayHintResolveRequest.type, (params, cancel) => {\n                        return handler(params, cancel);\n                    });\n                }\n            };\n        }\n    };\n};\nexports.InlayHintFeature = InlayHintFeature;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineValueFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst InlineValueFeature = (Base) => {\n    return class extends Base {\n        get inlineValue() {\n            return {\n                refresh: () => {\n                    return this.connection.sendRequest(vscode_languageserver_protocol_1.InlineValueRefreshRequest.type);\n                },\n                on: (handler) => {\n                    return this.connection.onRequest(vscode_languageserver_protocol_1.InlineValueRequest.type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params));\n                    });\n                }\n            };\n        }\n    };\n};\nexports.InlineValueFeature = InlineValueFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LinkedEditingRangeFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst LinkedEditingRangeFeature = (Base) => {\n    return class extends Base {\n        onLinkedEditingRange(handler) {\n            return this.connection.onRequest(vscode_languageserver_protocol_1.LinkedEditingRangeRequest.type, (params, cancel) => {\n                return handler(params, cancel, this.attachWorkDoneProgress(params), undefined);\n            });\n        }\n    };\n};\nexports.LinkedEditingRangeFeature = LinkedEditingRangeFeature;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MonikerFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst MonikerFeature = (Base) => {\n    return class extends Base {\n        get moniker() {\n            return {\n                on: (handler) => {\n                    const type = vscode_languageserver_protocol_1.MonikerRequest.type;\n                    return this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                },\n            };\n        }\n    };\n};\nexports.MonikerFeature = MonikerFeature;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NotebookDocuments = exports.NotebookSyncFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst textDocuments_1 = require(\"./textDocuments\");\nconst NotebookSyncFeature = (Base) => {\n    return class extends Base {\n        get synchronization() {\n            return {\n                onDidOpenNotebookDocument: (handler) => {\n                    return this.connection.onNotification(vscode_languageserver_protocol_1.DidOpenNotebookDocumentNotification.type, (params) => {\n                        handler(params);\n                    });\n                },\n                onDidChangeNotebookDocument: (handler) => {\n                    return this.connection.onNotification(vscode_languageserver_protocol_1.DidChangeNotebookDocumentNotification.type, (params) => {\n                        handler(params);\n                    });\n                },\n                onDidSaveNotebookDocument: (handler) => {\n                    return this.connection.onNotification(vscode_languageserver_protocol_1.DidSaveNotebookDocumentNotification.type, (params) => {\n                        handler(params);\n                    });\n                },\n                onDidCloseNotebookDocument: (handler) => {\n                    return this.connection.onNotification(vscode_languageserver_protocol_1.DidCloseNotebookDocumentNotification.type, (params) => {\n                        handler(params);\n                    });\n                }\n            };\n        }\n    };\n};\nexports.NotebookSyncFeature = NotebookSyncFeature;\nclass CellTextDocumentConnection {\n    onDidOpenTextDocument(handler) {\n        this.openHandler = handler;\n        return vscode_languageserver_protocol_1.Disposable.create(() => { this.openHandler = undefined; });\n    }\n    openTextDocument(params) {\n        this.openHandler && this.openHandler(params);\n    }\n    onDidChangeTextDocument(handler) {\n        this.changeHandler = handler;\n        return vscode_languageserver_protocol_1.Disposable.create(() => { this.changeHandler = handler; });\n    }\n    changeTextDocument(params) {\n        this.changeHandler && this.changeHandler(params);\n    }\n    onDidCloseTextDocument(handler) {\n        this.closeHandler = handler;\n        return vscode_languageserver_protocol_1.Disposable.create(() => { this.closeHandler = undefined; });\n    }\n    closeTextDocument(params) {\n        this.closeHandler && this.closeHandler(params);\n    }\n    onWillSaveTextDocument() {\n        return CellTextDocumentConnection.NULL_DISPOSE;\n    }\n    onWillSaveTextDocumentWaitUntil() {\n        return CellTextDocumentConnection.NULL_DISPOSE;\n    }\n    onDidSaveTextDocument() {\n        return CellTextDocumentConnection.NULL_DISPOSE;\n    }\n}\nCellTextDocumentConnection.NULL_DISPOSE = Object.freeze({ dispose: () => { } });\nclass NotebookDocuments {\n    constructor(configurationOrTextDocuments) {\n        if (configurationOrTextDocuments instanceof textDocuments_1.TextDocuments) {\n            this._cellTextDocuments = configurationOrTextDocuments;\n        }\n        else {\n            this._cellTextDocuments = new textDocuments_1.TextDocuments(configurationOrTextDocuments);\n        }\n        this.notebookDocuments = new Map();\n        this.notebookCellMap = new Map();\n        this._onDidOpen = new vscode_languageserver_protocol_1.Emitter();\n        this._onDidChange = new vscode_languageserver_protocol_1.Emitter();\n        this._onDidSave = new vscode_languageserver_protocol_1.Emitter();\n        this._onDidClose = new vscode_languageserver_protocol_1.Emitter();\n    }\n    get cellTextDocuments() {\n        return this._cellTextDocuments;\n    }\n    getCellTextDocument(cell) {\n        return this._cellTextDocuments.get(cell.document);\n    }\n    getNotebookDocument(uri) {\n        return this.notebookDocuments.get(uri);\n    }\n    getNotebookCell(uri) {\n        const value = this.notebookCellMap.get(uri);\n        return value && value[0];\n    }\n    findNotebookDocumentForCell(cell) {\n        const key = typeof cell === 'string' ? cell : cell.document;\n        const value = this.notebookCellMap.get(key);\n        return value && value[1];\n    }\n    get onDidOpen() {\n        return this._onDidOpen.event;\n    }\n    get onDidSave() {\n        return this._onDidSave.event;\n    }\n    get onDidChange() {\n        return this._onDidChange.event;\n    }\n    get onDidClose() {\n        return this._onDidClose.event;\n    }\n    /**\n     * Listens for `low level` notification on the given connection to\n     * update the notebook documents managed by this instance.\n     *\n     * Please note that the connection only provides handlers not an event model. Therefore\n     * listening on a connection will overwrite the following handlers on a connection:\n     * `onDidOpenNotebookDocument`, `onDidChangeNotebookDocument`, `onDidSaveNotebookDocument`,\n     *  and `onDidCloseNotebookDocument`.\n     *\n     * @param connection The connection to listen on.\n     */\n    listen(connection) {\n        const cellTextDocumentConnection = new CellTextDocumentConnection();\n        const disposables = [];\n        disposables.push(this.cellTextDocuments.listen(cellTextDocumentConnection));\n        disposables.push(connection.notebooks.synchronization.onDidOpenNotebookDocument((params) => {\n            this.notebookDocuments.set(params.notebookDocument.uri, params.notebookDocument);\n            for (const cellTextDocument of params.cellTextDocuments) {\n                cellTextDocumentConnection.openTextDocument({ textDocument: cellTextDocument });\n            }\n            this.updateCellMap(params.notebookDocument);\n            this._onDidOpen.fire(params.notebookDocument);\n        }));\n        disposables.push(connection.notebooks.synchronization.onDidChangeNotebookDocument((params) => {\n            const notebookDocument = this.notebookDocuments.get(params.notebookDocument.uri);\n            if (notebookDocument === undefined) {\n                return;\n            }\n            notebookDocument.version = params.notebookDocument.version;\n            const oldMetadata = notebookDocument.metadata;\n            let metadataChanged = false;\n            const change = params.change;\n            if (change.metadata !== undefined) {\n                metadataChanged = true;\n                notebookDocument.metadata = change.metadata;\n            }\n            const opened = [];\n            const closed = [];\n            const data = [];\n            const text = [];\n            if (change.cells !== undefined) {\n                const changedCells = change.cells;\n                if (changedCells.structure !== undefined) {\n                    const array = changedCells.structure.array;\n                    notebookDocument.cells.splice(array.start, array.deleteCount, ...(array.cells !== undefined ? array.cells : []));\n                    // Additional open cell text documents.\n                    if (changedCells.structure.didOpen !== undefined) {\n                        for (const open of changedCells.structure.didOpen) {\n                            cellTextDocumentConnection.openTextDocument({ textDocument: open });\n                            opened.push(open.uri);\n                        }\n                    }\n                    // Additional closed cell test documents.\n                    if (changedCells.structure.didClose) {\n                        for (const close of changedCells.structure.didClose) {\n                            cellTextDocumentConnection.closeTextDocument({ textDocument: close });\n                            closed.push(close.uri);\n                        }\n                    }\n                }\n                if (changedCells.data !== undefined) {\n                    const cellUpdates = new Map(changedCells.data.map(cell => [cell.document, cell]));\n                    for (let i = 0; i <= notebookDocument.cells.length; i++) {\n                        const change = cellUpdates.get(notebookDocument.cells[i].document);\n                        if (change !== undefined) {\n                            const old = notebookDocument.cells.splice(i, 1, change);\n                            data.push({ old: old[0], new: change });\n                            cellUpdates.delete(change.document);\n                            if (cellUpdates.size === 0) {\n                                break;\n                            }\n                        }\n                    }\n                }\n                if (changedCells.textContent !== undefined) {\n                    for (const cellTextDocument of changedCells.textContent) {\n                        cellTextDocumentConnection.changeTextDocument({ textDocument: cellTextDocument.document, contentChanges: cellTextDocument.changes });\n                        text.push(cellTextDocument.document.uri);\n                    }\n                }\n            }\n            // Update internal data structure.\n            this.updateCellMap(notebookDocument);\n            const changeEvent = { notebookDocument };\n            if (metadataChanged) {\n                changeEvent.metadata = { old: oldMetadata, new: notebookDocument.metadata };\n            }\n            const added = [];\n            for (const open of opened) {\n                added.push(this.getNotebookCell(open));\n            }\n            const removed = [];\n            for (const close of closed) {\n                removed.push(this.getNotebookCell(close));\n            }\n            const textContent = [];\n            for (const change of text) {\n                textContent.push(this.getNotebookCell(change));\n            }\n            if (added.length > 0 || removed.length > 0 || data.length > 0 || textContent.length > 0) {\n                changeEvent.cells = { added, removed, changed: { data, textContent } };\n            }\n            if (changeEvent.metadata !== undefined || changeEvent.cells !== undefined) {\n                this._onDidChange.fire(changeEvent);\n            }\n        }));\n        disposables.push(connection.notebooks.synchronization.onDidSaveNotebookDocument((params) => {\n            const notebookDocument = this.notebookDocuments.get(params.notebookDocument.uri);\n            if (notebookDocument === undefined) {\n                return;\n            }\n            this._onDidSave.fire(notebookDocument);\n        }));\n        disposables.push(connection.notebooks.synchronization.onDidCloseNotebookDocument((params) => {\n            const notebookDocument = this.notebookDocuments.get(params.notebookDocument.uri);\n            if (notebookDocument === undefined) {\n                return;\n            }\n            this._onDidClose.fire(notebookDocument);\n            for (const cellTextDocument of params.cellTextDocuments) {\n                cellTextDocumentConnection.closeTextDocument({ textDocument: cellTextDocument });\n            }\n            this.notebookDocuments.delete(params.notebookDocument.uri);\n            for (const cell of notebookDocument.cells) {\n                this.notebookCellMap.delete(cell.document);\n            }\n        }));\n        return vscode_languageserver_protocol_1.Disposable.create(() => { disposables.forEach(disposable => disposable.dispose()); });\n    }\n    updateCellMap(notebookDocument) {\n        for (const cell of notebookDocument.cells) {\n            this.notebookCellMap.set(cell.document, [cell, notebookDocument]);\n        }\n    }\n}\nexports.NotebookDocuments = NotebookDocuments;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.attachPartialResult = exports.ProgressFeature = exports.attachWorkDone = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst uuid_1 = require(\"./utils/uuid\");\nclass WorkDoneProgressReporterImpl {\n    constructor(_connection, _token) {\n        this._connection = _connection;\n        this._token = _token;\n        WorkDoneProgressReporterImpl.Instances.set(this._token, this);\n    }\n    begin(title, percentage, message, cancellable) {\n        let param = {\n            kind: 'begin',\n            title,\n            percentage,\n            message,\n            cancellable\n        };\n        this._connection.sendProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, param);\n    }\n    report(arg0, arg1) {\n        let param = {\n            kind: 'report'\n        };\n        if (typeof arg0 === 'number') {\n            param.percentage = arg0;\n            if (arg1 !== undefined) {\n                param.message = arg1;\n            }\n        }\n        else {\n            param.message = arg0;\n        }\n        this._connection.sendProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, param);\n    }\n    done() {\n        WorkDoneProgressReporterImpl.Instances.delete(this._token);\n        this._connection.sendProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, { kind: 'end' });\n    }\n}\nWorkDoneProgressReporterImpl.Instances = new Map();\nclass WorkDoneProgressServerReporterImpl extends WorkDoneProgressReporterImpl {\n    constructor(connection, token) {\n        super(connection, token);\n        this._source = new vscode_languageserver_protocol_1.CancellationTokenSource();\n    }\n    get token() {\n        return this._source.token;\n    }\n    done() {\n        this._source.dispose();\n        super.done();\n    }\n    cancel() {\n        this._source.cancel();\n    }\n}\nclass NullProgressReporter {\n    constructor() {\n    }\n    begin() {\n    }\n    report() {\n    }\n    done() {\n    }\n}\nclass NullProgressServerReporter extends NullProgressReporter {\n    constructor() {\n        super();\n        this._source = new vscode_languageserver_protocol_1.CancellationTokenSource();\n    }\n    get token() {\n        return this._source.token;\n    }\n    done() {\n        this._source.dispose();\n    }\n    cancel() {\n        this._source.cancel();\n    }\n}\nfunction attachWorkDone(connection, params) {\n    if (params === undefined || params.workDoneToken === undefined) {\n        return new NullProgressReporter();\n    }\n    const token = params.workDoneToken;\n    delete params.workDoneToken;\n    return new WorkDoneProgressReporterImpl(connection, token);\n}\nexports.attachWorkDone = attachWorkDone;\nconst ProgressFeature = (Base) => {\n    return class extends Base {\n        constructor() {\n            super();\n            this._progressSupported = false;\n        }\n        initialize(capabilities) {\n            super.initialize(capabilities);\n            if (capabilities?.window?.workDoneProgress === true) {\n                this._progressSupported = true;\n                this.connection.onNotification(vscode_languageserver_protocol_1.WorkDoneProgressCancelNotification.type, (params) => {\n                    let progress = WorkDoneProgressReporterImpl.Instances.get(params.token);\n                    if (progress instanceof WorkDoneProgressServerReporterImpl || progress instanceof NullProgressServerReporter) {\n                        progress.cancel();\n                    }\n                });\n            }\n        }\n        attachWorkDoneProgress(token) {\n            if (token === undefined) {\n                return new NullProgressReporter();\n            }\n            else {\n                return new WorkDoneProgressReporterImpl(this.connection, token);\n            }\n        }\n        createWorkDoneProgress() {\n            if (this._progressSupported) {\n                const token = (0, uuid_1.generateUuid)();\n                return this.connection.sendRequest(vscode_languageserver_protocol_1.WorkDoneProgressCreateRequest.type, { token }).then(() => {\n                    const result = new WorkDoneProgressServerReporterImpl(this.connection, token);\n                    return result;\n                });\n            }\n            else {\n                return Promise.resolve(new NullProgressServerReporter());\n            }\n        }\n    };\n};\nexports.ProgressFeature = ProgressFeature;\nvar ResultProgress;\n(function (ResultProgress) {\n    ResultProgress.type = new vscode_languageserver_protocol_1.ProgressType();\n})(ResultProgress || (ResultProgress = {}));\nclass ResultProgressReporterImpl {\n    constructor(_connection, _token) {\n        this._connection = _connection;\n        this._token = _token;\n    }\n    report(data) {\n        this._connection.sendProgress(ResultProgress.type, this._token, data);\n    }\n}\nfunction attachPartialResult(connection, params) {\n    if (params === undefined || params.partialResultToken === undefined) {\n        return undefined;\n    }\n    const token = params.partialResultToken;\n    delete params.partialResultToken;\n    return new ResultProgressReporterImpl(connection, token);\n}\nexports.attachPartialResult = attachPartialResult;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SemanticTokensBuilder = exports.SemanticTokensDiff = exports.SemanticTokensFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst SemanticTokensFeature = (Base) => {\n    return class extends Base {\n        get semanticTokens() {\n            return {\n                refresh: () => {\n                    return this.connection.sendRequest(vscode_languageserver_protocol_1.SemanticTokensRefreshRequest.type);\n                },\n                on: (handler) => {\n                    const type = vscode_languageserver_protocol_1.SemanticTokensRequest.type;\n                    return this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                },\n                onDelta: (handler) => {\n                    const type = vscode_languageserver_protocol_1.SemanticTokensDeltaRequest.type;\n                    return this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                },\n                onRange: (handler) => {\n                    const type = vscode_languageserver_protocol_1.SemanticTokensRangeRequest.type;\n                    return this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                }\n            };\n        }\n    };\n};\nexports.SemanticTokensFeature = SemanticTokensFeature;\nclass SemanticTokensDiff {\n    constructor(originalSequence, modifiedSequence) {\n        this.originalSequence = originalSequence;\n        this.modifiedSequence = modifiedSequence;\n    }\n    computeDiff() {\n        const originalLength = this.originalSequence.length;\n        const modifiedLength = this.modifiedSequence.length;\n        let startIndex = 0;\n        while (startIndex < modifiedLength && startIndex < originalLength && this.originalSequence[startIndex] === this.modifiedSequence[startIndex]) {\n            startIndex++;\n        }\n        if (startIndex < modifiedLength && startIndex < originalLength) {\n            let originalEndIndex = originalLength - 1;\n            let modifiedEndIndex = modifiedLength - 1;\n            while (originalEndIndex >= startIndex && modifiedEndIndex >= startIndex && this.originalSequence[originalEndIndex] === this.modifiedSequence[modifiedEndIndex]) {\n                originalEndIndex--;\n                modifiedEndIndex--;\n            }\n            // if one moved behind the start index move them forward again\n            if (originalEndIndex < startIndex || modifiedEndIndex < startIndex) {\n                originalEndIndex++;\n                modifiedEndIndex++;\n            }\n            const deleteCount = originalEndIndex - startIndex + 1;\n            const newData = this.modifiedSequence.slice(startIndex, modifiedEndIndex + 1);\n            // If we moved behind the start index we could have missed a simple delete.\n            if (newData.length === 1 && newData[0] === this.originalSequence[originalEndIndex]) {\n                return [\n                    { start: startIndex, deleteCount: deleteCount - 1 }\n                ];\n            }\n            else {\n                return [\n                    { start: startIndex, deleteCount, data: newData }\n                ];\n            }\n        }\n        else if (startIndex < modifiedLength) {\n            return [\n                { start: startIndex, deleteCount: 0, data: this.modifiedSequence.slice(startIndex) }\n            ];\n        }\n        else if (startIndex < originalLength) {\n            return [\n                { start: startIndex, deleteCount: originalLength - startIndex }\n            ];\n        }\n        else {\n            // The two arrays are the same.\n            return [];\n        }\n    }\n}\nexports.SemanticTokensDiff = SemanticTokensDiff;\nclass SemanticTokensBuilder {\n    constructor() {\n        this._prevData = undefined;\n        this.initialize();\n    }\n    initialize() {\n        this._id = Date.now();\n        this._prevLine = 0;\n        this._prevChar = 0;\n        this._data = [];\n        this._dataLen = 0;\n    }\n    push(line, char, length, tokenType, tokenModifiers) {\n        let pushLine = line;\n        let pushChar = char;\n        if (this._dataLen > 0) {\n            pushLine -= this._prevLine;\n            if (pushLine === 0) {\n                pushChar -= this._prevChar;\n            }\n        }\n        this._data[this._dataLen++] = pushLine;\n        this._data[this._dataLen++] = pushChar;\n        this._data[this._dataLen++] = length;\n        this._data[this._dataLen++] = tokenType;\n        this._data[this._dataLen++] = tokenModifiers;\n        this._prevLine = line;\n        this._prevChar = char;\n    }\n    get id() {\n        return this._id.toString();\n    }\n    previousResult(id) {\n        if (this.id === id) {\n            this._prevData = this._data;\n        }\n        this.initialize();\n    }\n    build() {\n        this._prevData = undefined;\n        return {\n            resultId: this.id,\n            data: this._data\n        };\n    }\n    canBuildEdits() {\n        return this._prevData !== undefined;\n    }\n    buildEdits() {\n        if (this._prevData !== undefined) {\n            return {\n                resultId: this.id,\n                edits: (new SemanticTokensDiff(this._prevData, this._data)).computeDiff()\n            };\n        }\n        else {\n            return this.build();\n        }\n    }\n}\nexports.SemanticTokensBuilder = SemanticTokensBuilder;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createConnection = exports.combineFeatures = exports.combineNotebooksFeatures = exports.combineLanguagesFeatures = exports.combineWorkspaceFeatures = exports.combineWindowFeatures = exports.combineClientFeatures = exports.combineTracerFeatures = exports.combineTelemetryFeatures = exports.combineConsoleFeatures = exports._NotebooksImpl = exports._LanguagesImpl = exports.BulkUnregistration = exports.BulkRegistration = exports.ErrorMessageTracker = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nconst UUID = require(\"./utils/uuid\");\nconst progress_1 = require(\"./progress\");\nconst configuration_1 = require(\"./configuration\");\nconst workspaceFolder_1 = require(\"./workspaceFolder\");\nconst callHierarchy_1 = require(\"./callHierarchy\");\nconst semanticTokens_1 = require(\"./semanticTokens\");\nconst showDocument_1 = require(\"./showDocument\");\nconst fileOperations_1 = require(\"./fileOperations\");\nconst linkedEditingRange_1 = require(\"./linkedEditingRange\");\nconst typeHierarchy_1 = require(\"./typeHierarchy\");\nconst inlineValue_1 = require(\"./inlineValue\");\nconst inlayHint_1 = require(\"./inlayHint\");\nconst diagnostic_1 = require(\"./diagnostic\");\nconst notebook_1 = require(\"./notebook\");\nconst moniker_1 = require(\"./moniker\");\nfunction null2Undefined(value) {\n    if (value === null) {\n        return undefined;\n    }\n    return value;\n}\n/**\n * Helps tracking error message. Equal occurrences of the same\n * message are only stored once. This class is for example\n * useful if text documents are validated in a loop and equal\n * error message should be folded into one.\n */\nclass ErrorMessageTracker {\n    constructor() {\n        this._messages = Object.create(null);\n    }\n    /**\n     * Add a message to the tracker.\n     *\n     * @param message The message to add.\n     */\n    add(message) {\n        let count = this._messages[message];\n        if (!count) {\n            count = 0;\n        }\n        count++;\n        this._messages[message] = count;\n    }\n    /**\n     * Send all tracked messages to the connection's window.\n     *\n     * @param connection The connection established between client and server.\n     */\n    sendErrors(connection) {\n        Object.keys(this._messages).forEach(message => {\n            connection.window.showErrorMessage(message);\n        });\n    }\n}\nexports.ErrorMessageTracker = ErrorMessageTracker;\nclass RemoteConsoleImpl {\n    constructor() {\n    }\n    rawAttach(connection) {\n        this._rawConnection = connection;\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    initialize(_capabilities) {\n    }\n    error(message) {\n        this.send(vscode_languageserver_protocol_1.MessageType.Error, message);\n    }\n    warn(message) {\n        this.send(vscode_languageserver_protocol_1.MessageType.Warning, message);\n    }\n    info(message) {\n        this.send(vscode_languageserver_protocol_1.MessageType.Info, message);\n    }\n    log(message) {\n        this.send(vscode_languageserver_protocol_1.MessageType.Log, message);\n    }\n    send(type, message) {\n        if (this._rawConnection) {\n            this._rawConnection.sendNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, { type, message }).catch(() => {\n                (0, vscode_languageserver_protocol_1.RAL)().console.error(`Sending log message failed`);\n            });\n        }\n    }\n}\nclass _RemoteWindowImpl {\n    constructor() {\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    showErrorMessage(message, ...actions) {\n        let params = { type: vscode_languageserver_protocol_1.MessageType.Error, message, actions };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, params).then(null2Undefined);\n    }\n    showWarningMessage(message, ...actions) {\n        let params = { type: vscode_languageserver_protocol_1.MessageType.Warning, message, actions };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, params).then(null2Undefined);\n    }\n    showInformationMessage(message, ...actions) {\n        let params = { type: vscode_languageserver_protocol_1.MessageType.Info, message, actions };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, params).then(null2Undefined);\n    }\n}\nconst RemoteWindowImpl = (0, showDocument_1.ShowDocumentFeature)((0, progress_1.ProgressFeature)(_RemoteWindowImpl));\nvar BulkRegistration;\n(function (BulkRegistration) {\n    /**\n     * Creates a new bulk registration.\n     * @return an empty bulk registration.\n     */\n    function create() {\n        return new BulkRegistrationImpl();\n    }\n    BulkRegistration.create = create;\n})(BulkRegistration = exports.BulkRegistration || (exports.BulkRegistration = {}));\nclass BulkRegistrationImpl {\n    constructor() {\n        this._registrations = [];\n        this._registered = new Set();\n    }\n    add(type, registerOptions) {\n        const method = Is.string(type) ? type : type.method;\n        if (this._registered.has(method)) {\n            throw new Error(`${method} is already added to this registration`);\n        }\n        const id = UUID.generateUuid();\n        this._registrations.push({\n            id: id,\n            method: method,\n            registerOptions: registerOptions || {}\n        });\n        this._registered.add(method);\n    }\n    asRegistrationParams() {\n        return {\n            registrations: this._registrations\n        };\n    }\n}\nvar BulkUnregistration;\n(function (BulkUnregistration) {\n    function create() {\n        return new BulkUnregistrationImpl(undefined, []);\n    }\n    BulkUnregistration.create = create;\n})(BulkUnregistration = exports.BulkUnregistration || (exports.BulkUnregistration = {}));\nclass BulkUnregistrationImpl {\n    constructor(_connection, unregistrations) {\n        this._connection = _connection;\n        this._unregistrations = new Map();\n        unregistrations.forEach(unregistration => {\n            this._unregistrations.set(unregistration.method, unregistration);\n        });\n    }\n    get isAttached() {\n        return !!this._connection;\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    add(unregistration) {\n        this._unregistrations.set(unregistration.method, unregistration);\n    }\n    dispose() {\n        let unregistrations = [];\n        for (let unregistration of this._unregistrations.values()) {\n            unregistrations.push(unregistration);\n        }\n        let params = {\n            unregisterations: unregistrations\n        };\n        this._connection.sendRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params).catch(() => {\n            this._connection.console.info(`Bulk unregistration failed.`);\n        });\n    }\n    disposeSingle(arg) {\n        const method = Is.string(arg) ? arg : arg.method;\n        const unregistration = this._unregistrations.get(method);\n        if (!unregistration) {\n            return false;\n        }\n        let params = {\n            unregisterations: [unregistration]\n        };\n        this._connection.sendRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params).then(() => {\n            this._unregistrations.delete(method);\n        }, (_error) => {\n            this._connection.console.info(`Un-registering request handler for ${unregistration.id} failed.`);\n        });\n        return true;\n    }\n}\nclass RemoteClientImpl {\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    register(typeOrRegistrations, registerOptionsOrType, registerOptions) {\n        if (typeOrRegistrations instanceof BulkRegistrationImpl) {\n            return this.registerMany(typeOrRegistrations);\n        }\n        else if (typeOrRegistrations instanceof BulkUnregistrationImpl) {\n            return this.registerSingle1(typeOrRegistrations, registerOptionsOrType, registerOptions);\n        }\n        else {\n            return this.registerSingle2(typeOrRegistrations, registerOptionsOrType);\n        }\n    }\n    registerSingle1(unregistration, type, registerOptions) {\n        const method = Is.string(type) ? type : type.method;\n        const id = UUID.generateUuid();\n        let params = {\n            registrations: [{ id, method, registerOptions: registerOptions || {} }]\n        };\n        if (!unregistration.isAttached) {\n            unregistration.attach(this.connection);\n        }\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params).then((_result) => {\n            unregistration.add({ id: id, method: method });\n            return unregistration;\n        }, (_error) => {\n            this.connection.console.info(`Registering request handler for ${method} failed.`);\n            return Promise.reject(_error);\n        });\n    }\n    registerSingle2(type, registerOptions) {\n        const method = Is.string(type) ? type : type.method;\n        const id = UUID.generateUuid();\n        let params = {\n            registrations: [{ id, method, registerOptions: registerOptions || {} }]\n        };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params).then((_result) => {\n            return vscode_languageserver_protocol_1.Disposable.create(() => {\n                this.unregisterSingle(id, method).catch(() => { this.connection.console.info(`Un-registering capability with id ${id} failed.`); });\n            });\n        }, (_error) => {\n            this.connection.console.info(`Registering request handler for ${method} failed.`);\n            return Promise.reject(_error);\n        });\n    }\n    unregisterSingle(id, method) {\n        let params = {\n            unregisterations: [{ id, method }]\n        };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params).catch(() => {\n            this.connection.console.info(`Un-registering request handler for ${id} failed.`);\n        });\n    }\n    registerMany(registrations) {\n        let params = registrations.asRegistrationParams();\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params).then(() => {\n            return new BulkUnregistrationImpl(this._connection, params.registrations.map(registration => { return { id: registration.id, method: registration.method }; }));\n        }, (_error) => {\n            this.connection.console.info(`Bulk registration failed.`);\n            return Promise.reject(_error);\n        });\n    }\n}\nclass _RemoteWorkspaceImpl {\n    constructor() {\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    applyEdit(paramOrEdit) {\n        function isApplyWorkspaceEditParams(value) {\n            return value && !!value.edit;\n        }\n        let params = isApplyWorkspaceEditParams(paramOrEdit) ? paramOrEdit : { edit: paramOrEdit };\n        return this.connection.sendRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params);\n    }\n}\nconst RemoteWorkspaceImpl = (0, fileOperations_1.FileOperationsFeature)((0, workspaceFolder_1.WorkspaceFoldersFeature)((0, configuration_1.ConfigurationFeature)(_RemoteWorkspaceImpl)));\nclass TracerImpl {\n    constructor() {\n        this._trace = vscode_languageserver_protocol_1.Trace.Off;\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    set trace(value) {\n        this._trace = value;\n    }\n    log(message, verbose) {\n        if (this._trace === vscode_languageserver_protocol_1.Trace.Off) {\n            return;\n        }\n        this.connection.sendNotification(vscode_languageserver_protocol_1.LogTraceNotification.type, {\n            message: message,\n            verbose: this._trace === vscode_languageserver_protocol_1.Trace.Verbose ? verbose : undefined\n        }).catch(() => {\n            // Very hard to decide what to do. We tried to send a log\n            // message which failed so we can't simply send another :-(.\n        });\n    }\n}\nclass TelemetryImpl {\n    constructor() {\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    logEvent(data) {\n        this.connection.sendNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, data).catch(() => {\n            this.connection.console.log(`Sending TelemetryEventNotification failed`);\n        });\n    }\n}\nclass _LanguagesImpl {\n    constructor() {\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    attachWorkDoneProgress(params) {\n        return (0, progress_1.attachWorkDone)(this.connection, params);\n    }\n    attachPartialResultProgress(_type, params) {\n        return (0, progress_1.attachPartialResult)(this.connection, params);\n    }\n}\nexports._LanguagesImpl = _LanguagesImpl;\nconst LanguagesImpl = (0, moniker_1.MonikerFeature)((0, diagnostic_1.DiagnosticFeature)((0, inlayHint_1.InlayHintFeature)((0, inlineValue_1.InlineValueFeature)((0, typeHierarchy_1.TypeHierarchyFeature)((0, linkedEditingRange_1.LinkedEditingRangeFeature)((0, semanticTokens_1.SemanticTokensFeature)((0, callHierarchy_1.CallHierarchyFeature)(_LanguagesImpl))))))));\nclass _NotebooksImpl {\n    constructor() {\n    }\n    attach(connection) {\n        this._connection = connection;\n    }\n    get connection() {\n        if (!this._connection) {\n            throw new Error('Remote is not attached to a connection yet.');\n        }\n        return this._connection;\n    }\n    initialize(_capabilities) {\n    }\n    fillServerCapabilities(_capabilities) {\n    }\n    attachWorkDoneProgress(params) {\n        return (0, progress_1.attachWorkDone)(this.connection, params);\n    }\n    attachPartialResultProgress(_type, params) {\n        return (0, progress_1.attachPartialResult)(this.connection, params);\n    }\n}\nexports._NotebooksImpl = _NotebooksImpl;\nconst NotebooksImpl = (0, notebook_1.NotebookSyncFeature)(_NotebooksImpl);\nfunction combineConsoleFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineConsoleFeatures = combineConsoleFeatures;\nfunction combineTelemetryFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineTelemetryFeatures = combineTelemetryFeatures;\nfunction combineTracerFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineTracerFeatures = combineTracerFeatures;\nfunction combineClientFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineClientFeatures = combineClientFeatures;\nfunction combineWindowFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineWindowFeatures = combineWindowFeatures;\nfunction combineWorkspaceFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineWorkspaceFeatures = combineWorkspaceFeatures;\nfunction combineLanguagesFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineLanguagesFeatures = combineLanguagesFeatures;\nfunction combineNotebooksFeatures(one, two) {\n    return function (Base) {\n        return two(one(Base));\n    };\n}\nexports.combineNotebooksFeatures = combineNotebooksFeatures;\nfunction combineFeatures(one, two) {\n    function combine(one, two, func) {\n        if (one && two) {\n            return func(one, two);\n        }\n        else if (one) {\n            return one;\n        }\n        else {\n            return two;\n        }\n    }\n    let result = {\n        __brand: 'features',\n        console: combine(one.console, two.console, combineConsoleFeatures),\n        tracer: combine(one.tracer, two.tracer, combineTracerFeatures),\n        telemetry: combine(one.telemetry, two.telemetry, combineTelemetryFeatures),\n        client: combine(one.client, two.client, combineClientFeatures),\n        window: combine(one.window, two.window, combineWindowFeatures),\n        workspace: combine(one.workspace, two.workspace, combineWorkspaceFeatures),\n        languages: combine(one.languages, two.languages, combineLanguagesFeatures),\n        notebooks: combine(one.notebooks, two.notebooks, combineNotebooksFeatures)\n    };\n    return result;\n}\nexports.combineFeatures = combineFeatures;\nfunction createConnection(connectionFactory, watchDog, factories) {\n    const logger = (factories && factories.console ? new (factories.console(RemoteConsoleImpl))() : new RemoteConsoleImpl());\n    const connection = connectionFactory(logger);\n    logger.rawAttach(connection);\n    const tracer = (factories && factories.tracer ? new (factories.tracer(TracerImpl))() : new TracerImpl());\n    const telemetry = (factories && factories.telemetry ? new (factories.telemetry(TelemetryImpl))() : new TelemetryImpl());\n    const client = (factories && factories.client ? new (factories.client(RemoteClientImpl))() : new RemoteClientImpl());\n    const remoteWindow = (factories && factories.window ? new (factories.window(RemoteWindowImpl))() : new RemoteWindowImpl());\n    const workspace = (factories && factories.workspace ? new (factories.workspace(RemoteWorkspaceImpl))() : new RemoteWorkspaceImpl());\n    const languages = (factories && factories.languages ? new (factories.languages(LanguagesImpl))() : new LanguagesImpl());\n    const notebooks = (factories && factories.notebooks ? new (factories.notebooks(NotebooksImpl))() : new NotebooksImpl());\n    const allRemotes = [logger, tracer, telemetry, client, remoteWindow, workspace, languages, notebooks];\n    function asPromise(value) {\n        if (value instanceof Promise) {\n            return value;\n        }\n        else if (Is.thenable(value)) {\n            return new Promise((resolve, reject) => {\n                value.then((resolved) => resolve(resolved), (error) => reject(error));\n            });\n        }\n        else {\n            return Promise.resolve(value);\n        }\n    }\n    let shutdownHandler = undefined;\n    let initializeHandler = undefined;\n    let exitHandler = undefined;\n    let protocolConnection = {\n        listen: () => connection.listen(),\n        sendRequest: (type, ...params) => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\n        onRequest: (type, handler) => connection.onRequest(type, handler),\n        sendNotification: (type, param) => {\n            const method = Is.string(type) ? type : type.method;\n            if (arguments.length === 1) {\n                return connection.sendNotification(method);\n            }\n            else {\n                return connection.sendNotification(method, param);\n            }\n        },\n        onNotification: (type, handler) => connection.onNotification(type, handler),\n        onProgress: connection.onProgress,\n        sendProgress: connection.sendProgress,\n        onInitialize: (handler) => {\n            initializeHandler = handler;\n            return {\n                dispose: () => {\n                    initializeHandler = undefined;\n                }\n            };\n        },\n        onInitialized: (handler) => connection.onNotification(vscode_languageserver_protocol_1.InitializedNotification.type, handler),\n        onShutdown: (handler) => {\n            shutdownHandler = handler;\n            return {\n                dispose: () => {\n                    shutdownHandler = undefined;\n                }\n            };\n        },\n        onExit: (handler) => {\n            exitHandler = handler;\n            return {\n                dispose: () => {\n                    exitHandler = undefined;\n                }\n            };\n        },\n        get console() { return logger; },\n        get telemetry() { return telemetry; },\n        get tracer() { return tracer; },\n        get client() { return client; },\n        get window() { return remoteWindow; },\n        get workspace() { return workspace; },\n        get languages() { return languages; },\n        get notebooks() { return notebooks; },\n        onDidChangeConfiguration: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, handler),\n        onDidChangeWatchedFiles: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, handler),\n        __textDocumentSync: undefined,\n        onDidOpenTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, handler),\n        onDidChangeTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, handler),\n        onDidCloseTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, handler),\n        onWillSaveTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, handler),\n        onWillSaveTextDocumentWaitUntil: (handler) => connection.onRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, handler),\n        onDidSaveTextDocument: (handler) => connection.onNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, handler),\n        sendDiagnostics: (params) => connection.sendNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, params),\n        onHover: (handler) => connection.onRequest(vscode_languageserver_protocol_1.HoverRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), undefined);\n        }),\n        onCompletion: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CompletionRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onCompletionResolve: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, handler),\n        onSignatureHelp: (handler) => connection.onRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), undefined);\n        }),\n        onDeclaration: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onDefinition: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onTypeDefinition: (handler) => connection.onRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onImplementation: (handler) => connection.onRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onReferences: (handler) => connection.onRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onDocumentHighlight: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onDocumentSymbol: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onWorkspaceSymbol: (handler) => connection.onRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onWorkspaceSymbolResolve: (handler) => connection.onRequest(vscode_languageserver_protocol_1.WorkspaceSymbolResolveRequest.type, handler),\n        onCodeAction: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onCodeActionResolve: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CodeActionResolveRequest.type, (params, cancel) => {\n            return handler(params, cancel);\n        }),\n        onCodeLens: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onCodeLensResolve: (handler) => connection.onRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, (params, cancel) => {\n            return handler(params, cancel);\n        }),\n        onDocumentFormatting: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), undefined);\n        }),\n        onDocumentRangeFormatting: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), undefined);\n        }),\n        onDocumentOnTypeFormatting: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, (params, cancel) => {\n            return handler(params, cancel);\n        }),\n        onRenameRequest: (handler) => connection.onRequest(vscode_languageserver_protocol_1.RenameRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), undefined);\n        }),\n        onPrepareRename: (handler) => connection.onRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, (params, cancel) => {\n            return handler(params, cancel);\n        }),\n        onDocumentLinks: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onDocumentLinkResolve: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, (params, cancel) => {\n            return handler(params, cancel);\n        }),\n        onDocumentColor: (handler) => connection.onRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onColorPresentation: (handler) => connection.onRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onFoldingRanges: (handler) => connection.onRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onSelectionRanges: (handler) => connection.onRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), (0, progress_1.attachPartialResult)(connection, params));\n        }),\n        onExecuteCommand: (handler) => connection.onRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, (params, cancel) => {\n            return handler(params, cancel, (0, progress_1.attachWorkDone)(connection, params), undefined);\n        }),\n        dispose: () => connection.dispose()\n    };\n    for (let remote of allRemotes) {\n        remote.attach(protocolConnection);\n    }\n    connection.onRequest(vscode_languageserver_protocol_1.InitializeRequest.type, (params) => {\n        watchDog.initialize(params);\n        if (Is.string(params.trace)) {\n            tracer.trace = vscode_languageserver_protocol_1.Trace.fromString(params.trace);\n        }\n        for (let remote of allRemotes) {\n            remote.initialize(params.capabilities);\n        }\n        if (initializeHandler) {\n            let result = initializeHandler(params, new vscode_languageserver_protocol_1.CancellationTokenSource().token, (0, progress_1.attachWorkDone)(connection, params), undefined);\n            return asPromise(result).then((value) => {\n                if (value instanceof vscode_languageserver_protocol_1.ResponseError) {\n                    return value;\n                }\n                let result = value;\n                if (!result) {\n                    result = { capabilities: {} };\n                }\n                let capabilities = result.capabilities;\n                if (!capabilities) {\n                    capabilities = {};\n                    result.capabilities = capabilities;\n                }\n                if (capabilities.textDocumentSync === undefined || capabilities.textDocumentSync === null) {\n                    capabilities.textDocumentSync = Is.number(protocolConnection.__textDocumentSync) ? protocolConnection.__textDocumentSync : vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n                }\n                else if (!Is.number(capabilities.textDocumentSync) && !Is.number(capabilities.textDocumentSync.change)) {\n                    capabilities.textDocumentSync.change = Is.number(protocolConnection.__textDocumentSync) ? protocolConnection.__textDocumentSync : vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n                }\n                for (let remote of allRemotes) {\n                    remote.fillServerCapabilities(capabilities);\n                }\n                return result;\n            });\n        }\n        else {\n            let result = { capabilities: { textDocumentSync: vscode_languageserver_protocol_1.TextDocumentSyncKind.None } };\n            for (let remote of allRemotes) {\n                remote.fillServerCapabilities(result.capabilities);\n            }\n            return result;\n        }\n    });\n    connection.onRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, () => {\n        watchDog.shutdownReceived = true;\n        if (shutdownHandler) {\n            return shutdownHandler(new vscode_languageserver_protocol_1.CancellationTokenSource().token);\n        }\n        else {\n            return undefined;\n        }\n    });\n    connection.onNotification(vscode_languageserver_protocol_1.ExitNotification.type, () => {\n        try {\n            if (exitHandler) {\n                exitHandler();\n            }\n        }\n        finally {\n            if (watchDog.shutdownReceived) {\n                watchDog.exit(0);\n            }\n            else {\n                watchDog.exit(1);\n            }\n        }\n    });\n    connection.onNotification(vscode_languageserver_protocol_1.SetTraceNotification.type, (params) => {\n        tracer.trace = vscode_languageserver_protocol_1.Trace.fromString(params.value);\n    });\n    return protocolConnection;\n}\nexports.createConnection = createConnection;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ShowDocumentFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst ShowDocumentFeature = (Base) => {\n    return class extends Base {\n        showDocument(params) {\n            return this.connection.sendRequest(vscode_languageserver_protocol_1.ShowDocumentRequest.type, params);\n        }\n    };\n};\nexports.ShowDocumentFeature = ShowDocumentFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TextDocuments = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\n/**\n * A manager for simple text documents. The manager requires at a minimum that\n * the server registered for the following text document sync events in the\n * initialize handler or via dynamic registration:\n *\n * - open and close events.\n * - change events.\n *\n * Registering for save and will save events is optional.\n */\nclass TextDocuments {\n    /**\n     * Create a new text document manager.\n     */\n    constructor(configuration) {\n        this._configuration = configuration;\n        this._syncedDocuments = new Map();\n        this._onDidChangeContent = new vscode_languageserver_protocol_1.Emitter();\n        this._onDidOpen = new vscode_languageserver_protocol_1.Emitter();\n        this._onDidClose = new vscode_languageserver_protocol_1.Emitter();\n        this._onDidSave = new vscode_languageserver_protocol_1.Emitter();\n        this._onWillSave = new vscode_languageserver_protocol_1.Emitter();\n    }\n    /**\n     * An event that fires when a text document managed by this manager\n     * has been opened.\n     */\n    get onDidOpen() {\n        return this._onDidOpen.event;\n    }\n    /**\n     * An event that fires when a text document managed by this manager\n     * has been opened or the content changes.\n     */\n    get onDidChangeContent() {\n        return this._onDidChangeContent.event;\n    }\n    /**\n     * An event that fires when a text document managed by this manager\n     * will be saved.\n     */\n    get onWillSave() {\n        return this._onWillSave.event;\n    }\n    /**\n     * Sets a handler that will be called if a participant wants to provide\n     * edits during a text document save.\n     */\n    onWillSaveWaitUntil(handler) {\n        this._willSaveWaitUntil = handler;\n    }\n    /**\n     * An event that fires when a text document managed by this manager\n     * has been saved.\n     */\n    get onDidSave() {\n        return this._onDidSave.event;\n    }\n    /**\n     * An event that fires when a text document managed by this manager\n     * has been closed.\n     */\n    get onDidClose() {\n        return this._onDidClose.event;\n    }\n    /**\n     * Returns the document for the given URI. Returns undefined if\n     * the document is not managed by this instance.\n     *\n     * @param uri The text document's URI to retrieve.\n     * @return the text document or `undefined`.\n     */\n    get(uri) {\n        return this._syncedDocuments.get(uri);\n    }\n    /**\n     * Returns all text documents managed by this instance.\n     *\n     * @return all text documents.\n     */\n    all() {\n        return Array.from(this._syncedDocuments.values());\n    }\n    /**\n     * Returns the URIs of all text documents managed by this instance.\n     *\n     * @return the URI's of all text documents.\n     */\n    keys() {\n        return Array.from(this._syncedDocuments.keys());\n    }\n    /**\n     * Listens for `low level` notification on the given connection to\n     * update the text documents managed by this instance.\n     *\n     * Please note that the connection only provides handlers not an event model. Therefore\n     * listening on a connection will overwrite the following handlers on a connection:\n     * `onDidOpenTextDocument`, `onDidChangeTextDocument`, `onDidCloseTextDocument`,\n     * `onWillSaveTextDocument`, `onWillSaveTextDocumentWaitUntil` and `onDidSaveTextDocument`.\n     *\n     * Use the corresponding events on the TextDocuments instance instead.\n     *\n     * @param connection The connection to listen on.\n     */\n    listen(connection) {\n        connection.__textDocumentSync = vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental;\n        const disposables = [];\n        disposables.push(connection.onDidOpenTextDocument((event) => {\n            const td = event.textDocument;\n            const document = this._configuration.create(td.uri, td.languageId, td.version, td.text);\n            this._syncedDocuments.set(td.uri, document);\n            const toFire = Object.freeze({ document });\n            this._onDidOpen.fire(toFire);\n            this._onDidChangeContent.fire(toFire);\n        }));\n        disposables.push(connection.onDidChangeTextDocument((event) => {\n            const td = event.textDocument;\n            const changes = event.contentChanges;\n            if (changes.length === 0) {\n                return;\n            }\n            const { version } = td;\n            if (version === null || version === undefined) {\n                throw new Error(`Received document change event for ${td.uri} without valid version identifier`);\n            }\n            let syncedDocument = this._syncedDocuments.get(td.uri);\n            if (syncedDocument !== undefined) {\n                syncedDocument = this._configuration.update(syncedDocument, changes, version);\n                this._syncedDocuments.set(td.uri, syncedDocument);\n                this._onDidChangeContent.fire(Object.freeze({ document: syncedDocument }));\n            }\n        }));\n        disposables.push(connection.onDidCloseTextDocument((event) => {\n            let syncedDocument = this._syncedDocuments.get(event.textDocument.uri);\n            if (syncedDocument !== undefined) {\n                this._syncedDocuments.delete(event.textDocument.uri);\n                this._onDidClose.fire(Object.freeze({ document: syncedDocument }));\n            }\n        }));\n        disposables.push(connection.onWillSaveTextDocument((event) => {\n            let syncedDocument = this._syncedDocuments.get(event.textDocument.uri);\n            if (syncedDocument !== undefined) {\n                this._onWillSave.fire(Object.freeze({ document: syncedDocument, reason: event.reason }));\n            }\n        }));\n        disposables.push(connection.onWillSaveTextDocumentWaitUntil((event, token) => {\n            let syncedDocument = this._syncedDocuments.get(event.textDocument.uri);\n            if (syncedDocument !== undefined && this._willSaveWaitUntil) {\n                return this._willSaveWaitUntil(Object.freeze({ document: syncedDocument, reason: event.reason }), token);\n            }\n            else {\n                return [];\n            }\n        }));\n        disposables.push(connection.onDidSaveTextDocument((event) => {\n            let syncedDocument = this._syncedDocuments.get(event.textDocument.uri);\n            if (syncedDocument !== undefined) {\n                this._onDidSave.fire(Object.freeze({ document: syncedDocument }));\n            }\n        }));\n        return vscode_languageserver_protocol_1.Disposable.create(() => { disposables.forEach(disposable => disposable.dispose()); });\n    }\n}\nexports.TextDocuments = TextDocuments;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeHierarchyFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst TypeHierarchyFeature = (Base) => {\n    return class extends Base {\n        get typeHierarchy() {\n            return {\n                onPrepare: (handler) => {\n                    return this.connection.onRequest(vscode_languageserver_protocol_1.TypeHierarchyPrepareRequest.type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), undefined);\n                    });\n                },\n                onSupertypes: (handler) => {\n                    const type = vscode_languageserver_protocol_1.TypeHierarchySupertypesRequest.type;\n                    return this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                },\n                onSubtypes: (handler) => {\n                    const type = vscode_languageserver_protocol_1.TypeHierarchySubtypesRequest.type;\n                    return this.connection.onRequest(type, (params, cancel) => {\n                        return handler(params, cancel, this.attachWorkDoneProgress(params), this.attachPartialResultProgress(type, params));\n                    });\n                }\n            };\n        }\n    };\n};\nexports.TypeHierarchyFeature = TypeHierarchyFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.thenable = exports.typedArray = exports.stringArray = exports.array = exports.func = exports.error = exports.number = exports.string = exports.boolean = void 0;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nexports.typedArray = typedArray;\nfunction thenable(value) {\n    return value && func(value.then);\n}\nexports.thenable = thenable;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.generateUuid = exports.parse = exports.isUUID = exports.v4 = exports.empty = void 0;\nclass ValueUUID {\n    constructor(_value) {\n        this._value = _value;\n        // empty\n    }\n    asHex() {\n        return this._value;\n    }\n    equals(other) {\n        return this.asHex() === other.asHex();\n    }\n}\nclass V4UUID extends ValueUUID {\n    constructor() {\n        super([\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            '4',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._oneOf(V4UUID._timeHighBits),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n        ].join(''));\n    }\n    static _oneOf(array) {\n        return array[Math.floor(array.length * Math.random())];\n    }\n    static _randomHex() {\n        return V4UUID._oneOf(V4UUID._chars);\n    }\n}\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\n/**\n * An empty UUID that contains only zeros.\n */\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\nfunction v4() {\n    return new V4UUID();\n}\nexports.v4 = v4;\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\nfunction isUUID(value) {\n    return _UUIDPattern.test(value);\n}\nexports.isUUID = isUUID;\n/**\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\n * @param value A uuid string.\n */\nfunction parse(value) {\n    if (!isUUID(value)) {\n        throw new Error('invalid uuid');\n    }\n    return new ValueUUID(value);\n}\nexports.parse = parse;\nfunction generateUuid() {\n    return v4().asHex();\n}\nexports.generateUuid = generateUuid;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceFoldersFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst WorkspaceFoldersFeature = (Base) => {\n    return class extends Base {\n        constructor() {\n            super();\n            this._notificationIsAutoRegistered = false;\n        }\n        initialize(capabilities) {\n            super.initialize(capabilities);\n            let workspaceCapabilities = capabilities.workspace;\n            if (workspaceCapabilities && workspaceCapabilities.workspaceFolders) {\n                this._onDidChangeWorkspaceFolders = new vscode_languageserver_protocol_1.Emitter();\n                this.connection.onNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, (params) => {\n                    this._onDidChangeWorkspaceFolders.fire(params.event);\n                });\n            }\n        }\n        fillServerCapabilities(capabilities) {\n            super.fillServerCapabilities(capabilities);\n            const changeNotifications = capabilities.workspace?.workspaceFolders?.changeNotifications;\n            this._notificationIsAutoRegistered = changeNotifications === true || typeof changeNotifications === 'string';\n        }\n        getWorkspaceFolders() {\n            return this.connection.sendRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type);\n        }\n        get onDidChangeWorkspaceFolders() {\n            if (!this._onDidChangeWorkspaceFolders) {\n                throw new Error('Client doesn\\'t support sending workspace folder change events.');\n            }\n            if (!this._notificationIsAutoRegistered && !this._unregistration) {\n                this._unregistration = this.connection.client.register(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type);\n            }\n            return this._onDidChangeWorkspaceFolders.event;\n        }\n    };\n};\nexports.WorkspaceFoldersFeature = WorkspaceFoldersFeature;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolveModulePath = exports.FileSystem = exports.resolveGlobalYarnPath = exports.resolveGlobalNodePath = exports.resolve = exports.uriToFilePath = void 0;\nconst url = require(\"url\");\nconst path = require(\"path\");\nconst fs = require(\"fs\");\nconst child_process_1 = require(\"child_process\");\n/**\n * @deprecated Use the `vscode-uri` npm module which provides a more\n * complete implementation of handling VS Code URIs.\n */\nfunction uriToFilePath(uri) {\n    let parsed = url.parse(uri);\n    if (parsed.protocol !== 'file:' || !parsed.path) {\n        return undefined;\n    }\n    let segments = parsed.path.split('/');\n    for (var i = 0, len = segments.length; i < len; i++) {\n        segments[i] = decodeURIComponent(segments[i]);\n    }\n    if (process.platform === 'win32' && segments.length > 1) {\n        let first = segments[0];\n        let second = segments[1];\n        // Do we have a drive letter and we started with a / which is the\n        // case if the first segement is empty (see split above)\n        if (first.length === 0 && second.length > 1 && second[1] === ':') {\n            // Remove first slash\n            segments.shift();\n        }\n    }\n    return path.normalize(segments.join('/'));\n}\nexports.uriToFilePath = uriToFilePath;\nfunction isWindows() {\n    return process.platform === 'win32';\n}\nfunction resolve(moduleName, nodePath, cwd, tracer) {\n    const nodePathKey = 'NODE_PATH';\n    const app = [\n        'var p = process;',\n        'p.on(\\'message\\',function(m){',\n        'if(m.c===\\'e\\'){',\n        'p.exit(0);',\n        '}',\n        'else if(m.c===\\'rs\\'){',\n        'try{',\n        'var r=require.resolve(m.a);',\n        'p.send({c:\\'r\\',s:true,r:r});',\n        '}',\n        'catch(err){',\n        'p.send({c:\\'r\\',s:false});',\n        '}',\n        '}',\n        '});'\n    ].join('');\n    return new Promise((resolve, reject) => {\n        let env = process.env;\n        let newEnv = Object.create(null);\n        Object.keys(env).forEach(key => newEnv[key] = env[key]);\n        if (nodePath && fs.existsSync(nodePath) /* see issue 545 */) {\n            if (newEnv[nodePathKey]) {\n                newEnv[nodePathKey] = nodePath + path.delimiter + newEnv[nodePathKey];\n            }\n            else {\n                newEnv[nodePathKey] = nodePath;\n            }\n            if (tracer) {\n                tracer(`NODE_PATH value is: ${newEnv[nodePathKey]}`);\n            }\n        }\n        newEnv['ELECTRON_RUN_AS_NODE'] = '1';\n        try {\n            let cp = (0, child_process_1.fork)('', [], {\n                cwd: cwd,\n                env: newEnv,\n                execArgv: ['-e', app]\n            });\n            if (cp.pid === void 0) {\n                reject(new Error(`Starting process to resolve node module  ${moduleName} failed`));\n                return;\n            }\n            cp.on('error', (error) => {\n                reject(error);\n            });\n            cp.on('message', (message) => {\n                if (message.c === 'r') {\n                    cp.send({ c: 'e' });\n                    if (message.s) {\n                        resolve(message.r);\n                    }\n                    else {\n                        reject(new Error(`Failed to resolve module: ${moduleName}`));\n                    }\n                }\n            });\n            let message = {\n                c: 'rs',\n                a: moduleName\n            };\n            cp.send(message);\n        }\n        catch (error) {\n            reject(error);\n        }\n    });\n}\nexports.resolve = resolve;\n/**\n * Resolve the global npm package path.\n * @deprecated Since this depends on the used package manager and their version the best is that servers\n * implement this themselves since they know best what kind of package managers to support.\n * @param tracer the tracer to use\n */\nfunction resolveGlobalNodePath(tracer) {\n    let npmCommand = 'npm';\n    const env = Object.create(null);\n    Object.keys(process.env).forEach(key => env[key] = process.env[key]);\n    env['NO_UPDATE_NOTIFIER'] = 'true';\n    const options = {\n        encoding: 'utf8',\n        env\n    };\n    if (isWindows()) {\n        npmCommand = 'npm.cmd';\n        options.shell = true;\n    }\n    let handler = () => { };\n    try {\n        process.on('SIGPIPE', handler);\n        let stdout = (0, child_process_1.spawnSync)(npmCommand, ['config', 'get', 'prefix'], options).stdout;\n        if (!stdout) {\n            if (tracer) {\n                tracer(`'npm config get prefix' didn't return a value.`);\n            }\n            return undefined;\n        }\n        let prefix = stdout.trim();\n        if (tracer) {\n            tracer(`'npm config get prefix' value is: ${prefix}`);\n        }\n        if (prefix.length > 0) {\n            if (isWindows()) {\n                return path.join(prefix, 'node_modules');\n            }\n            else {\n                return path.join(prefix, 'lib', 'node_modules');\n            }\n        }\n        return undefined;\n    }\n    catch (err) {\n        return undefined;\n    }\n    finally {\n        process.removeListener('SIGPIPE', handler);\n    }\n}\nexports.resolveGlobalNodePath = resolveGlobalNodePath;\n/*\n * Resolve the global yarn pakage path.\n * @deprecated Since this depends on the used package manager and their version the best is that servers\n * implement this themselves since they know best what kind of package managers to support.\n * @param tracer the tracer to use\n */\nfunction resolveGlobalYarnPath(tracer) {\n    let yarnCommand = 'yarn';\n    let options = {\n        encoding: 'utf8'\n    };\n    if (isWindows()) {\n        yarnCommand = 'yarn.cmd';\n        options.shell = true;\n    }\n    let handler = () => { };\n    try {\n        process.on('SIGPIPE', handler);\n        let results = (0, child_process_1.spawnSync)(yarnCommand, ['global', 'dir', '--json'], options);\n        let stdout = results.stdout;\n        if (!stdout) {\n            if (tracer) {\n                tracer(`'yarn global dir' didn't return a value.`);\n                if (results.stderr) {\n                    tracer(results.stderr);\n                }\n            }\n            return undefined;\n        }\n        let lines = stdout.trim().split(/\\r?\\n/);\n        for (let line of lines) {\n            try {\n                let yarn = JSON.parse(line);\n                if (yarn.type === 'log') {\n                    return path.join(yarn.data, 'node_modules');\n                }\n            }\n            catch (e) {\n                // Do nothing. Ignore the line\n            }\n        }\n        return undefined;\n    }\n    catch (err) {\n        return undefined;\n    }\n    finally {\n        process.removeListener('SIGPIPE', handler);\n    }\n}\nexports.resolveGlobalYarnPath = resolveGlobalYarnPath;\nvar FileSystem;\n(function (FileSystem) {\n    let _isCaseSensitive = undefined;\n    function isCaseSensitive() {\n        if (_isCaseSensitive !== void 0) {\n            return _isCaseSensitive;\n        }\n        if (process.platform === 'win32') {\n            _isCaseSensitive = false;\n        }\n        else {\n            // convert current file name to upper case / lower case and check if file exists\n            // (guards against cases when name is already all uppercase or lowercase)\n            _isCaseSensitive = !fs.existsSync(__filename.toUpperCase()) || !fs.existsSync(__filename.toLowerCase());\n        }\n        return _isCaseSensitive;\n    }\n    FileSystem.isCaseSensitive = isCaseSensitive;\n    function isParent(parent, child) {\n        if (isCaseSensitive()) {\n            return path.normalize(child).indexOf(path.normalize(parent)) === 0;\n        }\n        else {\n            return path.normalize(child).toLowerCase().indexOf(path.normalize(parent).toLowerCase()) === 0;\n        }\n    }\n    FileSystem.isParent = isParent;\n})(FileSystem = exports.FileSystem || (exports.FileSystem = {}));\nfunction resolveModulePath(workspaceRoot, moduleName, nodePath, tracer) {\n    if (nodePath) {\n        if (!path.isAbsolute(nodePath)) {\n            nodePath = path.join(workspaceRoot, nodePath);\n        }\n        return resolve(moduleName, nodePath, nodePath, tracer).then((value) => {\n            if (FileSystem.isParent(nodePath, value)) {\n                return value;\n            }\n            else {\n                return Promise.reject(new Error(`Failed to load ${moduleName} from node path location.`));\n            }\n        }).then(undefined, (_error) => {\n            return resolve(moduleName, resolveGlobalNodePath(tracer), workspaceRoot, tracer);\n        });\n    }\n    else {\n        return resolve(moduleName, resolveGlobalNodePath(tracer), workspaceRoot, tracer);\n    }\n}\nexports.resolveModulePath = resolveModulePath;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/thenable.d.ts\" />\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createConnection = exports.Files = void 0;\nconst Is = require(\"../common/utils/is\");\nconst server_1 = require(\"../common/server\");\nconst fm = require(\"./files\");\nconst node_1 = require(\"vscode-languageserver-protocol/node\");\n__exportStar(require(\"vscode-languageserver-protocol/node\"), exports);\n__exportStar(require(\"../common/api\"), exports);\nvar Files;\n(function (Files) {\n    Files.uriToFilePath = fm.uriToFilePath;\n    Files.resolveGlobalNodePath = fm.resolveGlobalNodePath;\n    Files.resolveGlobalYarnPath = fm.resolveGlobalYarnPath;\n    Files.resolve = fm.resolve;\n    Files.resolveModulePath = fm.resolveModulePath;\n})(Files = exports.Files || (exports.Files = {}));\nlet _protocolConnection;\nfunction endProtocolConnection() {\n    if (_protocolConnection === undefined) {\n        return;\n    }\n    try {\n        _protocolConnection.end();\n    }\n    catch (_err) {\n        // Ignore. The client process could have already\n        // did and we can't send an end into the connection.\n    }\n}\nlet _shutdownReceived = false;\nlet exitTimer = undefined;\nfunction setupExitTimer() {\n    const argName = '--clientProcessId';\n    function runTimer(value) {\n        try {\n            let processId = parseInt(value);\n            if (!isNaN(processId)) {\n                exitTimer = setInterval(() => {\n                    try {\n                        process.kill(processId, 0);\n                    }\n                    catch (ex) {\n                        // Parent process doesn't exist anymore. Exit the server.\n                        endProtocolConnection();\n                        process.exit(_shutdownReceived ? 0 : 1);\n                    }\n                }, 3000);\n            }\n        }\n        catch (e) {\n            // Ignore errors;\n        }\n    }\n    for (let i = 2; i < process.argv.length; i++) {\n        let arg = process.argv[i];\n        if (arg === argName && i + 1 < process.argv.length) {\n            runTimer(process.argv[i + 1]);\n            return;\n        }\n        else {\n            let args = arg.split('=');\n            if (args[0] === argName) {\n                runTimer(args[1]);\n            }\n        }\n    }\n}\nsetupExitTimer();\nconst watchDog = {\n    initialize: (params) => {\n        const processId = params.processId;\n        if (Is.number(processId) && exitTimer === undefined) {\n            // We received a parent process id. Set up a timer to periodically check\n            // if the parent is still alive.\n            setInterval(() => {\n                try {\n                    process.kill(processId, 0);\n                }\n                catch (ex) {\n                    // Parent process doesn't exist anymore. Exit the server.\n                    process.exit(_shutdownReceived ? 0 : 1);\n                }\n            }, 3000);\n        }\n    },\n    get shutdownReceived() {\n        return _shutdownReceived;\n    },\n    set shutdownReceived(value) {\n        _shutdownReceived = value;\n    },\n    exit: (code) => {\n        endProtocolConnection();\n        process.exit(code);\n    }\n};\nfunction createConnection(arg1, arg2, arg3, arg4) {\n    let factories;\n    let input;\n    let output;\n    let options;\n    if (arg1 !== void 0 && arg1.__brand === 'features') {\n        factories = arg1;\n        arg1 = arg2;\n        arg2 = arg3;\n        arg3 = arg4;\n    }\n    if (node_1.ConnectionStrategy.is(arg1) || node_1.ConnectionOptions.is(arg1)) {\n        options = arg1;\n    }\n    else {\n        input = arg1;\n        output = arg2;\n        options = arg3;\n    }\n    return _createConnection(input, output, options, factories);\n}\nexports.createConnection = createConnection;\nfunction _createConnection(input, output, options, factories) {\n    if (!input && !output && process.argv.length > 2) {\n        let port = void 0;\n        let pipeName = void 0;\n        let argv = process.argv.slice(2);\n        for (let i = 0; i < argv.length; i++) {\n            let arg = argv[i];\n            if (arg === '--node-ipc') {\n                input = new node_1.IPCMessageReader(process);\n                output = new node_1.IPCMessageWriter(process);\n                break;\n            }\n            else if (arg === '--stdio') {\n                input = process.stdin;\n                output = process.stdout;\n                break;\n            }\n            else if (arg === '--socket') {\n                port = parseInt(argv[i + 1]);\n                break;\n            }\n            else if (arg === '--pipe') {\n                pipeName = argv[i + 1];\n                break;\n            }\n            else {\n                var args = arg.split('=');\n                if (args[0] === '--socket') {\n                    port = parseInt(args[1]);\n                    break;\n                }\n                else if (args[0] === '--pipe') {\n                    pipeName = args[1];\n                    break;\n                }\n            }\n        }\n        if (port) {\n            let transport = (0, node_1.createServerSocketTransport)(port);\n            input = transport[0];\n            output = transport[1];\n        }\n        else if (pipeName) {\n            let transport = (0, node_1.createServerPipeTransport)(pipeName);\n            input = transport[0];\n            output = transport[1];\n        }\n    }\n    var commandLineMessage = 'Use arguments of createConnection or set command line parameters: \\'--node-ipc\\', \\'--stdio\\' or \\'--socket={number}\\'';\n    if (!input) {\n        throw new Error('Connection input stream is not set. ' + commandLineMessage);\n    }\n    if (!output) {\n        throw new Error('Connection output stream is not set. ' + commandLineMessage);\n    }\n    // Backwards compatibility\n    if (Is.func(input.read) && Is.func(input.on)) {\n        let inputStream = input;\n        inputStream.on('end', () => {\n            endProtocolConnection();\n            process.exit(_shutdownReceived ? 0 : 1);\n        });\n        inputStream.on('close', () => {\n            endProtocolConnection();\n            process.exit(_shutdownReceived ? 0 : 1);\n        });\n    }\n    const connectionFactory = (logger) => {\n        const result = (0, node_1.createProtocolConnection)(input, output, logger, options);\n        return result;\n    };\n    return (0, server_1.createConnection)(connectionFactory, watchDog, factories);\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');","var LIB;(()=>{\"use strict\";var t={470:t=>{function e(t){if(\"string\"!=typeof t)throw new TypeError(\"Path must be a string. Received \"+JSON.stringify(t))}function r(t,e){for(var r,n=\"\",o=0,i=-1,a=0,h=0;h<=t.length;++h){if(h<t.length)r=t.charCodeAt(h);else{if(47===r)break;r=47}if(47===r){if(i===h-1||1===a);else if(i!==h-1&&2===a){if(n.length<2||2!==o||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var s=n.lastIndexOf(\"/\");if(s!==n.length-1){-1===s?(n=\"\",o=0):o=(n=n.slice(0,s)).length-1-n.lastIndexOf(\"/\"),i=h,a=0;continue}}else if(2===n.length||1===n.length){n=\"\",o=0,i=h,a=0;continue}e&&(n.length>0?n+=\"/..\":n=\"..\",o=2)}else n.length>0?n+=\"/\"+t.slice(i+1,h):n=t.slice(i+1,h),o=h-i-1;i=h,a=0}else 46===r&&-1!==a?++a:a=-1}return n}var n={resolve:function(){for(var t,n=\"\",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var a;i>=0?a=arguments[i]:(void 0===t&&(t=process.cwd()),a=t),e(a),0!==a.length&&(n=a+\"/\"+n,o=47===a.charCodeAt(0))}return n=r(n,!o),o?n.length>0?\"/\"+n:\"/\":n.length>0?n:\".\"},normalize:function(t){if(e(t),0===t.length)return\".\";var n=47===t.charCodeAt(0),o=47===t.charCodeAt(t.length-1);return 0!==(t=r(t,!n)).length||n||(t=\".\"),t.length>0&&o&&(t+=\"/\"),n?\"/\"+t:t},isAbsolute:function(t){return e(t),t.length>0&&47===t.charCodeAt(0)},join:function(){if(0===arguments.length)return\".\";for(var t,r=0;r<arguments.length;++r){var o=arguments[r];e(o),o.length>0&&(void 0===t?t=o:t+=\"/\"+o)}return void 0===t?\".\":n.normalize(t)},relative:function(t,r){if(e(t),e(r),t===r)return\"\";if((t=n.resolve(t))===(r=n.resolve(r)))return\"\";for(var o=1;o<t.length&&47===t.charCodeAt(o);++o);for(var i=t.length,a=i-o,h=1;h<r.length&&47===r.charCodeAt(h);++h);for(var s=r.length-h,c=a<s?a:s,f=-1,u=0;u<=c;++u){if(u===c){if(s>c){if(47===r.charCodeAt(h+u))return r.slice(h+u+1);if(0===u)return r.slice(h+u)}else a>c&&(47===t.charCodeAt(o+u)?f=u:0===u&&(f=0));break}var l=t.charCodeAt(o+u);if(l!==r.charCodeAt(h+u))break;47===l&&(f=u)}var p=\"\";for(u=o+f+1;u<=i;++u)u!==i&&47!==t.charCodeAt(u)||(0===p.length?p+=\"..\":p+=\"/..\");return p.length>0?p+r.slice(h+f):(h+=f,47===r.charCodeAt(h)&&++h,r.slice(h))},_makeLong:function(t){return t},dirname:function(t){if(e(t),0===t.length)return\".\";for(var r=t.charCodeAt(0),n=47===r,o=-1,i=!0,a=t.length-1;a>=1;--a)if(47===(r=t.charCodeAt(a))){if(!i){o=a;break}}else i=!1;return-1===o?n?\"/\":\".\":n&&1===o?\"//\":t.slice(0,o)},basename:function(t,r){if(void 0!==r&&\"string\"!=typeof r)throw new TypeError('\"ext\" argument must be a string');e(t);var n,o=0,i=-1,a=!0;if(void 0!==r&&r.length>0&&r.length<=t.length){if(r.length===t.length&&r===t)return\"\";var h=r.length-1,s=-1;for(n=t.length-1;n>=0;--n){var c=t.charCodeAt(n);if(47===c){if(!a){o=n+1;break}}else-1===s&&(a=!1,s=n+1),h>=0&&(c===r.charCodeAt(h)?-1==--h&&(i=n):(h=-1,i=s))}return o===i?i=s:-1===i&&(i=t.length),t.slice(o,i)}for(n=t.length-1;n>=0;--n)if(47===t.charCodeAt(n)){if(!a){o=n+1;break}}else-1===i&&(a=!1,i=n+1);return-1===i?\"\":t.slice(o,i)},extname:function(t){e(t);for(var r=-1,n=0,o=-1,i=!0,a=0,h=t.length-1;h>=0;--h){var s=t.charCodeAt(h);if(47!==s)-1===o&&(i=!1,o=h+1),46===s?-1===r?r=h:1!==a&&(a=1):-1!==r&&(a=-1);else if(!i){n=h+1;break}}return-1===r||-1===o||0===a||1===a&&r===o-1&&r===n+1?\"\":t.slice(r,o)},format:function(t){if(null===t||\"object\"!=typeof t)throw new TypeError('The \"pathObject\" argument must be of type Object. Received type '+typeof t);return function(t,e){var r=e.dir||e.root,n=e.base||(e.name||\"\")+(e.ext||\"\");return r?r===e.root?r+n:r+\"/\"+n:n}(0,t)},parse:function(t){e(t);var r={root:\"\",dir:\"\",base:\"\",ext:\"\",name:\"\"};if(0===t.length)return r;var n,o=t.charCodeAt(0),i=47===o;i?(r.root=\"/\",n=1):n=0;for(var a=-1,h=0,s=-1,c=!0,f=t.length-1,u=0;f>=n;--f)if(47!==(o=t.charCodeAt(f)))-1===s&&(c=!1,s=f+1),46===o?-1===a?a=f:1!==u&&(u=1):-1!==a&&(u=-1);else if(!c){h=f+1;break}return-1===a||-1===s||0===u||1===u&&a===s-1&&a===h+1?-1!==s&&(r.base=r.name=0===h&&i?t.slice(1,s):t.slice(h,s)):(0===h&&i?(r.name=t.slice(1,a),r.base=t.slice(1,s)):(r.name=t.slice(h,a),r.base=t.slice(h,s)),r.ext=t.slice(a,s)),h>0?r.dir=t.slice(0,h-1):i&&(r.dir=\"/\"),r},sep:\"/\",delimiter:\":\",win32:null,posix:null};n.posix=n,t.exports=n}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})};var n={};(()=>{var t;if(r.r(n),r.d(n,{URI:()=>g,Utils:()=>O}),\"object\"==typeof process)t=\"win32\"===process.platform;else if(\"object\"==typeof navigator){var e=navigator.userAgent;t=e.indexOf(\"Windows\")>=0}var o,i,a=(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},o(t,e)},function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Class extends value \"+String(e)+\" is not a constructor or null\");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),h=/^\\w[\\w\\d+.-]*$/,s=/^\\//,c=/^\\/\\//;function f(t,e){if(!t.scheme&&e)throw new Error('[UriError]: Scheme is missing: {scheme: \"\", authority: \"'.concat(t.authority,'\", path: \"').concat(t.path,'\", query: \"').concat(t.query,'\", fragment: \"').concat(t.fragment,'\"}'));if(t.scheme&&!h.test(t.scheme))throw new Error(\"[UriError]: Scheme contains illegal characters.\");if(t.path)if(t.authority){if(!s.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character')}else if(c.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")')}var u=\"\",l=\"/\",p=/^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/,g=function(){function e(t,e,r,n,o,i){void 0===i&&(i=!1),\"object\"==typeof t?(this.scheme=t.scheme||u,this.authority=t.authority||u,this.path=t.path||u,this.query=t.query||u,this.fragment=t.fragment||u):(this.scheme=function(t,e){return t||e?t:\"file\"}(t,i),this.authority=e||u,this.path=function(t,e){switch(t){case\"https\":case\"http\":case\"file\":e?e[0]!==l&&(e=l+e):e=l}return e}(this.scheme,r||u),this.query=n||u,this.fragment=o||u,f(this,i))}return e.isUri=function(t){return t instanceof e||!!t&&\"string\"==typeof t.authority&&\"string\"==typeof t.fragment&&\"string\"==typeof t.path&&\"string\"==typeof t.query&&\"string\"==typeof t.scheme&&\"string\"==typeof t.fsPath&&\"function\"==typeof t.with&&\"function\"==typeof t.toString},Object.defineProperty(e.prototype,\"fsPath\",{get:function(){return C(this,!1)},enumerable:!1,configurable:!0}),e.prototype.with=function(t){if(!t)return this;var e=t.scheme,r=t.authority,n=t.path,o=t.query,i=t.fragment;return void 0===e?e=this.scheme:null===e&&(e=u),void 0===r?r=this.authority:null===r&&(r=u),void 0===n?n=this.path:null===n&&(n=u),void 0===o?o=this.query:null===o&&(o=u),void 0===i?i=this.fragment:null===i&&(i=u),e===this.scheme&&r===this.authority&&n===this.path&&o===this.query&&i===this.fragment?this:new v(e,r,n,o,i)},e.parse=function(t,e){void 0===e&&(e=!1);var r=p.exec(t);return r?new v(r[2]||u,_(r[4]||u),_(r[5]||u),_(r[7]||u),_(r[9]||u),e):new v(u,u,u,u,u)},e.file=function(e){var r=u;if(t&&(e=e.replace(/\\\\/g,l)),e[0]===l&&e[1]===l){var n=e.indexOf(l,2);-1===n?(r=e.substring(2),e=l):(r=e.substring(2,n),e=e.substring(n)||l)}return new v(\"file\",r,e,u,u)},e.from=function(t){var e=new v(t.scheme,t.authority,t.path,t.query,t.fragment);return f(e,!0),e},e.prototype.toString=function(t){return void 0===t&&(t=!1),A(this,t)},e.prototype.toJSON=function(){return this},e.revive=function(t){if(t){if(t instanceof e)return t;var r=new v(t);return r._formatted=t.external,r._fsPath=t._sep===d?t.fsPath:null,r}return t},e}(),d=t?1:void 0,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._formatted=null,e._fsPath=null,e}return a(e,t),Object.defineProperty(e.prototype,\"fsPath\",{get:function(){return this._fsPath||(this._fsPath=C(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(t){return void 0===t&&(t=!1),t?A(this,!0):(this._formatted||(this._formatted=A(this,!1)),this._formatted)},e.prototype.toJSON=function(){var t={$mid:1};return this._fsPath&&(t.fsPath=this._fsPath,t._sep=d),this._formatted&&(t.external=this._formatted),this.path&&(t.path=this.path),this.scheme&&(t.scheme=this.scheme),this.authority&&(t.authority=this.authority),this.query&&(t.query=this.query),this.fragment&&(t.fragment=this.fragment),t},e}(g),y=((i={})[58]=\"%3A\",i[47]=\"%2F\",i[63]=\"%3F\",i[35]=\"%23\",i[91]=\"%5B\",i[93]=\"%5D\",i[64]=\"%40\",i[33]=\"%21\",i[36]=\"%24\",i[38]=\"%26\",i[39]=\"%27\",i[40]=\"%28\",i[41]=\"%29\",i[42]=\"%2A\",i[43]=\"%2B\",i[44]=\"%2C\",i[59]=\"%3B\",i[61]=\"%3D\",i[32]=\"%20\",i);function m(t,e,r){for(var n=void 0,o=-1,i=0;i<t.length;i++){var a=t.charCodeAt(i);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||45===a||46===a||95===a||126===a||e&&47===a||r&&91===a||r&&93===a||r&&58===a)-1!==o&&(n+=encodeURIComponent(t.substring(o,i)),o=-1),void 0!==n&&(n+=t.charAt(i));else{void 0===n&&(n=t.substr(0,i));var h=y[a];void 0!==h?(-1!==o&&(n+=encodeURIComponent(t.substring(o,i)),o=-1),n+=h):-1===o&&(o=i)}}return-1!==o&&(n+=encodeURIComponent(t.substring(o))),void 0!==n?n:t}function b(t){for(var e=void 0,r=0;r<t.length;r++){var n=t.charCodeAt(r);35===n||63===n?(void 0===e&&(e=t.substr(0,r)),e+=y[n]):void 0!==e&&(e+=t[r])}return void 0!==e?e:t}function C(e,r){var n;return n=e.authority&&e.path.length>1&&\"file\"===e.scheme?\"//\".concat(e.authority).concat(e.path):47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?r?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,t&&(n=n.replace(/\\//g,\"\\\\\")),n}function A(t,e){var r=e?b:m,n=\"\",o=t.scheme,i=t.authority,a=t.path,h=t.query,s=t.fragment;if(o&&(n+=o,n+=\":\"),(i||\"file\"===o)&&(n+=l,n+=l),i){var c=i.indexOf(\"@\");if(-1!==c){var f=i.substr(0,c);i=i.substr(c+1),-1===(c=f.lastIndexOf(\":\"))?n+=r(f,!1,!1):(n+=r(f.substr(0,c),!1,!1),n+=\":\",n+=r(f.substr(c+1),!1,!0)),n+=\"@\"}-1===(c=(i=i.toLowerCase()).lastIndexOf(\":\"))?n+=r(i,!1,!0):(n+=r(i.substr(0,c),!1,!0),n+=i.substr(c))}if(a){if(a.length>=3&&47===a.charCodeAt(0)&&58===a.charCodeAt(2))(u=a.charCodeAt(1))>=65&&u<=90&&(a=\"/\".concat(String.fromCharCode(u+32),\":\").concat(a.substr(3)));else if(a.length>=2&&58===a.charCodeAt(1)){var u;(u=a.charCodeAt(0))>=65&&u<=90&&(a=\"\".concat(String.fromCharCode(u+32),\":\").concat(a.substr(2)))}n+=r(a,!0,!1)}return h&&(n+=\"?\",n+=r(h,!1,!1)),s&&(n+=\"#\",n+=e?s:m(s,!1,!1)),n}function w(t){try{return decodeURIComponent(t)}catch(e){return t.length>3?t.substr(0,3)+w(t.substr(3)):t}}var x=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function _(t){return t.match(x)?t.replace(x,(function(t){return w(t)})):t}var O,P=r(470),j=function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},I=P.posix||P,U=\"/\";!function(t){t.joinPath=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return t.with({path:I.join.apply(I,j([t.path],e,!1))})},t.resolvePath=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=t.path,o=!1;n[0]!==U&&(n=U+n,o=!0);var i=I.resolve.apply(I,j([n],e,!1));return o&&i[0]===U&&!t.authority&&(i=i.substring(1)),t.with({path:i})},t.dirname=function(t){if(0===t.path.length||t.path===U)return t;var e=I.dirname(t.path);return 1===e.length&&46===e.charCodeAt(0)&&(e=\"\"),t.with({path:e})},t.basename=function(t){return I.basename(t.path)},t.extname=function(t){return I.extname(t.path)}}(O||(O={}))})(),LIB=n})();export const{URI,Utils}=LIB;\n//# sourceMappingURL=index.js.map","module.exports = require(\"child_process\");","module.exports = require(\"crypto\");","module.exports = require(\"fs\");","module.exports = require(\"net\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"url\");","module.exports = require(\"util\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n\r\nimport * as path from 'path';\r\nimport { EOL } from 'os';\r\n\r\nimport {\r\n\tcreateConnection, Connection, ResponseError, RequestType, NotificationType, RequestHandler, NotificationHandler, Diagnostic, Range, CancellationToken,\r\n\tTextDocuments, TextDocumentSyncKind, TextEdit, Command, WorkspaceChange, CodeActionRequest, VersionedTextDocumentIdentifier, ExecuteCommandRequest,\r\n\tDidChangeWatchedFilesNotification, DidChangeConfigurationNotification, DidChangeWorkspaceFoldersNotification, CodeAction, CodeActionKind, Position,\r\n\tDocumentFormattingRequest, TextDocumentEdit, LSPErrorCodes, Message as LMessage, ResponseMessage as LResponseMessage, uinteger, ServerCapabilities,\r\n\tNotebookDocuments, ProposedFeatures, ClientCapabilities\r\n} from 'vscode-languageserver/node';\r\n\r\nimport { TextDocument } from 'vscode-languageserver-textdocument';\r\nimport { URI } from 'vscode-uri';\r\n\r\nimport {\r\n\tExitCalled, OpenESLintDocRequest, Status, StatusNotification\r\n} from './shared/customMessages';\r\n\r\nimport { Validate, CodeActionsOnSaveMode } from './shared/settings';\r\n\r\nimport {\r\n\tCodeActions, ConfigData, ESLint, FixableProblem, Fixes, Problem, RuleMetaData, RuleSeverities,\r\n\tSaveRuleConfigs, SuggestionsProblem, TextDocumentSettings,\r\n} from './eslint';\r\n\r\nimport { getFileSystemPath, getUri, isUNC } from './paths';\r\nimport { stringDiff } from './diff';\r\nimport LanguageDefaults from './languageDefaults';\r\n\r\n// The connection to use. Code action requests get removed from the queue if\r\n// canceled.\r\nconst connection: ProposedFeatures.Connection = createConnection(ProposedFeatures.all, {\r\n\tcancelUndispatched: (message: LMessage) => {\r\n\t\t// Code actions can safely be cancel on request.\r\n\t\tif (LMessage.isRequest(message) && message.method === 'textDocument/codeAction') {\r\n\t\t\tconst response: LResponseMessage = {\r\n\t\t\t\tjsonrpc: message.jsonrpc,\r\n\t\t\t\tid: message.id,\r\n\t\t\t\tresult: null\r\n\t\t\t};\r\n\t\t\treturn response;\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n});\r\n\r\n// Set when handling the initialize request.\r\nlet clientCapabilities: ClientCapabilities;\r\n\r\nconst documents: TextDocuments<TextDocument> = new TextDocuments(TextDocument);\r\n// The notebooks manager is using the normal document manager for the cell documents.\r\n// So all validating will work out of the box since normal document events will fire.\r\nconst notebooks = new NotebookDocuments(documents);\r\n\r\n// This makes loading work in a plain NodeJS and a WebPacked environment\r\ndeclare const __webpack_require__: typeof require;\r\ndeclare const __non_webpack_require__: typeof require;\r\nfunction loadNodeModule<T>(moduleName: string): T | undefined {\r\n\tconst r = typeof __webpack_require__ === 'function' ? __non_webpack_require__ : require;\r\n\ttry {\r\n\t\treturn r(moduleName);\r\n\t} catch (err: any) {\r\n\t\tif (err.stack) {\r\n\t\t\tconnection.console.error(err.stack.toString());\r\n\t\t}\r\n\t}\r\n\treturn undefined;\r\n}\r\n\r\n// Some plugins call exit which will terminate the server.\r\n// To not loose the information we sent such a behavior\r\n// to the client.\r\nconst nodeExit = process.exit;\r\nprocess.exit = ((code?: number): void => {\r\n\tconst stack = new Error('stack');\r\n\tvoid connection.sendNotification(ExitCalled.type, [code ? code : 0, stack.stack]);\r\n\tsetTimeout(() => {\r\n\t\tnodeExit(code);\r\n\t}, 1000);\r\n}) as any;\r\n\r\n// Handling of uncaught exceptions hitting the event loop.\r\nprocess.on('uncaughtException', (error: any) => {\r\n\tlet message: string | undefined;\r\n\tif (error) {\r\n\t\tif (typeof error.stack === 'string') {\r\n\t\t\tmessage = error.stack;\r\n\t\t} else if (typeof error.message === 'string') {\r\n\t\t\tmessage = error.message;\r\n\t\t} else if (typeof error === 'string') {\r\n\t\t\tmessage = error;\r\n\t\t}\r\n\t\tif (message === undefined || message.length === 0) {\r\n\t\t\ttry {\r\n\t\t\t\tmessage = JSON.stringify(error, undefined, 4);\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// Should not happen.\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t// eslint-disable-next-line no-console\r\n\tconsole.error('Uncaught exception received.');\r\n\tif (message) {\r\n\t\t// eslint-disable-next-line no-console\r\n\t\tconsole.error(message);\r\n\t}\r\n});\r\n\r\n/**\r\n * Infers a file path for a given URI / TextDocument. If the document is a notebook\r\n * cell document it uses the file path from the notebook with a corresponding\r\n * extension (e.g. TypeScript -> ts)\r\n */\r\nfunction inferFilePath(documentOrUri: string | TextDocument | URI | undefined): string | undefined {\r\n\tif (!documentOrUri) {\r\n\t\treturn undefined;\r\n\t}\r\n\tconst uri = getUri(documentOrUri);\r\n\tif (uri.scheme === 'file') {\r\n\t\treturn getFileSystemPath(uri);\r\n\t}\r\n\r\n\tconst notebookDocument = notebooks.findNotebookDocumentForCell(uri.toString());\r\n\tif (notebookDocument !== undefined ) {\r\n\t\tconst notebookUri = URI.parse(notebookDocument.uri);\r\n\t\tif (notebookUri.scheme === 'file') {\r\n\t\t\tconst filePath = getFileSystemPath(uri);\r\n\t\t\tif (filePath !== undefined) {\r\n\t\t\t\tconst textDocument = documents.get(uri.toString());\r\n\t\t\t\tif (textDocument !== undefined) {\r\n\t\t\t\t\tconst extension = LanguageDefaults.getExtension(textDocument.languageId);\r\n\t\t\t\t\tif (extension !== undefined) {\r\n\t\t\t\t\t\tconst extname = path.extname(filePath);\r\n\t\t\t\t\t\tif (extname.length === 0 && filePath[0] === '.') {\r\n\t\t\t\t\t\t\treturn `${filePath}.${extension}`;\r\n\t\t\t\t\t\t} else if (extname.length > 0 && extname !== extension) {\r\n\t\t\t\t\t\t\treturn `${filePath.substring(0, filePath.length - extname.length)}.${extension}`;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn undefined;\r\n}\r\n\r\nESLint.initialize(connection, documents, inferFilePath, loadNodeModule);\r\nSaveRuleConfigs.inferFilePath = inferFilePath;\r\n\r\n/**\r\n * Special message queue implementation to be able to invalidate requests.\r\n * No necessary anymore when using diagnostic pull mode\r\n */\r\n\r\ninterface Request<P, R> {\r\n\tmethod: string;\r\n\tparams: P;\r\n\tdocumentVersion: number | undefined;\r\n\tresolve: (value: R | Promise<R>) => void | undefined;\r\n\treject: (error: any) => void | undefined;\r\n\ttoken: CancellationToken;\r\n}\r\n\r\nnamespace Request {\r\n\texport function is(value: any): value is Request<any, any> {\r\n\t\tconst candidate: Request<any, any> = value;\r\n\t\treturn candidate && candidate.token !== undefined && candidate.resolve !== undefined && candidate.reject !== undefined;\r\n\t}\r\n}\r\n\r\ninterface Notification<P> {\r\n\tmethod: string;\r\n\tparams: P;\r\n\tdocumentVersion: number | undefined;\r\n}\r\n\r\ntype Message<P, R> = Notification<P> | Request<P, R>;\r\n\r\ninterface VersionProvider<P> {\r\n\t(params: P): number | undefined;\r\n}\r\n\r\nnamespace Thenable {\r\n\texport function is<T>(value: any): value is Thenable<T> {\r\n\t\tconst candidate: Thenable<T> = value;\r\n\t\treturn candidate && typeof candidate.then === 'function';\r\n\t}\r\n}\r\n\r\nclass BufferedMessageQueue {\r\n\r\n\tprivate queue: Message<any, any>[];\r\n\tprivate requestHandlers: Map<string, { handler: RequestHandler<any, any, any>, versionProvider?: VersionProvider<any> }>;\r\n\tprivate notificationHandlers: Map<string, { handler: NotificationHandler<any>, versionProvider?: VersionProvider<any> }>;\r\n\tprivate timer: NodeJS.Immediate | undefined;\r\n\r\n\tconstructor(private connection: Connection) {\r\n\t\tthis.queue = [];\r\n\t\tthis.requestHandlers = new Map();\r\n\t\tthis.notificationHandlers = new Map();\r\n\t}\r\n\r\n\tpublic registerRequest<P, R, E>(type: RequestType<P, R, E>, handler: RequestHandler<P, R, E>, versionProvider?: VersionProvider<P>): void {\r\n\t\tthis.connection.onRequest(type, (params, token) => {\r\n\t\t\treturn new Promise<R>((resolve, reject) => {\r\n\t\t\t\tthis.queue.push({\r\n\t\t\t\t\tmethod: type.method,\r\n\t\t\t\t\tparams: params,\r\n\t\t\t\t\tdocumentVersion: versionProvider ? versionProvider(params) : undefined,\r\n\t\t\t\t\tresolve: resolve,\r\n\t\t\t\t\treject: reject,\r\n\t\t\t\t\ttoken: token\r\n\t\t\t\t});\r\n\t\t\t\tthis.trigger();\r\n\t\t\t});\r\n\t\t});\r\n\t\tthis.requestHandlers.set(type.method, { handler, versionProvider });\r\n\t}\r\n\r\n\tpublic registerNotification<P>(type: NotificationType<P>, handler: NotificationHandler<P>, versionProvider?: (params: P) => number): void {\r\n\t\tconnection.onNotification(type, (params) => {\r\n\t\t\tthis.queue.push({\r\n\t\t\t\tmethod: type.method,\r\n\t\t\t\tparams: params,\r\n\t\t\t\tdocumentVersion: versionProvider ? versionProvider(params) : undefined,\r\n\t\t\t});\r\n\t\t\tthis.trigger();\r\n\t\t});\r\n\t\tthis.notificationHandlers.set(type.method, { handler, versionProvider });\r\n\t}\r\n\r\n\tpublic addNotificationMessage<P>(type: NotificationType<P>, params: P, version: number) {\r\n\t\tthis.queue.push({\r\n\t\t\tmethod: type.method,\r\n\t\t\tparams,\r\n\t\t\tdocumentVersion: version\r\n\t\t});\r\n\t\tthis.trigger();\r\n\t}\r\n\r\n\tpublic onNotification<P>(type: NotificationType<P>, handler: NotificationHandler<P>, versionProvider?: (params: P) => number): void {\r\n\t\tthis.notificationHandlers.set(type.method, { handler, versionProvider });\r\n\t}\r\n\r\n\tprivate trigger(): void {\r\n\t\tif (this.timer || this.queue.length === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.timer = setImmediate(() => {\r\n\t\t\tthis.timer = undefined;\r\n\t\t\tthis.processQueue();\r\n\t\t\tthis.trigger();\r\n\t\t});\r\n\t}\r\n\r\n\tprivate processQueue(): void {\r\n\t\tconst message = this.queue.shift();\r\n\t\tif (!message) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (Request.is(message)) {\r\n\t\t\tconst requestMessage = message;\r\n\t\t\tif (requestMessage.token.isCancellationRequested) {\r\n\t\t\t\trequestMessage.reject(new ResponseError(LSPErrorCodes.RequestCancelled, 'Request got cancelled'));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst elem = this.requestHandlers.get(requestMessage.method);\r\n\t\t\tif (elem === undefined) {\r\n\t\t\t\tthrow new Error(`No handler registered`);\r\n\t\t\t}\r\n\t\t\tif (elem.versionProvider && requestMessage.documentVersion !== undefined && requestMessage.documentVersion !== elem.versionProvider(requestMessage.params)) {\r\n\t\t\t\trequestMessage.reject(new ResponseError(LSPErrorCodes.RequestCancelled, 'Request got cancelled'));\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst result = elem.handler(requestMessage.params, requestMessage.token);\r\n\t\t\tif (Thenable.is(result)) {\r\n\t\t\t\tresult.then((value) => {\r\n\t\t\t\t\trequestMessage.resolve(value);\r\n\t\t\t\t}, (error) => {\r\n\t\t\t\t\trequestMessage.reject(error);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\trequestMessage.resolve(result);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconst notificationMessage = message;\r\n\t\t\tconst elem = this.notificationHandlers.get(notificationMessage.method);\r\n\t\t\tif (elem === undefined) {\r\n\t\t\t\tthrow new Error(`No handler registered`);\r\n\t\t\t}\r\n\t\t\tif (elem.versionProvider && notificationMessage.documentVersion !== undefined && notificationMessage.documentVersion !== elem.versionProvider(notificationMessage.params)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telem.handler(notificationMessage.params);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nnamespace ValidateNotification {\r\n\texport const type: NotificationType<TextDocument> = new NotificationType<TextDocument>('eslint/validate');\r\n}\r\nconst messageQueue: BufferedMessageQueue = new BufferedMessageQueue(connection);\r\n\r\nmessageQueue.onNotification(ValidateNotification.type, (document) => {\r\n\tvoid validateSingle(document, true);\r\n}, (document): number => {\r\n\treturn document.version;\r\n});\r\n\r\ndocuments.onDidOpen(async (event) => {\r\n\tconst document = event.document;\r\n\tconst settings = await ESLint.resolveSettings(document);\r\n\tif (settings.validate !== Validate.on || !TextDocumentSettings.hasLibrary(settings)) {\r\n\t\treturn;\r\n\t}\r\n\tif (settings.run === 'onSave') {\r\n\t\tmessageQueue.addNotificationMessage(ValidateNotification.type, document, document.version);\r\n\t}\r\n});\r\n\r\n// A text document has changed. Validate the document according the run setting.\r\ndocuments.onDidChangeContent(async (event) => {\r\n\tconst document = event.document;\r\n\tconst uri = document.uri;\r\n\tCodeActions.remove(uri);\r\n\tconst settings = await ESLint.resolveSettings(document);\r\n\r\n\tif (settings.validate !== Validate.on || settings.run !== 'onType') {\r\n\t\treturn;\r\n\t}\r\n\tmessageQueue.addNotificationMessage(ValidateNotification.type, document, document.version);\r\n});\r\n\r\n// A text document has been saved. Validate the document according the run setting.\r\ndocuments.onDidSave(async (event) => {\r\n\tconst document = event.document;\r\n\tconst settings = await ESLint.resolveSettings(document);\r\n\r\n\tif (settings.validate !== Validate.on || settings.run !== 'onSave') {\r\n\t\treturn;\r\n\t}\r\n\tmessageQueue.addNotificationMessage(ValidateNotification.type, document, document.version);\r\n});\r\n\r\ndocuments.onDidClose(async (event) => {\r\n\tconst document = event.document;\r\n\tconst settings = await ESLint.resolveSettings(document);\r\n\r\n\tconst uri = document.uri;\r\n\tESLint.removeSettings(uri);\r\n\tSaveRuleConfigs.remove(uri);\r\n\tCodeActions.remove(uri);\r\n\tESLint.unregisterAsFormatter(document);\r\n\tif (settings.validate === Validate.on) {\r\n\t\tvoid connection.sendDiagnostics({ uri: uri, diagnostics: [] });\r\n\t}\r\n});\r\n\r\nfunction environmentChanged() {\r\n\tESLint.clearSettings();\r\n\tRuleSeverities.clear();\r\n\tSaveRuleConfigs.clear();\r\n\tESLint.clearFormatters();\r\n\r\n\tfor (const document of documents.all()) {\r\n\t\tmessageQueue.addNotificationMessage(ValidateNotification.type, document, document.version);\r\n\t}\r\n}\r\n\r\nnamespace CommandIds {\r\n\texport const applySingleFix: string = 'eslint.applySingleFix';\r\n\texport const applySuggestion: string = 'eslint.applySuggestion';\r\n\texport const applySameFixes: string = 'eslint.applySameFixes';\r\n\texport const applyAllFixes: string = 'eslint.applyAllFixes';\r\n\texport const applyDisableLine: string = 'eslint.applyDisableLine';\r\n\texport const applyDisableFile: string = 'eslint.applyDisableFile';\r\n\texport const openRuleDoc: string = 'eslint.openRuleDoc';\r\n}\r\n\r\nconnection.onInitialize((params, _cancel, progress) => {\r\n\tprogress.begin('Initializing ESLint Server');\r\n\tconst syncKind: TextDocumentSyncKind = TextDocumentSyncKind.Incremental;\r\n\tclientCapabilities = params.capabilities;\r\n\tprogress.done();\r\n\tconst capabilities: ServerCapabilities = {\r\n\t\ttextDocumentSync: {\r\n\t\t\topenClose: true,\r\n\t\t\tchange: syncKind,\r\n\t\t\twillSaveWaitUntil: false,\r\n\t\t\tsave: {\r\n\t\t\t\tincludeText: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tworkspace: {\r\n\t\t\tworkspaceFolders: {\r\n\t\t\t\tsupported: true\r\n\t\t\t}\r\n\t\t},\r\n\t\texecuteCommandProvider: {\r\n\t\t\tcommands: [\r\n\t\t\t\tCommandIds.applySingleFix,\r\n\t\t\t\tCommandIds.applySuggestion,\r\n\t\t\t\tCommandIds.applySameFixes,\r\n\t\t\t\tCommandIds.applyAllFixes,\r\n\t\t\t\tCommandIds.applyDisableLine,\r\n\t\t\t\tCommandIds.applyDisableFile,\r\n\t\t\t\tCommandIds.openRuleDoc,\r\n\t\t\t]\r\n\t\t}\r\n\t};\r\n\r\n\tif (clientCapabilities.textDocument?.codeAction?.codeActionLiteralSupport?.codeActionKind.valueSet !== undefined) {\r\n\t\tcapabilities.codeActionProvider = {\r\n\t\t\tcodeActionKinds: [CodeActionKind.QuickFix, `${CodeActionKind.SourceFixAll}.eslint`]\r\n\t\t};\r\n\t}\r\n\r\n\treturn { capabilities };\r\n});\r\n\r\nconnection.onInitialized(() => {\r\n\tif (clientCapabilities.workspace?.didChangeConfiguration?.dynamicRegistration === true) {\r\n\t\tvoid connection.client.register(DidChangeConfigurationNotification.type, undefined);\r\n\t}\r\n\r\n\tvoid connection.client.register(DidChangeWorkspaceFoldersNotification.type, undefined);\r\n});\r\n\r\nmessageQueue.registerNotification(DidChangeConfigurationNotification.type, (_params) => {\r\n\tenvironmentChanged();\r\n});\r\n\r\nmessageQueue.registerNotification(DidChangeWorkspaceFoldersNotification.type, (_params) => {\r\n\tenvironmentChanged();\r\n});\r\n\r\nasync function validateSingle(document: TextDocument, publishDiagnostics: boolean = true): Promise<void> {\r\n\t// We validate document in a queue but open / close documents directly. So we need to deal with the\r\n\t// fact that a document might be gone from the server.\r\n\tif (!documents.get(document.uri)) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst settings = await ESLint.resolveSettings(document);\r\n\tif (settings.validate !== Validate.on || !TextDocumentSettings.hasLibrary(settings)) {\r\n\t\treturn;\r\n\t}\r\n\ttry {\r\n\t\tconst start = Date.now();\r\n\t\tconst diagnostics = await ESLint.validate(document, settings);\r\n\t\tif (publishDiagnostics) {\r\n\t\t\tvoid connection.sendDiagnostics({ uri: document.uri, diagnostics });\r\n\t\t}\r\n\t\tconst timeTaken = Date.now() - start;\r\n\t\tvoid connection.sendNotification(StatusNotification.type, { uri: document.uri, state: Status.ok, validationTime: timeTaken });\r\n\t} catch (err) {\r\n\t\t// if an exception has occurred while validating clear all errors to ensure\r\n\t\t// we are not showing any stale once\r\n\t\tvoid connection.sendDiagnostics({ uri: document.uri, diagnostics: [] });\r\n\t\tif (!settings.silent) {\r\n\t\t\tlet status: Status | undefined = undefined;\r\n\t\t\tfor (const handler of ESLint.ErrorHandlers.single) {\r\n\t\t\t\tstatus = handler(err, document, settings.library);\r\n\t\t\t\tif (status) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstatus = status || Status.error;\r\n\t\t\tvoid connection.sendNotification(StatusNotification.type, { uri: document.uri, state: status });\r\n\t\t} else {\r\n\t\t\tconnection.console.info(ESLint.ErrorHandlers.getMessage(err, document));\r\n\t\t\tvoid connection.sendNotification(StatusNotification.type, { uri: document.uri, state: Status.ok });\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction validateMany(documents: TextDocument[]): void {\r\n\tdocuments.forEach(document => {\r\n\t\tmessageQueue.addNotificationMessage(ValidateNotification.type, document, document.version);\r\n\t});\r\n}\r\n\r\n\r\nmessageQueue.registerNotification(DidChangeWatchedFilesNotification.type, async (params) => {\r\n\t// A .eslintrc has change. No smartness here.\r\n\t// Simply revalidate all file.\r\n\tRuleMetaData.clear();\r\n\tESLint.ErrorHandlers.clearNoConfigReported();\r\n\tESLint.ErrorHandlers.clearMissingModuleReported();\r\n\tESLint.clearSettings(); // config files can change plugins and parser.\r\n\tRuleSeverities.clear();\r\n\tSaveRuleConfigs.clear();\r\n\r\n\tawait Promise.all(params.changes.map(async (change) => {\r\n\t\tconst fsPath = inferFilePath(change.uri);\r\n\t\tif (fsPath === undefined || fsPath.length === 0 || isUNC(fsPath)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst dirname = path.dirname(fsPath);\r\n\t\tif (dirname) {\r\n\t\t\tconst library = ESLint.ErrorHandlers.getConfigErrorReported(fsPath);\r\n\t\t\tif (library !== undefined) {\r\n\t\t\t\tconst eslintClass = ESLint.newClass(library, {}, false);\r\n\t\t\t\ttry {\r\n\t\t\t\t\tawait eslintClass.lintText('', { filePath: path.join(dirname, '___test___.js') });\r\n\t\t\t\t\tESLint.ErrorHandlers.removeConfigErrorReported(fsPath);\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}));\r\n\tvalidateMany(documents.all());\r\n});\r\n\r\ntype RuleCodeActions = {\r\n\tfixes: CodeAction[];\r\n\tsuggestions: CodeAction[];\r\n\tdisable?: CodeAction;\r\n\tfixAll?: CodeAction;\r\n\tdisableFile?: CodeAction;\r\n\tshowDocumentation?: CodeAction;\r\n};\r\n\r\nclass CodeActionResult {\r\n\tprivate _actions: Map<string, RuleCodeActions>;\r\n\tprivate _fixAll: CodeAction[] | undefined;\r\n\r\n\tpublic constructor() {\r\n\t\tthis._actions = new Map();\r\n\t}\r\n\r\n\tpublic get(ruleId: string): RuleCodeActions {\r\n\t\tlet result: RuleCodeActions | undefined = this._actions.get(ruleId);\r\n\t\tif (result === undefined) {\r\n\t\t\tresult = { fixes: [], suggestions: [] };\r\n\t\t\tthis._actions.set(ruleId, result);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic get fixAll() {\r\n\t\tif (this._fixAll === undefined) {\r\n\t\t\tthis._fixAll = [];\r\n\t\t}\r\n\t\treturn this._fixAll;\r\n\t}\r\n\r\n\tpublic all(): CodeAction[] {\r\n\t\tconst result: CodeAction[] = [];\r\n\t\tfor (const actions of this._actions.values()) {\r\n\t\t\tresult.push(...actions.fixes);\r\n\t\t\tresult.push(...actions.suggestions);\r\n\t\t\tif (actions.disable) {\r\n\t\t\t\tresult.push(actions.disable);\r\n\t\t\t}\r\n\t\t\tif (actions.fixAll) {\r\n\t\t\t\tresult.push(actions.fixAll);\r\n\t\t\t}\r\n\t\t\tif (actions.disableFile) {\r\n\t\t\t\tresult.push(actions.disableFile);\r\n\t\t\t}\r\n\t\t\tif (actions.showDocumentation) {\r\n\t\t\t\tresult.push(actions.showDocumentation);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._fixAll !== undefined) {\r\n\t\t\tresult.push(...this._fixAll);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic get length(): number {\r\n\t\tlet result: number = 0;\r\n\t\tfor (const actions of this._actions.values()) {\r\n\t\t\tresult += actions.fixes.length;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n}\r\n\r\nclass Changes {\r\n\r\n\tprivate readonly values: Map<string, WorkspaceChange>;\r\n\tprivate uri: string | undefined;\r\n\tprivate version: number | undefined;\r\n\r\n\tconstructor() {\r\n\t\tthis.values = new Map();\r\n\t\tthis.uri = undefined;\r\n\t\tthis.version = undefined;\r\n\t}\r\n\r\n\tpublic clear(textDocument?: TextDocument): void {\r\n\t\tif (textDocument === undefined) {\r\n\t\t\tthis.uri = undefined;\r\n\t\t\tthis.version = undefined;\r\n\t\t} else {\r\n\t\t\tthis.uri = textDocument.uri;\r\n\t\t\tthis.version = textDocument.version;\r\n\t\t}\r\n\t\tthis.values.clear();\r\n\t}\r\n\r\n\tpublic isUsable(uri: string, version: number): boolean {\r\n\t\treturn this.uri === uri && this.version === version;\r\n\t}\r\n\r\n\tpublic set(key: string, change: WorkspaceChange): void {\r\n\t\tthis.values.set(key, change);\r\n\t}\r\n\r\n\tpublic get(key: string): WorkspaceChange | undefined {\r\n\t\treturn this.values.get(key);\r\n\t}\r\n}\r\n\r\ninterface CommandParams extends VersionedTextDocumentIdentifier {\r\n\tversion: number;\r\n\truleId?: string;\r\n\tsequence?: number;\r\n}\r\n\r\nnamespace CommandParams {\r\n\texport function create(textDocument: TextDocument, ruleId?: string, sequence?: number): CommandParams {\r\n\t\treturn { uri: textDocument.uri, version: textDocument.version, ruleId, sequence };\r\n\t}\r\n\texport function hasRuleId(value: CommandParams): value is CommandParams & { ruleId: string } {\r\n\t\treturn value.ruleId !== undefined;\r\n\t}\r\n}\r\n\r\nconst changes = new Changes();\r\nconst ESLintSourceFixAll: string = `${CodeActionKind.SourceFixAll}.eslint`;\r\n\r\nmessageQueue.registerRequest(CodeActionRequest.type, async (params) => {\r\n\tconst result: CodeActionResult = new CodeActionResult();\r\n\tconst uri = params.textDocument.uri;\r\n\tconst textDocument = documents.get(uri);\r\n\tif (textDocument === undefined) {\r\n\t\tchanges.clear(textDocument);\r\n\t\treturn result.all();\r\n\t}\r\n\r\n\tfunction createCodeAction(title: string, kind: string, commandId: string, arg: CommandParams, diagnostic?: Diagnostic): CodeAction {\r\n\t\tconst command = Command.create(title, commandId, arg);\r\n\t\tconst action = CodeAction.create(\r\n\t\t\ttitle,\r\n\t\t\tcommand,\r\n\t\t\tkind\r\n\t\t);\r\n\t\tif (diagnostic !== undefined) {\r\n\t\t\taction.diagnostics = [diagnostic];\r\n\t\t}\r\n\t\treturn action;\r\n\t}\r\n\r\n\tfunction getDisableRuleEditInsertionIndex(line: string, commentTags: string | [string, string]): number {\r\n\t\tlet charIndex = line.indexOf('--');\r\n\r\n\t\tif (charIndex < 0) {\r\n\t\t\tif (typeof commentTags === 'string') {\r\n\t\t\t\treturn line.length;\r\n\t\t\t} else { // commentTags is an array containing the block comment closing and opening tags\r\n\t\t\t\tcharIndex = line.indexOf(commentTags[1]);\r\n\t\t\t\twhile (charIndex > 0 && line[charIndex - 1] === ' ') {\r\n\t\t\t\t\tcharIndex--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\twhile (charIndex > 1 && line[charIndex - 1] === ' ') {\r\n\t\t\t\tcharIndex--;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn charIndex;\r\n\t}\r\n\r\n\t/**\r\n\t * Prefix characters with special meaning in comment markers with a backslash\r\n\t * See also: https://github.com/microsoft/vscode-eslint/issues/1610\r\n\t */\r\n\tfunction escapeStringRegexp(value: string) {\r\n\t\treturn value.replace(/[|{}\\\\()[\\]^$+*?.]/g, '\\\\$&');\r\n\t}\r\n\r\n\tfunction createDisableLineTextEdit(textDocument: TextDocument, editInfo: Problem, indentationText: string): TextEdit {\r\n\t\tconst lineComment = LanguageDefaults.getLineComment(textDocument.languageId);\r\n\t\tconst blockComment = LanguageDefaults.getBlockComment(textDocument.languageId);\r\n\r\n\t\t// If the concerned line is not the first line of the file\r\n\t\tif (editInfo.line - 1 > 0) {\r\n\t\t\t// Check previous line if there is a eslint-disable-next-line comment already present.\r\n\t\t\tconst prevLine = textDocument.getText(Range.create(Position.create(editInfo.line - 2, 0), Position.create(editInfo.line - 2, uinteger.MAX_VALUE)));\r\n\r\n\t\t\t// For consistency, we ignore the settings here and use the comment style from that\r\n\t\t\t// specific line.\r\n\t\t\tconst matchedLineDisable = new RegExp(`${escapeStringRegexp(lineComment)} eslint-disable-next-line`).test(prevLine);\r\n\t\t\tif (matchedLineDisable) {\r\n\t\t\t\tconst insertionIndex = getDisableRuleEditInsertionIndex(prevLine, lineComment);\r\n\t\t\t\treturn TextEdit.insert(Position.create(editInfo.line - 2, insertionIndex), `, ${editInfo.ruleId}`);\r\n\t\t\t}\r\n\r\n\t\t\tconst matchedBlockDisable = new RegExp(`${escapeStringRegexp(blockComment[0])} eslint-disable-next-line`).test(prevLine);\r\n\t\t\tif (matchedBlockDisable) {\r\n\t\t\t\tconst insertionIndex = getDisableRuleEditInsertionIndex(prevLine, blockComment);\r\n\t\t\t\treturn TextEdit.insert(Position.create(editInfo.line - 2, insertionIndex), `, ${editInfo.ruleId}`);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// We're creating a new disabling comment. Use the comment style given in settings.\r\n\t\tconst commentStyle = settings.codeAction.disableRuleComment.commentStyle;\r\n\t\tlet disableRuleContent: string;\r\n\t\tif (commentStyle === 'block') {\r\n\t\t\tdisableRuleContent = `${indentationText}${blockComment[0]} eslint-disable-next-line ${editInfo.ruleId} ${blockComment[1]}${EOL}`;\r\n\t\t} else { // commentStyle === 'line'\r\n\t\t\tdisableRuleContent = `${indentationText}${lineComment} eslint-disable-next-line ${editInfo.ruleId}${EOL}`;\r\n\t\t}\r\n\r\n\t\treturn TextEdit.insert(Position.create(editInfo.line - 1, 0), disableRuleContent);\r\n\t}\r\n\r\n\tfunction createDisableSameLineTextEdit(textDocument: TextDocument, editInfo: Problem): TextEdit {\r\n\t\tconst lineComment = LanguageDefaults.getLineComment(textDocument.languageId);\r\n\t\tconst blockComment = LanguageDefaults.getBlockComment(textDocument.languageId);\r\n\t\tconst currentLine = textDocument.getText(Range.create(Position.create(editInfo.line - 1, 0), Position.create(editInfo.line - 1, uinteger.MAX_VALUE)));\r\n\t\tlet disableRuleContent: string;\r\n\t\tlet insertionIndex: number;\r\n\r\n\t\t// Check if there's already a disabling comment. If so, we ignore the settings here\r\n\t\t// and use the comment style from that specific line.\r\n\t\tconst matchedLineDisable = new RegExp(`${lineComment} eslint-disable-line`).test(currentLine);\r\n\t\tconst matchedBlockDisable = new RegExp(`${blockComment[0]} eslint-disable-line`).test(currentLine);\r\n\t\tif (matchedLineDisable) {\r\n\t\t\tdisableRuleContent = `, ${editInfo.ruleId}`;\r\n\t\t\tinsertionIndex = getDisableRuleEditInsertionIndex(currentLine, lineComment);\r\n\t\t} else if (matchedBlockDisable) {\r\n\t\t\tdisableRuleContent = `, ${editInfo.ruleId}`;\r\n\t\t\tinsertionIndex = getDisableRuleEditInsertionIndex(currentLine, blockComment);\r\n\t\t} else {\r\n\t\t\t// We're creating a new disabling comment.\r\n\t\t\tconst commentStyle = settings.codeAction.disableRuleComment.commentStyle;\r\n\t\t\tdisableRuleContent = commentStyle === 'line' ? ` ${lineComment} eslint-disable-line ${editInfo.ruleId}` : ` ${blockComment[0]} eslint-disable-line ${editInfo.ruleId} ${blockComment[1]}`;\r\n\t\t\tinsertionIndex = uinteger.MAX_VALUE;\r\n\t\t}\r\n\r\n\t\treturn TextEdit.insert(Position.create(editInfo.line - 1, insertionIndex), disableRuleContent);\r\n\t}\r\n\r\n\tfunction createDisableFileTextEdit(textDocument: TextDocument, editInfo: Problem): TextEdit {\r\n\t\t// If first line contains a shebang, insert on the next line instead.\r\n\t\tconst shebang = textDocument.getText(Range.create(Position.create(0, 0), Position.create(0, 2)));\r\n\t\tconst line = shebang === '#!' ? 1 : 0;\r\n\t\tconst block = LanguageDefaults.getBlockComment(textDocument.languageId);\r\n\t\treturn TextEdit.insert(Position.create(line, 0), `${block[0]} eslint-disable ${editInfo.ruleId} ${block[1]}${EOL}`);\r\n\t}\r\n\r\n\tfunction getLastEdit(array: FixableProblem[]): FixableProblem | undefined {\r\n\t\tconst length = array.length;\r\n\t\tif (length === 0) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\treturn array[length - 1];\r\n\t}\r\n\r\n\tconst settings = await ESLint.resolveSettings(textDocument);\r\n\r\n\t// The file is not validated at all or we couldn't load an eslint library for it.\r\n\tif (settings.validate !== Validate.on || !TextDocumentSettings.hasLibrary(settings)) {\r\n\t\treturn result.all();\r\n\t}\r\n\r\n\tconst problems = CodeActions.get(uri);\r\n\t// We validate on type and have no problems ==> nothing to fix.\r\n\tif (problems === undefined && settings.run === 'onType') {\r\n\t\treturn result.all();\r\n\t}\r\n\r\n\tconst only: string | undefined = params.context.only !== undefined && params.context.only.length > 0 ? params.context.only[0] : undefined;\r\n\tconst isSource = only === CodeActionKind.Source;\r\n\tconst isSourceFixAll = (only === ESLintSourceFixAll || only === CodeActionKind.SourceFixAll);\r\n\tif (isSourceFixAll || isSource) {\r\n\t\tif (isSourceFixAll) {\r\n\t\t\tconst textDocumentIdentifier: VersionedTextDocumentIdentifier = { uri: textDocument.uri, version: textDocument.version };\r\n\t\t\tconst edits = await computeAllFixes(textDocumentIdentifier, AllFixesMode.onSave);\r\n\t\t\tif (edits !== undefined) {\r\n\t\t\t\tresult.fixAll.push(CodeAction.create(\r\n\t\t\t\t\t`Fix all fixable ESLint issues`,\r\n\t\t\t\t\t{ documentChanges: [ TextDocumentEdit.create(textDocumentIdentifier, edits )]},\r\n\t\t\t\t\tESLintSourceFixAll\r\n\t\t\t\t));\r\n\t\t\t}\r\n\t\t} else if (isSource) {\r\n\t\t\tresult.fixAll.push(createCodeAction(\r\n\t\t\t\t`Fix all fixable ESLint issues`,\r\n\t\t\t\tCodeActionKind.Source,\r\n\t\t\t\tCommandIds.applyAllFixes,\r\n\t\t\t\tCommandParams.create(textDocument)\r\n\t\t\t));\r\n\t\t}\r\n\t\treturn result.all();\r\n\t}\r\n\r\n\tif (problems === undefined) {\r\n\t\treturn result.all();\r\n\t}\r\n\r\n\tconst fixes = new Fixes(problems);\r\n\tif (fixes.isEmpty()) {\r\n\t\treturn result.all();\r\n\t}\r\n\r\n\tlet documentVersion: number = -1;\r\n\tconst allFixableRuleIds: string[] = [];\r\n\tconst kind: CodeActionKind = only ?? CodeActionKind.QuickFix;\r\n\r\n\tfor (const editInfo of fixes.getScoped(params.context.diagnostics)) {\r\n\t\tdocumentVersion = editInfo.documentVersion;\r\n\t\tconst ruleId = editInfo.ruleId;\r\n\t\tallFixableRuleIds.push(ruleId);\r\n\r\n\t\tif (Problem.isFixable(editInfo)) {\r\n\t\t\tconst workspaceChange = new WorkspaceChange();\r\n\t\t\tworkspaceChange.getTextEditChange({ uri, version: documentVersion }).add(FixableProblem.createTextEdit(textDocument, editInfo));\r\n\t\t\tchanges.set(`${CommandIds.applySingleFix}:${ruleId}`, workspaceChange);\r\n\t\t\tconst action = createCodeAction(\r\n\t\t\t\teditInfo.label,\r\n\t\t\t\tkind,\r\n\t\t\t\tCommandIds.applySingleFix,\r\n\t\t\t\tCommandParams.create(textDocument, ruleId),\r\n\t\t\t\teditInfo.diagnostic\r\n\t\t\t);\r\n\t\t\taction.isPreferred = true;\r\n\t\t\tresult.get(ruleId).fixes.push(action);\r\n\t\t}\r\n\t\tif (Problem.hasSuggestions(editInfo)) {\r\n\t\t\teditInfo.suggestions.forEach((suggestion, suggestionSequence) => {\r\n\t\t\t\tconst workspaceChange = new WorkspaceChange();\r\n\t\t\t\tworkspaceChange.getTextEditChange({ uri, version: documentVersion }).add(SuggestionsProblem.createTextEdit(textDocument, suggestion));\r\n\t\t\t\tchanges.set(`${CommandIds.applySuggestion}:${ruleId}:${suggestionSequence}`, workspaceChange);\r\n\t\t\t\tconst action = createCodeAction(\r\n\t\t\t\t\t`${suggestion.desc} (${editInfo.ruleId})`,\r\n\t\t\t\t\tCodeActionKind.QuickFix,\r\n\t\t\t\t\tCommandIds.applySuggestion,\r\n\t\t\t\t\tCommandParams.create(textDocument, ruleId, suggestionSequence),\r\n\t\t\t\t\teditInfo.diagnostic\r\n\t\t\t\t);\r\n\t\t\t\tresult.get(ruleId).suggestions.push(action);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (settings.codeAction.disableRuleComment.enable && ruleId !== RuleMetaData.unusedDisableDirectiveId) {\r\n\t\t\tlet workspaceChange = new WorkspaceChange();\r\n\t\t\tif (settings.codeAction.disableRuleComment.location === 'sameLine') {\r\n\t\t\t\tworkspaceChange.getTextEditChange({ uri, version: documentVersion }).add(createDisableSameLineTextEdit(textDocument, editInfo));\r\n\t\t\t} else {\r\n\t\t\t\tconst lineText = textDocument.getText(Range.create(Position.create(editInfo.line - 1, 0), Position.create(editInfo.line - 1, uinteger.MAX_VALUE)));\r\n\t\t\t\tconst matches = /^([ \\t]*)/.exec(lineText);\r\n\t\t\t\tconst indentationText = matches !== null && matches.length > 0 ? matches[1] : '';\r\n\t\t\t\tworkspaceChange.getTextEditChange({ uri, version: documentVersion }).add(createDisableLineTextEdit(textDocument, editInfo, indentationText));\r\n\t\t\t}\r\n\t\t\tchanges.set(`${CommandIds.applyDisableLine}:${ruleId}`, workspaceChange);\r\n\t\t\tresult.get(ruleId).disable = createCodeAction(\r\n\t\t\t\t`Disable ${ruleId} for this line`,\r\n\t\t\t\tkind,\r\n\t\t\t\tCommandIds.applyDisableLine,\r\n\t\t\t\tCommandParams.create(textDocument, ruleId)\r\n\t\t\t);\r\n\r\n\t\t\tif (result.get(ruleId).disableFile === undefined) {\r\n\t\t\t\tworkspaceChange = new WorkspaceChange();\r\n\t\t\t\tworkspaceChange.getTextEditChange({ uri, version: documentVersion }).add(createDisableFileTextEdit(textDocument, editInfo));\r\n\t\t\t\tchanges.set(`${CommandIds.applyDisableFile}:${ruleId}`, workspaceChange);\r\n\t\t\t\tresult.get(ruleId).disableFile = createCodeAction(\r\n\t\t\t\t\t`Disable ${ruleId} for the entire file`,\r\n\t\t\t\t\tkind,\r\n\t\t\t\t\tCommandIds.applyDisableFile,\r\n\t\t\t\t\tCommandParams.create(textDocument, ruleId)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (settings.codeAction.showDocumentation.enable && result.get(ruleId).showDocumentation === undefined) {\r\n\t\t\tif (RuleMetaData.hasRuleId(ruleId)) {\r\n\t\t\t\tresult.get(ruleId).showDocumentation = createCodeAction(\r\n\t\t\t\t\t`Show documentation for ${ruleId}`,\r\n\t\t\t\t\tkind,\r\n\t\t\t\t\tCommandIds.openRuleDoc,\r\n\t\t\t\t\tCommandParams.create(textDocument, ruleId)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (result.length > 0) {\r\n\t\tconst sameProblems: Map<string, FixableProblem[]> = new Map<string, FixableProblem[]>(allFixableRuleIds.map<[string, FixableProblem[]]>(s => [s, []]));\r\n\r\n\t\tfor (const editInfo of fixes.getAllSorted()) {\r\n\t\t\tif (documentVersion === -1) {\r\n\t\t\t\tdocumentVersion = editInfo.documentVersion;\r\n\t\t\t}\r\n\t\t\tif (sameProblems.has(editInfo.ruleId)) {\r\n\t\t\t\tconst same = sameProblems.get(editInfo.ruleId)!;\r\n\t\t\t\tif (!Fixes.overlaps(getLastEdit(same), editInfo)) {\r\n\t\t\t\t\tsame.push(editInfo);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tsameProblems.forEach((same, ruleId) => {\r\n\t\t\tif (same.length > 1) {\r\n\t\t\t\tconst sameFixes: WorkspaceChange = new WorkspaceChange();\r\n\t\t\t\tconst sameTextChange = sameFixes.getTextEditChange({ uri, version: documentVersion });\r\n\t\t\t\tsame.map(fix => FixableProblem.createTextEdit(textDocument, fix)).forEach(edit => sameTextChange.add(edit));\r\n\t\t\t\tchanges.set(CommandIds.applySameFixes, sameFixes);\r\n\t\t\t\tresult.get(ruleId).fixAll = createCodeAction(\r\n\t\t\t\t\t`Fix all ${ruleId} problems`,\r\n\t\t\t\t\tkind,\r\n\t\t\t\t\tCommandIds.applySameFixes,\r\n\t\t\t\t\tCommandParams.create(textDocument)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\t\tresult.fixAll.push(createCodeAction(\r\n\t\t\t`Fix all auto-fixable problems`,\r\n\t\t\tkind,\r\n\t\t\tCommandIds.applyAllFixes,\r\n\t\t\tCommandParams.create(textDocument)\r\n\t\t));\r\n\t}\r\n\treturn result.all();\r\n}, (params): number | undefined => {\r\n\tconst document = documents.get(params.textDocument.uri);\r\n\treturn document !== undefined ? document.version : undefined;\r\n});\r\n\r\nenum AllFixesMode {\r\n\tonSave = 'onsave',\r\n\tformat = 'format',\r\n\tcommand = 'command'\r\n}\r\n\r\nasync function computeAllFixes(identifier: VersionedTextDocumentIdentifier, mode: AllFixesMode): Promise<TextEdit[] | undefined> {\r\n\tconst uri = identifier.uri;\r\n\tconst textDocument = documents.get(uri)!;\r\n\tif (textDocument === undefined || identifier.version !== textDocument.version) {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tconst settings = await ESLint.resolveSettings(textDocument);\r\n\r\n\tif (settings.validate !== Validate.on || !TextDocumentSettings.hasLibrary(settings) || (mode === AllFixesMode.format && !settings.format)) {\r\n\t\treturn [];\r\n\t}\r\n\tconst filePath = inferFilePath(textDocument);\r\n\tconst problems = CodeActions.get(uri);\r\n\tconst originalContent = textDocument.getText();\r\n\tlet start = Date.now();\r\n\t// Only use known fixes when running in onSave mode. See https://github.com/microsoft/vscode-eslint/issues/871\r\n\t// for details\r\n\tif (mode === AllFixesMode.onSave && settings.codeActionOnSave.mode === CodeActionsOnSaveMode.problems) {\r\n\t\tconst result = problems !== undefined && problems.size > 0\r\n\t\t\t? new Fixes(problems).getApplicable().map(fix => FixableProblem.createTextEdit(textDocument, fix))\r\n\t\t\t: [];\r\n\t\tconnection.tracer.log(`Computing all fixes took: ${Date.now() - start} ms.`);\r\n\t\treturn result;\r\n\t} else {\r\n\t\tconst saveConfig = filePath !== undefined && mode === AllFixesMode.onSave ? await SaveRuleConfigs.get(uri, settings) : undefined;\r\n\t\tconst offRules = saveConfig?.offRules;\r\n\t\tconst onRules = saveConfig?.onRules;\r\n\t\tlet overrideConfig: Required<ConfigData> | undefined;\r\n\t\tif (offRules !== undefined) {\r\n\t\t\toverrideConfig = { rules: Object.create(null) };\r\n\t\t\tfor (const ruleId of offRules) {\r\n\t\t\t\toverrideConfig.rules[ruleId] = 'off';\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ESLint.withClass(async (eslintClass) => {\r\n\t\t\tconst result: TextEdit[] = [];\r\n\t\t\tlet fixes: TextEdit[] | undefined;\r\n\t\t\tif (problems !== undefined && problems.size > 0) {\r\n\t\t\t\t// We have override rules that turn rules off. Filter the fixes for these rules.\r\n\t\t\t\tif (offRules !== undefined) {\r\n\t\t\t\t\tconst filtered: typeof problems = new Map();\r\n\t\t\t\t\tfor (const [key, problem] of problems) {\r\n\t\t\t\t\t\tif (onRules?.has(problem.ruleId)) {\r\n\t\t\t\t\t\t\tfiltered.set(key, problem);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfixes = filtered.size > 0 ? new Fixes(filtered).getApplicable().map(fix => FixableProblem.createTextEdit(textDocument, fix)) : undefined;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfixes = new Fixes(problems).getApplicable().map(fix => FixableProblem.createTextEdit(textDocument, fix));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst content = fixes !== undefined\r\n\t\t\t\t? TextDocument.applyEdits(textDocument, fixes)\r\n\t\t\t\t: originalContent;\r\n\t\t\tconst reportResults = await eslintClass.lintText(content, { filePath });\r\n\t\t\tconnection.tracer.log(`Computing all fixes took: ${Date.now() - start} ms.`);\r\n\t\t\tif (Array.isArray(reportResults) && reportResults.length === 1 && reportResults[0].output !== undefined) {\r\n\t\t\t\tconst fixedContent = reportResults[0].output;\r\n\t\t\t\tstart = Date.now();\r\n\t\t\t\tconst diffs = stringDiff(originalContent, fixedContent, false);\r\n\t\t\t\tconnection.tracer.log(`Computing minimal edits took: ${Date.now() - start} ms.`);\r\n\t\t\t\tfor (const diff of diffs) {\r\n\t\t\t\t\tresult.push({\r\n\t\t\t\t\t\trange: {\r\n\t\t\t\t\t\t\tstart: textDocument.positionAt(diff.originalStart),\r\n\t\t\t\t\t\t\tend: textDocument.positionAt(diff.originalStart + diff.originalLength)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tnewText: fixedContent.substr(diff.modifiedStart, diff.modifiedLength)\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else if (fixes !== undefined) {\r\n\t\t\t\tresult.push(...fixes);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}, settings, overrideConfig !== undefined ? { fix: true, overrideConfig } : { fix: true });\r\n\t}\r\n}\r\n\r\nmessageQueue.registerRequest(ExecuteCommandRequest.type, async (params) => {\r\n\tlet workspaceChange: WorkspaceChange | undefined;\r\n\tconst commandParams: CommandParams = params.arguments![0] as CommandParams;\r\n\tif (params.command === CommandIds.applyAllFixes) {\r\n\t\tconst edits = await computeAllFixes(commandParams, AllFixesMode.command);\r\n\t\tif (edits !== undefined && edits.length > 0) {\r\n\t\t\tworkspaceChange = new WorkspaceChange();\r\n\t\t\tconst textChange = workspaceChange.getTextEditChange(commandParams);\r\n\t\t\tedits.forEach(edit => textChange.add(edit));\r\n\t\t}\r\n\t} else {\r\n\t\tif ([CommandIds.applySingleFix, CommandIds.applyDisableLine, CommandIds.applyDisableFile].indexOf(params.command) !== -1) {\r\n\t\t\tworkspaceChange = changes.get(`${params.command}:${commandParams.ruleId}`);\r\n\t\t} else if ([CommandIds.applySuggestion].indexOf(params.command) !== -1) {\r\n\t\t\tworkspaceChange = changes.get(`${params.command}:${commandParams.ruleId}:${commandParams.sequence}`);\r\n\t\t} else if (params.command === CommandIds.openRuleDoc && CommandParams.hasRuleId(commandParams)) {\r\n\t\t\tconst url = RuleMetaData.getUrl(commandParams.ruleId);\r\n\t\t\tif (url) {\r\n\t\t\t\tvoid connection.sendRequest(OpenESLintDocRequest.type, { url });\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tworkspaceChange = changes.get(params.command);\r\n\t\t}\r\n\t}\r\n\r\n\tif (workspaceChange === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\treturn connection.workspace.applyEdit(workspaceChange.edit).then((response) => {\r\n\t\tif (!response.applied) {\r\n\t\t\tconnection.console.error(`Failed to apply command: ${params.command}`);\r\n\t\t}\r\n\t\treturn null;\r\n\t}, () => {\r\n\t\tconnection.console.error(`Failed to apply command: ${params.command}`);\r\n\t\treturn null;\r\n\t});\r\n}, (params): number | undefined => {\r\n\tconst commandParam: CommandParams = params.arguments![0] as CommandParams;\r\n\tif (changes.isUsable(commandParam.uri, commandParam.version)) {\r\n\t\treturn commandParam.version;\r\n\t} else {\r\n\t\treturn undefined;\r\n\t}\r\n});\r\n\r\nmessageQueue.registerRequest(DocumentFormattingRequest.type, (params) => {\r\n\tconst textDocument = documents.get(params.textDocument.uri);\r\n\tif (textDocument === undefined) {\r\n\t\treturn [];\r\n\t}\r\n\treturn computeAllFixes({ uri: textDocument.uri, version: textDocument.version }, AllFixesMode.format);\r\n}, (params) => {\r\n\tconst document = documents.get(params.textDocument.uri);\r\n\treturn document !== undefined ? document.version : undefined;\r\n});\r\n\r\n\r\ndocuments.listen(connection);\r\nnotebooks.listen(connection);\r\nconnection.listen();\r\nconnection.console.info(`ESLint server running in node ${process.version}`);\r\n"],"names":["original","modified","pretty","LcsDiff","StringDiffSequence","ComputeDiff","changes","constructor","source","getElements","this","characters","Int32Array","length","i","len","charCodeAt","DiffChange","originalStart","originalLength","modifiedStart","modifiedLength","getOriginalEnd","getModifiedEnd","Debug","static","condition","message","Error","MyArray","sourceArray","sourceIndex","destinationArray","destinationIndex","DiffChangeHelper","m_changes","m_originalStart","m_modifiedStart","m_originalCount","m_modifiedCount","MarkNextChange","push","AddOriginalElement","originalIndex","modifiedIndex","Math","min","AddModifiedElement","getChanges","getReverseChanges","reverse","originalSequence","modifiedSequence","continueProcessingPredicate","ContinueProcessingPredicate","originalStringElements","originalElementsOrHash","originalHasStrings","_getElements","modifiedStringElements","modifiedElementsOrHash","modifiedHasStrings","_hasStrings","_originalStringElements","_originalElementsOrHash","_modifiedStringElements","_modifiedElementsOrHash","m_forwardHistory","m_reverseHistory","sequence","elements","ElementsAreEqual","newIndex","OriginalElementsAreEqual","index1","index2","ModifiedElementsAreEqual","_ComputeDiff","originalEnd","modifiedEnd","quitEarlyArr","ComputeDiffRecursive","PrettifyChanges","quitEarly","Assert","midOriginalArr","midModifiedArr","result","ComputeRecursionPoint","midOriginal","midModified","leftChanges","rightChanges","ConcatenateChanges","WALKTRACE","diagonalForwardBase","diagonalForwardStart","diagonalForwardEnd","diagonalForwardOffset","diagonalReverseBase","diagonalReverseStart","diagonalReverseEnd","diagonalReverseOffset","forwardPoints","reversePoints","deltaIsEven","forwardChanges","reverseChanges","changeHelper","diagonalMin","diagonalMax","diagonalRelative","lastOriginalIndex","historyIndex","diagonal","originalStartPoint","modifiedStartPoint","lastForwardChange","max","maxDifferences","numDiagonals","numDifferences","furthestOriginalIndex","furthestModifiedIndex","ClipDiagonalBound","tempOriginalIndex","abs","matchLengthOfLongest","temp","Copy2","change","originalStop","modifiedStop","checkOriginal","checkModified","mergedChangeArr","ChangesOverlap","splice","prevChange","bestDelta","bestScore","_boundaryScore","delta","score","_OriginalIsBoundary","index","test","_OriginalRegionIsBoundary","_ModifiedIsBoundary","_ModifiedRegionIsBoundary","left","right","Array","Copy","diagonalBaseIndex","diffEven","TextDocumentSettings","ESLintError","RuleMetaData","Problem","ESLintModule","RuleData","CLIEngine","RuleSeverities","Diagnostics","CodeActions","ESLint","hasLibrary","settings","undefined","library","isNoConfigFound","error","candidate","messageTemplate","unusedDisableDirectiveId","unusedDisableDirectiveMeta","docs","url","type","handled","Set","ruleId2Meta","Map","capture","eslint","reports","rulesMetaData","isCLIEngine","toHandle","filter","report","has","filePath","getRulesMetaForResults","forEach","add","Object","entries","key","meta","Is","string","set","clear","getUrl","ruleId","get","getType","hasRuleId","isUnusedDisableDirectiveProblem","problem","startsWith","isFixable","edit","hasSuggestions","suggestions","FixableProblem","createTextEdit","document","editInfo","TextEdit","replace","Range","create","positionAt","range","text","SuggestionsProblem","suggestion","fix","hasESLintClass","value","hasCLIEngine","isFlatConfig","hasMetaType","hasRule","getRules","ESLintClassEmulator","cli","async","content","options","executeOnText","warnIgnored","results","path","isPathIgnored","_results","rules","name","rule","getConfigForFile","Fixes","edits","a","b","isEmpty","size","getDocumentVersion","values","next","documentVersion","getScoped","diagnostics","diagnostic","computeKey","getAllSorted","sort","d0","al","bl","getApplicable","sorted","last","current","overlaps","sameRange","SaveRuleConfigs","saveRuleConfigCache","LRUCache","isOff","matchers","matcher","RegExp","slice","uri","inferFilePath","codeActionOnSave","withClass","config","calculateConfigForFile","offRules","onRules","keys","remove","delete","ruleSeverityCache","asteriskMatches","getOverride","customizations","customization","severity","adjustSeverityForOverride","severityOverride","RuleSeverity","off","info","warn","downgrade","convertSeverityToDiagnostic","DiagnosticSeverity","Warning","Information","upgrade","hash","crypto","createHash","update","digest","start","line","character","end","code","startLine","Number","isNaN","startChar","column","endLine","endChar","endColumn","problems","shortenToSingleLine","getText","uinteger","MAX_VALUE","override","rulesCustomizations","codeDescription","href","tags","DiagnosticTag","Unnecessary","codeActions","record","label","version","connection","documents","loadNodeModule","languageId2ParserRegExp","typescript","babelESLint","vueESLint","languageId2ParserOptions","regExps","parsers","parserRegExps","languageId2PluginName","defaultLanguageIds","projectFolderIndicators","fileName","isRoot","path2Library","document2Settings","formatterRegistrations","newClass","newOptions","useESLintClass","func","assign","cwd","process","workingDirectory","newCWD","normalizeDriveLetter","sep","substring","normalizeWorkingDirectory","directory","fs","existsSync","chdir","eslintClass","getFilePath","URI","parse","scheme","workspaceFolder","ext","getExtension","languageId","workspacePath","join","initialize","$connection","$documents","$inferFilePath","$loadNodeModule","removeSettings","clearSettings","unregisterAsFormatter","unregister","then","disposable","dispose","clearFormatters","unregistration","resolveSettings","resultPromise","workspace","getConfiguration","scopeUri","section","configuration","silent","resolvedGlobalPackageManagerPath","validate","Validate","GlobalPaths","packageManager","workspaceFolderPath","hasUserDefinedWorkingDirectories","workingDirectoryConfig","mode","ModeEnum","location","ModeItem","is","isUNC","dirname","auto","findWorkingDirectory","promise","nodePath","moduleResolveWorkingDirectory","isAbsolute","eslintPath","experimental","useFlatConfig","Files","resolve","trace","probe","libraryPath","lib","console","FlatESLint","pluginName","parserOptions","on","eslintConfig","err","parser","normalizePath","regExp","eslintConfigParserOptionsParser","some","parserRegExp","isArray","plugins","params","textDocument","sendRequest","ProbeFailedRequest","format","Uri","isFile","pattern","fsPath","documentSelector","client","register","DocumentFormattingRequest","NoESLintLibraryRequest","validFixTypes","verbose","tracer","log","ErrorHandlers","file","indexOf","outer","parent","fixTypes","item","reportResults","lintText","onIgnoredFiles","ESLintSeverity","docReport","messages","quiet","globalPaths","yarn","cache","resolveGlobalYarnPath","npm","resolveGlobalNodePath","pnpm","execSync","toString","trim","pm","getMessage","String","substr","single","noConfigReported","NoConfigRequest","Status","handleFileName","filename","configErrorReported","window","showInformationMessage","matches","exec","plugin","module","missingModuleReported","handleMissingModule","stack","clearNoConfigReported","getConfigErrorReported","removeConfigErrorReported","clearMissingModuleReported","prototype","call","languageId2Config","lineComment","blockComment","LanguageDefaults","getLineComment","getBlockComment","Touch","None","First","AsOld","Last","AsNew","LinkedMap","_map","_head","_tail","_size","_state","first","touch","previous","addItemLast","addItemFirst","removeItem","shift","callbackfn","thisArg","state","bind","map","iterator","Symbol","done","toStringTag","trimOld","newSize","currentSize","toJSON","data","fromJSON","limit","ratio","super","_limit","_ratio","checkTrim","peek","round","platform","toUpperCase","pos","realpath","realpathSync","native","toLowerCase","documentOrUri","ExitCalled","ShowOutputChannel","OpenESLintDocRequest","StatusNotification","method","NotificationType","RequestType","NotificationType0","CodeActionsOnSaveMode","boolean","from","all","CodeActionsOnSaveRules","DirectoryItem","defineProperty","exports","ProgressType","ProgressToken","createMessageConnection","NullLogger","ConnectionOptions","ConnectionStrategy","AbstractMessageBuffer","WriteableStreamMessageWriter","AbstractMessageWriter","MessageWriter","ReadableStreamMessageReader","AbstractMessageReader","MessageReader","SharedArrayReceiverStrategy","SharedArraySenderStrategy","CancellationToken","CancellationTokenSource","Emitter","Event","Disposable","ParameterStructures","NotificationType9","NotificationType8","NotificationType7","NotificationType6","NotificationType5","NotificationType4","NotificationType3","NotificationType2","NotificationType1","ErrorCodes","ResponseError","RequestType9","RequestType8","RequestType7","RequestType6","RequestType5","RequestType4","RequestType3","RequestType2","RequestType1","RequestType0","Message","RAL","MessageStrategy","CancellationStrategy","CancellationSenderStrategy","CancellationReceiverStrategy","ConnectionError","ConnectionErrors","LogTraceNotification","SetTraceNotification","TraceFormat","TraceValues","Trace","messages_1","enumerable","linkedMap_1","disposable_1","events_1","cancellation_1","sharedArrayCancellation_1","messageReader_1","messageWriter_1","messageBuffer_1","connection_1","ral_1","default","freeze","isCancellationRequested","onCancellationRequested","Cancelled","shortcutEvent","callback","context","handle","timer","setTimeout","MutableToken","_isCancelled","cancel","_emitter","fire","event","token","_token","RequestCancellationReceiverStrategy","IdCancellationReceiverStrategy","CancelNotification","ProgressNotification","StarRequestHandler","ConnectionState","Off","Messages","Compact","Verbose","fromString","JSON","Text","setPrototypeOf","cancelUndispatched","kind","createCancellationTokenSource","_","sendCancellation","conn","id","sendNotification","cleanup","receiver","sender","handleMessage","cancellationStrategy","connectionStrategy","messageStrategy","messageReader","messageWriter","_logger","logger","sequenceNumber","notificationSequenceNumber","unknownResponseSequenceNumber","starRequestHandler","requestHandlers","starNotificationHandler","notificationHandlers","progressHandlers","messageQueue","responsePromises","knownCanceledRequests","requestTokens","traceFormat","New","errorEmitter","closeEmitter","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","createRequestQueueKey","_message","isListening","Listening","isClosed","Closed","isDisposed","Disposed","closeHandler","triggerMessageQueue","setImmediate","processMessageQueue","isRequest","requestMessage","reply","resultOrError","startTime","jsonrpc","toJson","traceSendingResponse","write","catch","replyError","stringifyTrace","logLSPMessage","traceReceivedRequest","element","requestHandler","handler","Date","now","tokenKey","cancellationSource","handlerResult","numberOfParams","InvalidParams","parameterStructures","byName","byPosition","InternalError","replySuccess","MethodNotFound","handleRequest","isNotification","notificationHandler","cancelId","traceReceivedNotification","handleNotification","isResponse","responseMessage","stringify","responsePromise","timerStart","traceReceivedResponse","reject","handleResponse","number","responseHandler","handleInvalidMessage","onClose","onError","toCancel","strategy","response","cancellationToken","queue","addMessageToQueue","lspMessage","isLSPMessage","timestamp","throwIfClosedOrDisposed","undefinedToNull","param","nullToUndefined","isNamedParam","computeSingleParam","computeMessageParams","args","messageParams","paramStart","paramEnd","notificationMessage","traceSendingNotification","onNotification","onProgress","_type","sendProgress","onUnhandledProgress","throwIfNotListening","p","Promise","traceSendingRequest","enableCancellation","r","MessageWriteError","onRequest","hasPendingResponse","_value","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","onUnhandledNotification","onDispose","PendingResponseRejected","listen","AlreadyListening","throwIfListening","inspect","_disposable","CallbackList","bucket","_callbacks","_contexts","foundCallbackWithDifferentContext","invoke","ret","callbacks","contexts","apply","e","_options","_event","listener","thisArgs","disposables","onFirstListenerAdd","_noop","onLastListenerRemove","array","stringArray","every","elem","_a","encoding","_encoding","_chunks","_totalLength","append","chunk","toAppend","byteLength","tryReadHeaders","lowerCaseKeys","chunkIndex","offset","chunkBytesRead","row","buffer","_read","headers","split","header","tryReadBody","numberOfBytes","byteCount","emptyBuffer","asNative","allocNative","resultOffset","chunkPart","semaphore_1","ResolvedMessageReaderOptions","onPartialMessage","partialMessageEmitter","fireError","asError","fireClose","firePartialMessage","fromOptions","charset","contentDecoder","contentDecoders","contentTypeDecoder","contentTypeDecoders","decoder","applicationJson","readable","messageBuffer","_partialMessageTimeout","nextMessageLength","messageToken","readSemaphore","Semaphore","partialMessageTimeout","timeout","partialMessageTimer","onData","contentLength","parseInt","body","setPartialMessageTimer","clearPartialMessageTimer","lock","bytes","decode","waitingTime","ResolvedMessageWriterOptions","count","contentTypeEncoder","encoder","contentEncoder","writable","errorCount","writeSemaphore","msg","encode","doWrite","handleError","AbstractMessageSignature","ParseError","InvalidRequest","jsonrpcReservedErrorRangeStart","serverErrorStart","MessageReadError","ConnectionInactive","ServerNotInitialized","UnknownErrorCode","jsonrpcReservedErrorRangeEnd","serverErrorEnd","_parameterStructures","_ral","install","ral","capacity","_capacity","_active","_waiting","thunk","runNext","active","doRunNext","CancellationState","Continue","buffers","request","SharedArrayBuffer","$cancellationData","_conn","Atomics","store","SharedArrayBufferCancellationToken","load","SharedArrayBufferCancellationTokenSource","__createBinding","o","m","k","k2","desc","getOwnPropertyDescriptor","__esModule","configurable","__exportStar","hasOwnProperty","createServerSocketTransport","createClientSocketTransport","createServerPipeTransport","createClientPipeTransport","generateRandomPipeName","StreamMessageWriter","StreamMessageReader","SocketMessageWriter","SocketMessageReader","PortMessageWriter","PortMessageReader","IPCMessageWriter","IPCMessageReader","ril_1","os","crypto_1","net_1","api_1","eventEmitter","send","port","postMessage","socket","stream","asReadableStream","asWritableStream","destroy","XDG_RUNTIME_DIR","env","safeIpcPathLengths","randomSuffix","randomBytes","tmpdir","pipeName","connectResolve","connected","_reject","server","createServer","close","removeListener","onConnected","createConnection","input","output","reader","read","addListener","isReadableStream","writer","isWritableStream","util_1","MessageBuffer","Buffer","TextDecoder","allocUnsafe","ReadableStreamWrapper","onEnd","WritableStreamWrapper","_ril","ms","clearTimeout","clearImmediate","setInterval","clearInterval","RIL","LSPErrorCodes","createProtocolConnection","lspReservedErrorRangeStart","RequestFailed","ServerCancelled","ContentModified","RequestCancelled","lspReservedErrorRangeEnd","vscode_jsonrpc_1","ProtocolNotificationType","ProtocolNotificationType0","ProtocolRequestType","ProtocolRequestType0","RegistrationType","MessageDirection","CallHierarchyOutgoingCallsRequest","CallHierarchyIncomingCallsRequest","CallHierarchyPrepareRequest","messageDirection","clientToServer","ColorPresentationRequest","DocumentColorRequest","ConfigurationRequest","serverToClient","DeclarationRequest","DiagnosticRefreshRequest","WorkspaceDiagnosticRequest","DocumentDiagnosticRequest","DocumentDiagnosticReportKind","DiagnosticServerCancellationData","retriggerRequest","Full","Unchanged","partialResult","WillDeleteFilesRequest","DidDeleteFilesNotification","DidRenameFilesNotification","WillRenameFilesRequest","DidCreateFilesNotification","WillCreateFilesRequest","FileOperationPatternKind","folder","FoldingRangeRequest","ImplementationRequest","InlayHintRefreshRequest","InlayHintResolveRequest","InlayHintRequest","InlineValueRefreshRequest","InlineValueRequest","WorkspaceSymbolRequest","CodeActionResolveRequest","CodeActionRequest","DocumentSymbolRequest","DocumentHighlightRequest","ReferencesRequest","DefinitionRequest","SignatureHelpRequest","SignatureHelpTriggerKind","HoverRequest","CompletionResolveRequest","CompletionRequest","CompletionTriggerKind","PublishDiagnosticsNotification","WatchKind","RelativePattern","FileChangeType","DidChangeWatchedFilesNotification","WillSaveTextDocumentWaitUntilRequest","WillSaveTextDocumentNotification","TextDocumentSaveReason","DidSaveTextDocumentNotification","DidCloseTextDocumentNotification","DidChangeTextDocumentNotification","TextDocumentContentChangeEvent","DidOpenTextDocumentNotification","TextDocumentSyncKind","TelemetryEventNotification","LogMessageNotification","ShowMessageRequest","ShowMessageNotification","MessageType","DidChangeConfigurationNotification","ExitNotification","ShutdownRequest","InitializedNotification","InitializeErrorCodes","InitializeRequest","WorkDoneProgressOptions","TextDocumentRegistrationOptions","StaticRegistrationOptions","PositionEncodingKind","FailureHandlingKind","ResourceOperationKind","UnregistrationRequest","RegistrationRequest","DocumentSelector","NotebookCellTextDocumentFilter","NotebookDocumentFilter","TextDocumentFilter","TypeHierarchySubtypesRequest","TypeHierarchyPrepareRequest","MonikerRequest","MonikerKind","UniquenessLevel","LinkedEditingRangeRequest","ShowDocumentRequest","SemanticTokensRegistrationType","SemanticTokensRefreshRequest","SemanticTokensRangeRequest","SemanticTokensDeltaRequest","SemanticTokensRequest","TokenFormat","WorkDoneProgressCancelNotification","WorkDoneProgressCreateRequest","WorkDoneProgress","SelectionRangeRequest","DidChangeWorkspaceFoldersNotification","WorkspaceFoldersRequest","TypeDefinitionRequest","ApplyWorkspaceEditRequest","ExecuteCommandRequest","PrepareRenameRequest","RenameRequest","PrepareSupportDefaultBehavior","DocumentOnTypeFormattingRequest","DocumentRangeFormattingRequest","DocumentLinkResolveRequest","DocumentLinkRequest","CodeLensRefreshRequest","CodeLensResolveRequest","CodeLensRequest","WorkspaceSymbolResolveRequest","DidCloseNotebookDocumentNotification","DidSaveNotebookDocumentNotification","DidChangeNotebookDocumentNotification","NotebookCellArrayChange","DidOpenNotebookDocumentNotification","NotebookDocumentSyncRegistrationType","NotebookDocument","NotebookCell","ExecutionSummary","NotebookCellKind","TypeHierarchySupertypesRequest","vscode_languageserver_types_1","protocol_implementation_1","protocol_typeDefinition_1","protocol_workspaceFolder_1","protocol_configuration_1","protocol_colorProvider_1","protocol_foldingRange_1","protocol_declaration_1","protocol_selectionRange_1","protocol_progress_1","protocol_callHierarchy_1","protocol_semanticTokens_1","protocol_showDocument_1","protocol_linkedEditingRange_1","protocol_fileOperations_1","protocol_moniker_1","protocol_typeHierarchy_1","protocol_inlineValue_1","protocol_inlayHint_1","protocol_diagnostic_1","protocol_notebook_1","language","objectLiteral","notebookType","notebook","Create","Rename","Delete","Abort","Transactional","TextOnlyTransactional","Undo","UTF8","UTF16","UTF32","hasId","workDoneProgress","hasWorkDoneProgress","unknownProtocolVersion","Info","Log","Incremental","isIncremental","rangeLength","isFull","Manual","AfterDelay","FocusOut","Created","Changed","Deleted","baseUri","WorkspaceFolder","Change","Invoked","TriggerCharacter","TriggerForIncompleteCompletions","ContentChange","Identifier","project","group","global","$import","$export","local","Markup","Code","executionOrder","success","equals","one","other","equalsMetadata","oneArray","otherArray","oneKeys","otherKeys","prop","DocumentUri","metadata","diff","two","executionSummary","cells","integer","typedArray","registrationMethod","deleteCount","Relative","check","node_1","TextDocument","__spreadArray","to","pack","arguments","ar","l","concat","FullTextDocument","_uri","_languageId","_version","_content","_lineOffsets","offsetAt","_i","changes_1","getWellformedRange","startOffset","endOffset","lineOffsets","addedLineOffsets","computeLineOffsets","getLineOffsets","low","high","mid","floor","position","lineOffset","nextLineOffset","mergeSort","compare","leftIdx","rightIdx","isAtLineStart","textOffset","ch","getWellformedEdit","textEdit","newText","applyEdits","lastModifiedOffset","spans","sortedEdits_1","Position","Location","LocationLink","Color","ColorInformation","ColorPresentation","FoldingRangeKind","FoldingRange","DiagnosticRelatedInformation","CodeDescription","Diagnostic","Command","ChangeAnnotation","ChangeAnnotationIdentifier","AnnotatedTextEdit","TextDocumentEdit","CreateFile","RenameFile","DeleteFile","WorkspaceEdit","MIN_VALUE","three","four","targetUri","targetRange","targetSelectionRange","originSelectionRange","red","green","blue","alpha","numberRange","color","additionalTextEdits","Comment","Imports","Region","startCharacter","endCharacter","collapsedText","defined","Hint","Deprecated","relatedInformation","title","command","insert","del","needsConfirmation","description","annotation","annotationId","OptionalVersionedTextDocumentIdentifier","overwrite","ignoreIfExists","oldUri","newUri","recursive","ignoreIfNotExists","documentChanges","TextDocumentIdentifier","VersionedTextDocumentIdentifier","TextDocumentItem","MarkupKind","MarkupContent","CompletionItemKind","InsertTextFormat","CompletionItemTag","InsertReplaceEdit","InsertTextMode","CompletionItemLabelDetails","CompletionItem","CompletionList","MarkedString","Hover","ParameterInformation","SignatureInformation","DocumentHighlightKind","DocumentHighlight","SymbolKind","SymbolTag","SymbolInformation","WorkspaceSymbol","DocumentSymbol","CodeActionKind","CodeActionTriggerKind","CodeActionContext","CodeAction","CodeLens","FormattingOptions","DocumentLink","SelectionRange","SemanticTokenTypes","SemanticTokenModifiers","SemanticTokens","InlineValueText","InlineValueVariableLookup","InlineValueEvaluatableExpression","InlineValueContext","InlayHintKind","InlayHintLabelPart","InlayHint","TextEditChangeImpl","changeAnnotations","assertChangeAnnotations","manage","ChangeAnnotations","annotations","_annotations","_counter","idOrAnnotation","nextId","WorkspaceChange","workspaceEdit","_this","_textEditChanges","_workspaceEdit","_changeAnnotations","textEditChange","initDocumentChanges","getTextEditChange","textDocumentEdit","initChanges","createFile","optionsOrAnnotation","operation","renameFile","deleteFile","PlainText","Markdown","Method","Function","Constructor","Field","Variable","Class","Interface","Module","Property","Unit","Value","Enum","Keyword","Snippet","File","Reference","Folder","EnumMember","Constant","Struct","Operator","TypeParameter","asIs","adjustIndentation","detail","items","isIncomplete","fromPlainText","plainText","contents","documentation","parameters","Read","Write","Namespace","Package","Boolean","Key","Null","containerName","selectionRange","children","deprecated","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","SourceFixAll","Automatic","only","triggerKind","kindOrCommandOrEdit","checkKind","isPreferred","tabSize","insertSpaces","target","resultId","variableName","caseSensitiveLookup","expression","frameId","stoppedLocation","Type","Parameter","tooltip","textEdits","paddingLeft","paddingRight","EOL","lineCount","sortedEdits","isLineStart","charAt","ProposedFeatures","NotebookDocuments","TextDocuments","SemanticTokensBuilder","semanticTokens_1","textDocuments_1","notebook_1","__brand","CallHierarchyFeature","vscode_languageserver_protocol_1","Base","callHierarchy","onPrepare","attachWorkDoneProgress","onIncomingCalls","attachPartialResultProgress","onOutgoingCalls","ConfigurationFeature","arg","_getConfiguration","DiagnosticFeature","refresh","onWorkspace","FileOperationsFeature","onDidCreateFiles","onDidRenameFiles","onDidDeleteFiles","onWillCreateFiles","onWillRenameFiles","onWillDeleteFiles","InlayHintFeature","inlayHint","InlineValueFeature","inlineValue","LinkedEditingRangeFeature","onLinkedEditingRange","MonikerFeature","moniker","NotebookSyncFeature","synchronization","onDidOpenNotebookDocument","onDidChangeNotebookDocument","onDidSaveNotebookDocument","onDidCloseNotebookDocument","CellTextDocumentConnection","onDidOpenTextDocument","openHandler","openTextDocument","onDidChangeTextDocument","changeHandler","changeTextDocument","onDidCloseTextDocument","closeTextDocument","onWillSaveTextDocument","NULL_DISPOSE","onWillSaveTextDocumentWaitUntil","onDidSaveTextDocument","configurationOrTextDocuments","_cellTextDocuments","notebookDocuments","notebookCellMap","_onDidOpen","_onDidChange","_onDidSave","_onDidClose","cellTextDocuments","getCellTextDocument","cell","getNotebookDocument","getNotebookCell","findNotebookDocumentForCell","onDidOpen","onDidSave","onDidChange","onDidClose","cellTextDocumentConnection","notebooks","notebookDocument","cellTextDocument","updateCellMap","oldMetadata","metadataChanged","opened","closed","changedCells","structure","didOpen","open","didClose","cellUpdates","old","new","textContent","contentChanges","changeEvent","added","removed","changed","attachPartialResult","ProgressFeature","attachWorkDone","uuid_1","WorkDoneProgressReporterImpl","_connection","Instances","begin","percentage","cancellable","arg0","arg1","WorkDoneProgressServerReporterImpl","_source","NullProgressReporter","NullProgressServerReporter","ResultProgress","workDoneToken","_progressSupported","capabilities","progress","createWorkDoneProgress","generateUuid","ResultProgressReporterImpl","partialResultToken","SemanticTokensDiff","SemanticTokensFeature","semanticTokens","onDelta","onRange","computeDiff","startIndex","originalEndIndex","modifiedEndIndex","newData","_prevData","_id","_prevLine","_prevChar","_data","_dataLen","char","tokenType","tokenModifiers","pushLine","pushChar","previousResult","build","canBuildEdits","buildEdits","combineFeatures","combineNotebooksFeatures","combineLanguagesFeatures","combineWorkspaceFeatures","combineWindowFeatures","combineClientFeatures","combineTracerFeatures","combineTelemetryFeatures","combineConsoleFeatures","_NotebooksImpl","_LanguagesImpl","BulkUnregistration","BulkRegistration","ErrorMessageTracker","UUID","progress_1","configuration_1","workspaceFolder_1","callHierarchy_1","showDocument_1","fileOperations_1","linkedEditingRange_1","typeHierarchy_1","inlineValue_1","inlayHint_1","diagnostic_1","moniker_1","null2Undefined","_messages","sendErrors","showErrorMessage","RemoteConsoleImpl","rawAttach","_rawConnection","attach","fillServerCapabilities","_capabilities","RemoteWindowImpl","ShowDocumentFeature","actions","showWarningMessage","BulkRegistrationImpl","_registrations","_registered","registerOptions","asRegistrationParams","registrations","BulkUnregistrationImpl","unregistrations","_unregistrations","isAttached","unregisterations","disposeSingle","_error","RemoteClientImpl","typeOrRegistrations","registerOptionsOrType","registerMany","registerSingle1","registerSingle2","_result","unregisterSingle","registration","RemoteWorkspaceImpl","WorkspaceFoldersFeature","applyEdit","paramOrEdit","TracerImpl","_trace","TelemetryImpl","logEvent","LanguagesImpl","TypeHierarchyFeature","NotebooksImpl","combine","telemetry","languages","connectionFactory","watchDog","factories","remoteWindow","allRemotes","asPromise","thenable","resolved","shutdownHandler","initializeHandler","exitHandler","protocolConnection","onInitialize","onInitialized","onShutdown","onExit","onDidChangeConfiguration","onDidChangeWatchedFiles","__textDocumentSync","sendDiagnostics","onHover","onCompletion","onCompletionResolve","onSignatureHelp","onDeclaration","onDefinition","onTypeDefinition","onImplementation","onReferences","onDocumentHighlight","onDocumentSymbol","onWorkspaceSymbol","onWorkspaceSymbolResolve","onCodeAction","onCodeActionResolve","onCodeLens","onCodeLensResolve","onDocumentFormatting","onDocumentRangeFormatting","onDocumentOnTypeFormatting","onRenameRequest","onPrepareRename","onDocumentLinks","onDocumentLinkResolve","onDocumentColor","onColorPresentation","onFoldingRanges","onSelectionRanges","onExecuteCommand","remote","textDocumentSync","shutdownReceived","exit","showDocument","_configuration","_syncedDocuments","_onDidChangeContent","_onWillSave","onDidChangeContent","onWillSave","onWillSaveWaitUntil","_willSaveWaitUntil","td","toFire","syncedDocument","reason","typeHierarchy","onSupertypes","onSubtypes","isUUID","v4","empty","ValueUUID","asHex","V4UUID","_randomHex","_oneOf","_timeHighBits","random","_chars","_UUIDPattern","_notificationIsAutoRegistered","workspaceCapabilities","workspaceFolders","_onDidChangeWorkspaceFolders","changeNotifications","getWorkspaceFolders","onDidChangeWorkspaceFolders","_unregistration","resolveModulePath","FileSystem","uriToFilePath","child_process_1","isWindows","moduleName","app","newEnv","delimiter","cp","fork","execArgv","pid","c","s","npmCommand","shell","stdout","spawnSync","prefix","parsed","protocol","segments","decodeURIComponent","second","normalize","yarnCommand","stderr","lines","_isCaseSensitive","isCaseSensitive","__filename","isParent","child","workspaceRoot","server_1","fm","exitTimer","_shutdownReceived","argName","runTimer","processId","kill","ex","argv","setupExitTimer","arg2","arg3","arg4","stdin","transport","commandLineMessage","inputStream","_createConnection","LIB","t","TypeError","n","h","lastIndexOf","relative","f","u","_makeLong","basename","extname","dir","root","base","win32","posix","d","g","Utils","O","navigator","userAgent","__proto__","authority","query","fragment","isUri","with","C","v","A","revive","_formatted","external","_fsPath","_sep","$mid","y","encodeURIComponent","fromCharCode","w","x","match","P","j","I","U","joinPath","resolvePath","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","obj","clientCapabilities","nodeExit","getUri","getFileSystemPath","extension","Request","Thenable","ValidateNotification","registerRequest","versionProvider","trigger","registerNotification","addNotificationMessage","processQueue","environmentChanged","CommandIds","CommandParams","publishDiagnostics","timeTaken","ok","validationTime","status","validateSingle","run","applySingleFix","applySuggestion","applySameFixes","applyAllFixes","applyDisableLine","applyDisableFile","openRuleDoc","_cancel","syncKind","openClose","willSaveWaitUntil","save","includeText","supported","executeCommandProvider","commands","codeAction","codeActionLiteralSupport","codeActionKind","valueSet","codeActionProvider","codeActionKinds","didChangeConfiguration","dynamicRegistration","_params","validateMany","CodeActionResult","_actions","fixes","fixAll","_fixAll","disable","disableFile","showDocumentation","isUsable","ESLintSourceFixAll","AllFixesMode","computeAllFixes","identifier","originalContent","onSave","saveConfig","overrideConfig","filtered","fixedContent","diffs","stringDiff","createCodeAction","commandId","action","getDisableRuleEditInsertionIndex","commentTags","charIndex","escapeStringRegexp","createDisableLineTextEdit","indentationText","prevLine","insertionIndex","disableRuleContent","disableRuleComment","commentStyle","createDisableSameLineTextEdit","currentLine","matchedLineDisable","matchedBlockDisable","createDisableFileTextEdit","block","getLastEdit","isSource","isSourceFixAll","textDocumentIdentifier","allFixableRuleIds","workspaceChange","suggestionSequence","enable","lineText","sameProblems","same","sameFixes","sameTextChange","commandParams","textChange","applied","commandParam"],"sourceRoot":""}